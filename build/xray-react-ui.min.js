(function () {
  'use strict';

  const xrayReactElemCN = 'xray-react-element';
  const xrayReactWrapperCN = 'xray-react-elements-wrapper';
  const xrayReactCompPathAttr = 'data-xray-react-components-path';
  const xrayReactFilteredCompPathAttr = 'data-xray-react-filtered-components-path';
  const zIndex = 10000;

  const UI_MODE_FULL = 'full';
  const UI_MODE_SIMPLE = 'simple';
  const AVAILABLE_UI_MODES = [UI_MODE_FULL, UI_MODE_SIMPLE];

  const HTML_ELEMENTS = new Set([
    'div', 'span', 'form', 'button', 'input', 'a', 'img', 'p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6',
    'ul', 'li', 'ol', 'table', 'tr', 'td', 'th', 'thead', 'tbody', 'tfoot',
    'section', 'article', 'header', 'footer', 'nav', 'main', 'aside',
    'label', 'select', 'option', 'textarea', 'fieldset', 'legend',
    'br', 'hr', 'strong', 'em', 'b', 'i', 'u', 'small', 'sub', 'sup',
    'dl', 'dt', 'dd', 'pre', 'code', 'blockquote', 'cite',
    'canvas', 'svg', 'path', 'circle', 'rect', 'line', 'polyline', 'polygon',
    'iframe', 'embed', 'object', 'video', 'audio', 'source', 'track',
    'meta', 'link', 'style', 'script', 'noscript', 'template'
  ]);

  var css = `
  .xray-react-enabled {
    margin-bottom: 50px !important;
  }
  .xray-react-elements-wrapper {
    bottom: 0;
    font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    font-style: normal;
    left: 0;
    position: absolute;
    right: 0;
    top: 0;
  }
  .xray-react-element {
    background-color: rgba(0, 0, 255, 0.25);
    border: 2px solid blue;
    cursor: pointer;
    position: absolute;
  }
  .xray-react-element::before {
    align-self: center;
    color: white;
    content: attr(data-xray-react-element-name);
    display: table;
    font-size: 18px;
    font-weight: 400;
    left: 50%;
    position: absolute;
    right: 0;
    text-align: center;
    top: 50%;
    transform: translate(-50%, -50%);
  }
  .xray-react-element::after {
    background-color: darkblue;
    color: white;
    content: attr(data-xray-react-element-name);
    display: inline-block;
    font-size: 10px;
    left: 0;
    padding: 0 5px;
    position: absolute;
    top: 0;
  }
  .xray-react-element:hover,
  .xray-react-element.-highlighted {
    background-color: rgba(0, 0, 255, 0.75);
    border-color: cyan;
  }
  .xray-react-element:hover::before,
  .xray-react-element.-highlighted::before {
    color: cyan;
  }
  .xray-react-element:hover::after,
  .xray-react-element.-highlighted::after {
    background-color: cyan;
    color: darkblue;
  }
  .xray-react-element.-highlighted {
    z-index: 99999 !important;
  }
  .xray-react-action-bar {
    align-items: center;
    background-color: darkblue;
    bottom: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    max-height: 100px;
    min-height: 50px;
    overflow-y: auto;
    padding: 0 10px;
    position: fixed;
    width: 100vw;
    z-index: 999999;
  }
  .xray-react-action-bar::-webkit-scrollbar {
    width: 8px;
  }
  .xray-react-action-bar::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
  }
  .xray-react-action-bar::-webkit-scrollbar-thumb {
    background: cyan;
    border-radius: 4px;
  }
  .xray-react-action-bar::-webkit-scrollbar-thumb:hover {
    background: #00ffff;
  }
  .xray-react-actions-wrapper {
    align-items: center;
    display: flex;
    font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    font-style: normal;
    min-height: 50px;
    padding: 5px 0;
    position: sticky;
    top: 0;
    width: 100%;
  }
  #search-component {
    align-self: center;
    background-color: lightgray;
    border-radius: 3px;
    border: 0;
    flex-shrink: 0;
    font-size: 14px;
    height: 30px;
    line-height: 20px;
    margin-right: 15px;
    min-width: 200px;
    outline: 0;
    padding: 5px 10px;
    width: 25%;
  }
  .components-path {
    color: cyan;
    flex: 1;
    font-size: 11px;
    line-height: 1.4;
    min-width: 0;
    overflow-x: auto;
    overflow-y: visible;
    white-space: nowrap;
    word-break: keep-all;
  }
  .components-path::-webkit-scrollbar {
    height: 4px;
  }
  .components-path::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
  }
  .components-path::-webkit-scrollbar-thumb {
    background: cyan;
    border-radius: 2px;
  }
  .components-path::-webkit-scrollbar-thumb:hover {
    background: #00ffff;
  }
  .xray-react-element-temp {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
  }
  .xray-react-element-temp::before {
    display: none !important;
  }
  .xray-react-element-temp::after {
    display: none !important;
  }
  .xray-react-spinner {
    width: 50px;
    height: 50px;
    border: 4px solid rgba(0, 255, 255, 0.3);
    border-top-color: cyan;
    border-radius: 50%;
    animation: xray-react-spin 1s linear infinite;
    position: relative;
    z-index: 1;
  }
  @keyframes xray-react-spin {
    to { transform: rotate(360deg); }
  }
  /* Simple mode styles */
  .xray-react-elements-wrapper.-simple-mode {
    border: 2px solid blue;
    box-sizing: border-box;
  }
  .xray-react-elements-wrapper.-simple-mode .xray-react-element {
    opacity: 0;
    pointer-events: auto;
  }
  .xray-react-elements-wrapper.-simple-mode .xray-react-element:hover {
    opacity: 1;
  }
  .xray-react-action-bar.-simple-mode #search-component {
    display: none;
  }
`;

  const actionBar = `
  <div class="xray-react-action-bar">
    <div class="xray-react-actions-wrapper">
      <input id="search-component" type="text" placeholder="Search component by name..."/>
      <div class="components-path"></div>
    </div>
  </div>
`;

  const MAX_FIBER_DEPTH = 50; // Prevent infinite loops

  let projectRoot = null;
  let usageMap = {};
  let importMap = {};
  let projectFilePaths = new Set();
  let normalizedProjectFilePaths = new Set();           // Pre-normalized paths for O(1) lookup
  let componentNameToFilesIndex = new Map();            // componentName -> Set<filePath> for O(1) lookup
  const normalizePathCache = new Map();                 // Memoization cache for normalizePath
  let currentMode = UI_MODE_FULL;

  const EXTERNAL_PATTERNS = [
    /node_modules/i,
    /\.next[\/\\]/i,
    /dist[\/\\]/i,
    /build[\/\\]/i,
    /\.git[\/\\]/i,
    /\.cache[\/\\]/i,
    /coverage[\/\\]/i,
  ];

  /**
   * Normalizes a file path for comparison
   * Handles both Unix and Windows paths, relative and absolute
   * Uses memoization cache for repeated calls with same path
   * @param {string} filePath - File path to normalize
   * @returns {string} Normalized path
   */
  const normalizePath = (filePath) => {
    if (!filePath) return '';
    
    const cached = normalizePathCache.get(filePath);
    if (cached !== undefined) return cached;
    
    let normalized = String(filePath).replace(/\\/g, '/');
    normalized = normalized.replace(/^\/+|\/+$/g, '');
    normalized = normalized.toLowerCase();
    
    normalizePathCache.set(filePath, normalized);
    return normalized;
  };

  /**
   * Checks if a file path is external (node_modules, build artifacts, etc.)
   * @param {string} filePath - File path to check
   * @returns {boolean} True if path is external
   */
  const isExternalPath = (filePath) => {
    if (!filePath) return false;
    
    const normalized = normalizePath(filePath);
    
    return EXTERNAL_PATTERNS.some(pattern => pattern.test(normalized));
  };

  /**
   * Detects project root from a file path by finding common base path
   * @param {Array<string>} filePaths - Array of file paths from fibers
   * @returns {string|null} Detected project root or null
   */
  const detectProjectRootFromPaths = (filePaths) => {
    if (!filePaths || filePaths.length === 0) return null;
    
    const projectPaths = filePaths
      .filter(path => path && !isExternalPath(path))
      .map(normalizePath);
    
    if (projectPaths.length === 0) return null;
    
    const pathParts = projectPaths.map(path => path.split('/'));
    const minLength = Math.min(...pathParts.map(parts => parts.length));
    
    let commonParts = [];
    for (let i = 0; i < minLength; i++) {
      const part = pathParts[0][i];
      if (pathParts.every(parts => parts[i] === part)) {
        commonParts.push(part);
      } else {
        break;
      }
    }
    
    if (commonParts.length > 0) {
      return '/' + commonParts.join('/');
    }
    
    const firstPath = projectPaths[0];
    const lastSlash = firstPath.lastIndexOf('/');
    if (lastSlash > 0) {
      return '/' + firstPath.substring(0, lastSlash);
    }
    
    return null;
  };

  /**
   * Removes consecutive duplicate component names from an array
   * @param {Array<string>} path - Array of component names
   * @returns {Array<string>} Array with consecutive duplicates removed
   */
  const removeConsecutiveDuplicates = (path) => {
    if (path.length === 0) return path;
    
    const result = [path[0]];
    for (let i = 1; i < path.length; i++) {
      if (path[i].toLowerCase() !== path[i - 1].toLowerCase()) {
        result.push(path[i]);
      }
    }
    return result;
  };

  /**
   * Handles search input changes to highlight matching components
   * @param {Event} event - Input event
   */
  const handleSearchChange = (event) => {
    const value = event.target.value.toLowerCase();
    const regExp = new RegExp(`^${value}|${value}$`);
    const elements = document.querySelectorAll(`.${xrayReactElemCN}`);
    
    for (const elem of elements) {
      if (value.length >= 2) {
        const searchName = elem.getAttribute('data-xray-react-element-search-name');
        if (searchName && searchName.match(regExp)) {
      elem.classList.add('-highlighted');
        } else {
          elem.classList.remove('-highlighted');
        }
      } else {
        elem.classList.remove('-highlighted');
      }
    }
  };

  /**
   * Gets the current mode from window or defaults to UI_MODE_FULL
   * @returns {string} Current mode (UI_MODE_FULL or UI_MODE_SIMPLE)
   */
  const getCurrentMode = () => {
    if (typeof window !== 'undefined' && window.__XRAY_REACT_MODE__) {
      const mode = window.__XRAY_REACT_MODE__;
      return AVAILABLE_UI_MODES.includes(mode) ? mode : UI_MODE_FULL;
    }
    return UI_MODE_FULL;
  };

  /**
   * Sets the current mode
   * @param {string} mode - Mode to set (UI_MODE_FULL or UI_MODE_SIMPLE)
   */
  const setMode = (mode) => {
    currentMode = AVAILABLE_UI_MODES.includes(mode) ? mode : UI_MODE_FULL;
    if (typeof window !== 'undefined') {
      window.__XRAY_REACT_MODE__ = currentMode;
    }
  };

  /**
   * Creates an overlay element for a React component
   * @param {HTMLElement} elem - The DOM element
   * @param {string} componentName - Name of the React component
   * @returns {Object} Object containing original element and overlay element
   */
  const createElemForComponent = (elem, componentName) => {
    const xrayReactElem = document.createElement('div');
    const boundingClientRect = elem.getBoundingClientRect();
    
    xrayReactElem.className = xrayReactElemCN;
    xrayReactElem.setAttribute('data-xray-react-element-name', componentName);
    xrayReactElem.setAttribute('data-xray-react-element-search-name', componentName.toLowerCase());
    xrayReactElem.style.height = `${boundingClientRect.height}px`;
    xrayReactElem.style.width = `${boundingClientRect.width}px`;
    xrayReactElem.style.top = `${boundingClientRect.top + window.scrollY}px`;
    xrayReactElem.style.left = `${boundingClientRect.left + window.scrollX}px`;
    xrayReactElem.style.zIndex = zIndex;
    
    return { elem, xrayReactElem };
  };

  /**
   * Checks if a name is an HTML element
   * @param {string} name - Component or element name
   * @returns {boolean} True if it's an HTML element
   */
  const isHTMLElement = (name) => {
    if (!name || typeof name !== 'string') return false;
    return HTML_ELEMENTS.has(name.toLowerCase());
  };

  /**
   * Resolves component name from element type and fiber
   * Handles function components, class components, forwardRef, memo, etc.
   * @param {*} elementType - React element type
   * @param {Object} fiber - React fiber node
   * @returns {string|null} Component name or null
   */
  const resolveComponentName = (elementType, fiber = null) => {
    if (!elementType) return null;

    if (typeof elementType === 'function') {
      if (elementType.displayName) {
        return elementType.displayName;
      }
      
      if (elementType.name && elementType.name !== 'Anonymous') {
        return elementType.name;
      }
      
      if (elementType.render) {
        return resolveComponentName(elementType.render, fiber);
      }
      
      if (elementType.$$typeof && elementType.type) {
        return resolveComponentName(elementType.type, fiber);
      }
    }
    
    if (typeof elementType === 'string') {
      return elementType;
    }
    
    if (elementType && elementType.$$typeof) {
      if (elementType.type) {
        return resolveComponentName(elementType.type, fiber);
      }
    }
    
    if (fiber && fiber._debugSource) {
      const fileName = fiber._debugSource.fileName;
      if (fileName) {
        const match = fileName.match(/([^/\\]+)\.(jsx?|tsx?)$/);
        if (match) {
          return match[1];
        }
      }
    }
    
    return null;
  };

  /**
   * Checks if a component belongs to the project based on its source file path
   * @param {Object} fiber - React fiber node
   * @param {string} projectRootPath - Project root path for comparison
   * @param {string} componentName - Optional component name to check against project files
   * @returns {boolean} True if component belongs to project
   */
  const isProjectComponent = (fiber, projectRootPath, componentName = null) => {
    if (!projectRootPath) {
      return true;
    }

    const filePath = fiber?._debugSource?.fileName;

    if (filePath) {
      if (isExternalPath(filePath)) {
        return false;
      }
      
      const normalizedFilePath = normalizePath(filePath);
      const normalizedProjectRoot = normalizePath(projectRootPath);
      
      if (normalizedFilePath.startsWith(normalizedProjectRoot)) {
        return true;
      }
      
      if (!normalizedFilePath.includes('node_modules') && 
          !normalizedFilePath.startsWith('/') &&
          !normalizedFilePath.match(/^[a-z]:/i)) {
        return true;
      }
      
      return false;
    }
    
    if (componentName) {
      const normalizedComponentName = componentName.toLowerCase();
      // O(1) lookup using pre-built index instead of O(m) loop through all files
      if (componentNameToFilesIndex.has(normalizedComponentName)) {
        return true;
      }
    }
    
    return false;
  };

  /**
   * Sets the project root path for filtering
   * @param {string} rootPath - Project root path
   */
  const setProjectRoot = (rootPath) => {
    projectRoot = rootPath ? normalizePath(rootPath) : null;
    
    if (typeof window !== 'undefined' && window.__XRAY_REACT_PROJECT_ROOT__ && !projectRoot) {
      projectRoot = normalizePath(window.__XRAY_REACT_PROJECT_ROOT__);
    }
  };

  /**
   * Sets the usage map for filtering external components
   * @param {Object} map - Usage map (file path -> Array of component names)
   */
  const setUsageMap = (map) => {
    usageMap = map || {};
    
    if (typeof window !== 'undefined' && window.__XRAY_REACT_USAGE_MAP__ && Object.keys(usageMap).length === 0) {
      usageMap = window.__XRAY_REACT_USAGE_MAP__;
    }
    
    if (projectFilePaths.size === 0) {
      projectFilePaths = new Set(Object.keys(usageMap || {}));
    } else {
      Object.keys(usageMap || {}).forEach(filePath => projectFilePaths.add(filePath));
    }
  };

  /**
   * Sets the import map for filtering external components (fallback)
   * @param {Object} map - Import map (file path -> Array of component names)
   */
  const setImportMap = (map) => {
    importMap = map || {};
    
    if (typeof window !== 'undefined' && window.__XRAY_REACT_IMPORT_MAP__ && Object.keys(importMap).length === 0) {
      importMap = window.__XRAY_REACT_IMPORT_MAP__;
    }
    
    Object.keys(importMap || {}).forEach(filePath => projectFilePaths.add(filePath));
  };

  /**
   * Sets the list of all project files found in sourcePath folders
   * @param {Array<string>} files - Array of all file paths found in sourcePath
   */
  const setProjectFiles = (files) => {
    let fileList = files || [];
    
    if (typeof window !== 'undefined' && window.__XRAY_REACT_PROJECT_FILES__ && fileList.length === 0) {
      const globalFiles = window.__XRAY_REACT_PROJECT_FILES__;
      if (Array.isArray(globalFiles)) {
        fileList = [...globalFiles];
      }
    }
    
    projectFilePaths = new Set(fileList);
    
    // Pre-compute normalized paths and component name index for O(1) lookups
    normalizedProjectFilePaths.clear();
    componentNameToFilesIndex.clear();
    
    for (const filePath of fileList) {
      const normalized = normalizePath(filePath);
      normalizedProjectFilePaths.add(normalized);
      
      const pathParts = normalized.split('/');
      const filename = pathParts[pathParts.length - 1] || '';
      const filenameWithoutExt = filename.replace(/\.(tsx?|jsx?)$/, '');
      
      if (filenameWithoutExt) {
        if (!componentNameToFilesIndex.has(filenameWithoutExt)) {
          componentNameToFilesIndex.set(filenameWithoutExt, new Set());
        }
        componentNameToFilesIndex.get(filenameWithoutExt).add(filePath);
      }
      
      for (const part of pathParts.slice(0, -1)) {
        if (part && part.length > 1) {
          if (!componentNameToFilesIndex.has(part)) {
            componentNameToFilesIndex.set(part, new Set());
          }
          componentNameToFilesIndex.get(part).add(filePath);
        }
      }
    }
  };

  /**
   * Attempts to detect project root from fiber tree when server is not available
   * Scans DOM for React fibers and extracts file paths to infer project root
   */
  const detectProjectRootFromDOM = () => {
    if (projectRoot) {
      return;
    }
    
    try {
      const filePaths = [];
      const maxSamples = 50; // Limit samples for performance
      let samples = 0;
      
      const walker = document.createTreeWalker(
        document.body,
        NodeFilter.SHOW_ELEMENT,
        null,
        false
      );
      
      let node;
      while ((node = walker.nextNode()) && samples < maxSamples) {
        const fiberKey = Object.keys(node).find(key =>
          key.startsWith('__reactFiber$') || key.startsWith('__reactInternalInstance$')
        );
        
        if (fiberKey) {
          const fiber = node[fiberKey];
          let currentFiber = fiber;
          let depth = 0;
          
          while (currentFiber && depth < 10) {
            if (currentFiber._debugSource && currentFiber._debugSource.fileName) {
              const filePath = currentFiber._debugSource.fileName;
              if (!isExternalPath(filePath)) {
                filePaths.push(filePath);
              }
            }
            currentFiber = currentFiber.return;
            depth++;
            samples++;
          }
        }
      }
      
      if (filePaths.length > 0) {
        const detectedRoot = detectProjectRootFromPaths(filePaths);
        if (detectedRoot) {
          projectRoot = detectedRoot;
        }
      }
    } catch (error) {
      // Silently fail - project root detection is optional
    }
  };

  /**
   * Checks if an external component is used by any internal component in the seen list
   * Checks usage map first (primary), then import map (fallback)
   * @param {string} componentName - External component name to check
   * @param {Array} seenInternalComponents - Array of internal components seen so far in path
   * @returns {boolean} True if component is used by any seen internal component
   */
  const isUsedByInternalComponents = (componentName, seenInternalComponents) => {
    if (!componentName || seenInternalComponents.length === 0) {
      return false;
    }
    
    if (Object.keys(usageMap).length === 0 && Object.keys(importMap).length === 0) {
      return true;
    }
    
    for (const internalComp of seenInternalComponents) {
      const filePath = internalComp.file;
      if (!filePath) continue;
      
      if (usageMap[filePath] && Array.isArray(usageMap[filePath])) {
        if (usageMap[filePath].includes(componentName)) {
          return true;
        }
      }
      
      if (importMap[filePath] && Array.isArray(importMap[filePath])) {
        if (importMap[filePath].includes(componentName)) {
          return true;
        }
      }
    }
    
    return false;
  };

  /**
   * Traverses the fiber tree to find React components, skipping HTML elements
   * Filters out external library components based on usage/import maps
   * @param {Object} fiber - Starting fiber node
   * @param {number} maxDepth - Maximum depth to traverse
   * @returns {Array} Array of component information objects
   */
  const traverseFiberTree = (fiber, maxDepth = MAX_FIBER_DEPTH) => {
    const allComponents = [];
    const internalComponents = [];
    let currentFiber = fiber;
    let depth = 0;
    // Performance improvements
    const visited = new Set();
    
    while (currentFiber && depth < maxDepth) {
      if (visited.has(currentFiber)) {
        break;
      }
      visited.add(currentFiber);
      
      const elementType = currentFiber.elementType || currentFiber.type;
      
      if (elementType) {
        const componentName = resolveComponentName(elementType, currentFiber);
        
        if (componentName) {
          if (!isHTMLElement(componentName)) {
            const isInternal = isProjectComponent(currentFiber, projectRoot, componentName);
            
            let filePath = null;
            if (currentFiber._debugSource && currentFiber._debugSource.fileName) {
              filePath = currentFiber._debugSource.fileName;
            }
            
            allComponents.push({
              name: componentName,
              fiber: currentFiber,
              elementType: elementType,
              depth: depth,
              isInternal: isInternal,
              file: filePath
            });
            
            if (isInternal) {
              internalComponents.push({
                name: componentName,
                file: filePath
              });
            }
          }
        }
      }
      
      currentFiber = currentFiber.return || currentFiber._owner;
      depth++;
    }
    
    const filteredComponents = [];
    for (const comp of allComponents) {
      if (comp.isInternal) {
        filteredComponents.push({
          name: comp.name,
          fiber: comp.fiber,
          elementType: comp.elementType,
          depth: comp.depth,
          file: comp.file,
          isInternal: comp.isInternal
        });
      } else {
        if (isUsedByInternalComponents(comp.name, internalComponents)) {
          filteredComponents.push({
            name: comp.name,
            fiber: comp.fiber,
            elementType: comp.elementType,
            depth: comp.depth,
            file: comp.file,
            isInternal: comp.isInternal
          });
        }
      }
    }
    
    return filteredComponents;
  };

  /**
   * Gets React component information from a DOM element using React DevTools protocol
   * Supports React 18+ and falls back to legacy detection for older versions
   * Enhanced to skip HTML elements and find actual React components
   * @param {HTMLElement} elem - The DOM element
   * @returns {Object} Object with component name and optional uid
   */
  const getComponentObj = (elem) => {
    if (window.__REACT_DEVTOOLS_GLOBAL_HOOK__) {
      try {
        const fiberKey = Object.keys(elem).find(key => 
          key.startsWith('__reactFiber$') || key.startsWith('__reactInternalInstance$')
        );
        
        if (fiberKey) {
          const fiber = elem[fiberKey];
          const components = traverseFiberTree(fiber);
          
          if (components.length > 0) {
            const firstComponent = components[0];
            const uid = firstComponent.fiber._debugID || 
                       `${firstComponent.fiber.index || ''}${firstComponent.fiber.key || ''}`;
            const reversedHierarchy = components.reverse().map(c => c.name);
            return { 
              name: firstComponent.name, 
              uid,
              hierarchy: reversedHierarchy
            };
          }
        }
      } catch (error) {
        // Silently fall back to legacy detection
      }
    }
    
    for (const key of Object.keys(elem)) {
      if (key.startsWith('__reactInternalInstance$')) {
        const fiberNode = elem[key];
        if (fiberNode) {
          try {
            const components = traverseFiberTree(fiberNode);
            if (components.length > 0) {
              const firstComponent = components[0];
              const reversedHierarchy = components.reverse().map(c => c.name);
              return { 
                name: firstComponent.name,
                uid: `${fiberNode._mountIndex || ''}${fiberNode._mountOrder || ''}`,
                hierarchy: reversedHierarchy
              };
            }
          } catch (error) {
            // Continue to old legacy detection
          }
        }
        
        if (fiberNode && fiberNode._currentElement) {
          const owner = fiberNode._currentElement._owner;
          const fiber = owner && owner._instance;
          if (fiber) {
            const componentName = fiber.constructor.name;
            if (!isHTMLElement(componentName)) {
              return { 
                name: componentName, 
                uid: `${owner._mountIndex || ''}${owner._mountOrder || ''}` 
              };
            }
          }
        } else if (fiberNode) {
          const fiber = fiberNode.return?.stateNode?._reactInternalFiber;
          if (fiber) {
            const componentName = fiber.type?.name || 'Unknown';
            if (componentName !== 'Unknown' && !isHTMLElement(componentName)) {
              return { name: componentName };
            }
          }
        }
      }
    }
    
    const tagName = elem.tagName?.toLowerCase();
    if (tagName && isHTMLElement(tagName)) {
      return { name: tagName };
    }
    
    return {};
  };

  /**
   * Creates a cached function for searching and creating component overlays
   * @returns {Function} Function that creates overlay elements for components
   */
  const searchAndCreateComponentCached = () => {
    // Performance improvements
    const uids = new Set();
    return (elem) => {
      const { name, uid } = getComponentObj(elem);
      
      if (name && name !== 'Unknown') {
        if (uid) {
          if (!uids.has(uid)) {
            uids.add(uid);
            return createElemForComponent(elem, name);
          }
        } else {
          return createElemForComponent(elem, name);
        }
      }
      return null;
    };
  };

  /**
   * Extracts component objects from React fiber tree
   * @param {HTMLElement} elem - DOM element to extract components from
   * @returns {Array} Array of component objects from fiber tree
   */
  const getComponentsFromElement = (elem) => {
    let components = [];
    
    if (window.__REACT_DEVTOOLS_GLOBAL_HOOK__) {
      try {
        const fiberKey = Object.keys(elem).find(key => 
          key.startsWith('__reactFiber$') || key.startsWith('__reactInternalInstance$')
        );
        
        if (fiberKey) {
          const fiber = elem[fiberKey];
          components = traverseFiberTree(fiber);
          // Reverse to get parent -> child order (traversal goes child -> parent)
          components = components.reverse();
        }
      } catch (error) {
        // Silently fall back to legacy detection
      }
    }
    
    if (components.length === 0) {
      for (const key of Object.keys(elem)) {
        if (key.startsWith('__reactInternalInstance$')) {
          const fiberNode = elem[key];
          if (fiberNode) {
            try {
              components = traverseFiberTree(fiberNode);
              // Reverse to get parent -> child order
              components = components.reverse();
              break;
            } catch (error) {
              // Silently continue to next detection method
            }
          }
        }
      }
    }
    
    return components;
  };

  /**
   * Gets component path from DOM traversal (fallback method)
   * @param {HTMLElement} elem - DOM element to start traversal from
   * @returns {Array} Array of component names from DOM traversal
   */
  const getDomPath = (elem) => {
    let currentElem = elem;
    const domPath = [];
    const seenComponentNames = new Set();
    
    while (currentElem && currentElem.parentNode && domPath.length < 20) {
      currentElem = currentElem.parentNode;
      const { name: component } = getComponentObj(currentElem);
      if (component && component !== 'Unknown' && !isHTMLElement(component)) {
        const normalizedName = component.toLowerCase();
        if (!seenComponentNames.has(normalizedName)) {
          seenComponentNames.add(normalizedName);
          domPath.unshift(component);
        }
      }
    }
    
    return domPath;
  };

  /**
   * Builds full component structure path (includes all components)
   * @param {Array} components - Component objects from fiber tree
   * @param {string} currentComponentName - Name of current component
   * @param {HTMLElement} elem - Original DOM element for fallback
   * @returns {string} Full component path structure
   */
  const buildFullStructure = (components, currentComponentName, elem) => {
    if (components.length > 0) {
      const filteredComponents = components.filter(comp => 
        comp.name !== currentComponentName && !isHTMLElement(comp.name)
      );
      
      if (filteredComponents.length > 0) {
        const fullPath = filteredComponents.map(comp => comp.name);
        return [...fullPath, currentComponentName].join(' -> ');
      }
      
      return currentComponentName;
    }
    
    const domPath = getDomPath(elem);
    
    if (domPath.length > 0) {
      return [...domPath, currentComponentName].join(' -> ');
    }
    
    return currentComponentName;
  };

  /**
   * Builds filtered component structure path (only project-owned components)
   * @param {Array} components - Component objects from fiber tree
   * @param {string} currentComponentName - Name of current component
   * @param {HTMLElement} elem - Original DOM element for fallback
   * @returns {string} Filtered component path structure
   */
  const buildFilteredStructure = (components, currentComponentName, elem) => {
    if (components.length > 0) {
      const filteredComponents = components.filter(comp => 
        comp.name !== currentComponentName && !isHTMLElement(comp.name)
      );
      
      const seenComponents = new Set();
      const projectOwnedComponents = [];
      
      for (const comp of filteredComponents) {
        if (!comp.isInternal) {
          continue;
        }

        const normalizedName = comp.name.toLowerCase();
        
        if (comp.file) {
          const normalizedFile = comp.file.toLowerCase();
          const pathParts = normalizedFile.split(/[\/\\]/);
          const filename = pathParts[pathParts.length - 1];
          const filenameWithoutExt = filename.replace(/\.(tsx?|jsx?)$/, '');

          const nameMatchesFile = normalizedFile.includes(`/${normalizedName}`) || 
                                  normalizedFile.includes(`\\${normalizedName}`) ||
                                  normalizedFile.endsWith(`/${normalizedName}.tsx`) ||
                                  normalizedFile.endsWith(`/${normalizedName}.ts`) ||
                                  normalizedFile.endsWith(`/${normalizedName}.jsx`) ||
                                  normalizedFile.endsWith(`/${normalizedName}.js`) ||
                                  normalizedFile.endsWith(`\\${normalizedName}.tsx`) ||
                                  normalizedFile.endsWith(`\\${normalizedName}.ts`) ||
                                  normalizedFile.endsWith(`\\${normalizedName}.jsx`) ||
                                  normalizedFile.endsWith(`\\${normalizedName}.js`) ||
                                  filenameWithoutExt === normalizedName;
          
          // O(1) lookup using pre-built index instead of O(m) spread + some + includes
          const inProjectFilePaths = componentNameToFilesIndex.has(normalizedName);

          if (!nameMatchesFile && !inProjectFilePaths) {
            continue;
          }
          
          // Deduplicate by component identity: use normalized name + normalized file path as unique key
          // This ensures that:
          // 1. The same component (same name, same file) appearing multiple times is only shown once
          //    (e.g., WebAppLayout -> WebAppLayout -> WebAppLayout)
          // 2. Different components with the same name but different files are both shown
          //    (e.g., components_left/Parent.jsx vs components_right/Parent.jsx)
          const normalizedFilePath = normalizePath(comp.file);
          const componentKey = `${normalizedName}:${normalizedFilePath}`;
          
          if (seenComponents.has(componentKey)) {
            continue;
          }
          
          seenComponents.add(componentKey);
          projectOwnedComponents.push(comp);
        } else {
          const componentKey = normalizedName;
          
          if (seenComponents.has(componentKey)) {
            continue;
          }

          seenComponents.add(componentKey);
          projectOwnedComponents.push(comp);
        }
      }

      if (projectOwnedComponents.length > 0) {
        const filteredPath = projectOwnedComponents.map(comp => comp.name);
        const currentNameLower = currentComponentName.toLowerCase();
        const pathContainsCurrent = filteredPath.some(name => name.toLowerCase() === currentNameLower);
        
        let finalPath;
        if (!pathContainsCurrent) {
          finalPath = [...filteredPath, currentComponentName];
        } else {
          finalPath = filteredPath;
        }
        
        // Remove consecutive duplicates of the same components before joining
        finalPath = removeConsecutiveDuplicates(finalPath);
        return finalPath.join(' -> ');
      }
      
      return currentComponentName;
    }
    
    const domPath = getDomPath(elem);
    
    if (domPath.length > 0) {
      const currentNameLower = currentComponentName.toLowerCase();
      const pathContainsCurrent = domPath.some(name => name.toLowerCase() === currentNameLower);
      
      let finalPath;
      if (!pathContainsCurrent) {
        finalPath = [...domPath, currentComponentName];
      } else {
        finalPath = domPath;
      }
      
      // Remove consecutive duplicates of the same components before joining
      finalPath = removeConsecutiveDuplicates(finalPath);
      return finalPath.join(' -> ');
    }
    
    return currentComponentName;
  };

  /**
   * Adds the absolute component path to an overlay element
   * Uses fiber-based hierarchy for accurate React component paths
   * @param {HTMLElement} elem - Original DOM element
   * @param {HTMLElement} xrayReactElem - Overlay element
   */
  const addAbsoluteComponentPath = (elem, xrayReactElem) => {
    const currentComponentName = xrayReactElem.getAttribute('data-xray-react-element-name') || '';
    
    const components = getComponentsFromElement(elem);
    
    const fullStructure = buildFullStructure(components, currentComponentName, elem);
    const filteredStructure = buildFilteredStructure(components, currentComponentName, elem);
    
    xrayReactElem.setAttribute(xrayReactCompPathAttr, fullStructure);
    xrayReactElem.setAttribute(xrayReactFilteredCompPathAttr, filteredStructure);
  };

  /**
   * Handles mouseover events on overlay elements
   * @param {Event} event - Mouseover event
   */
  const onXrayReactMouseover = (event) => {
    const { target } = event;
    if (target.classList.contains(xrayReactElemCN)) {
      const componentsPath = target.getAttribute(xrayReactFilteredCompPathAttr) || 
                             target.getAttribute(xrayReactCompPathAttr) || '';
      const pathElement = document.querySelector('.xray-react-actions-wrapper .components-path');
      if (pathElement) {
        pathElement.innerHTML = componentsPath;
      }
    }
  };


  /**
   * Toggles the xray-react overlay on/off
   */
  const toggleXrayReact = () => {
    const body = document.body;
    
    if (body.classList.contains('xray-react-enabled')) {
      body.classList.remove('xray-react-enabled');
      const xrayReactElementsWrapper = document.querySelector(`.${xrayReactWrapperCN}`);
      const xrayReactActionBar = document.querySelector('.xray-react-action-bar');
      const xrayReactStyleTag = document.querySelector('.xray-react-style-tag');
      const tempElements = document.querySelectorAll('.xray-react-element-temp');
      
      if (xrayReactActionBar) {
        xrayReactActionBar.classList.remove('-simple-mode');
      }
      if (xrayReactElementsWrapper) xrayReactElementsWrapper.remove();
      if (xrayReactActionBar) xrayReactActionBar.remove();
      if (xrayReactStyleTag) xrayReactStyleTag.remove();
      tempElements.forEach(el => el.remove());
      
      body.removeEventListener('mouseover', onXrayReactMouseover);
    } else {
      body.classList.add('xray-react-enabled');

      currentMode = getCurrentMode();

      let styleElement = document.querySelector('.xray-react-style-tag');
      if (!styleElement) {
        styleElement = document.createElement('style');
        styleElement.className = 'xray-react-style-tag';
        styleElement.textContent = css;
        document.head.appendChild(styleElement);
      }
      
      const existingActionBar = document.querySelector('.xray-react-action-bar');
      if (!existingActionBar) {
        body.insertAdjacentHTML('beforeend', actionBar);
      }
      if (currentMode === UI_MODE_SIMPLE && existingActionBar) {
        existingActionBar.classList.add('-simple-mode');
      } else if (currentMode === UI_MODE_SIMPLE && !existingActionBar) {
        setTimeout(() => {
          const actionBar = document.querySelector('.xray-react-action-bar');
          if (actionBar) {
            actionBar.classList.add('-simple-mode');
          }
        }, 0);
      } else if (currentMode !== UI_MODE_SIMPLE && existingActionBar) {
        existingActionBar.classList.remove('-simple-mode');
      }
      const searchInput = document.getElementById('search-component');
      if (searchInput) {
        searchInput.addEventListener('input', handleSearchChange);
      }
      body.addEventListener('mouseover', onXrayReactMouseover);
      
      const existingWrapper = document.querySelector(`.${xrayReactWrapperCN}`);
      if (existingWrapper) {
        existingWrapper.remove();
      }
      
      const xrayReactElementsWrapper = document.createElement('div');
      xrayReactElementsWrapper.className = xrayReactWrapperCN;
      if (currentMode === UI_MODE_SIMPLE) {
        xrayReactElementsWrapper.classList.add('-simple-mode');
      }
      body.append(xrayReactElementsWrapper);
      if (currentMode === UI_MODE_SIMPLE) {
        const actionBar = document.querySelector('.xray-react-action-bar');
        if (actionBar) {
          actionBar.classList.add('-simple-mode');
        }
      }
      const existingLoading = document.querySelectorAll('.xray-react-element-temp');
      existingLoading.forEach(el => el.remove());
      
      const loadingElement = document.createElement('div');
      loadingElement.className = 'xray-react-element xray-react-element-temp';
      loadingElement.style.height = `${window.innerHeight}px`;
      loadingElement.style.width = `${window.innerWidth}px`;
      loadingElement.style.top = `${window.scrollY}px`;
      loadingElement.style.left = `${window.scrollX}px`;
      loadingElement.style.zIndex = '10000';
      loadingElement.innerHTML = '<div class="xray-react-spinner xray-react-element-temp"></div>';
      xrayReactElementsWrapper.appendChild(loadingElement);
      
      // Performance improvements
      const processElementsAsync = () => {
        const xrayReactObjects = [];
        const searchAndCreateComponent = searchAndCreateComponentCached();
        const allElements = Array.from(body.getElementsByTagName('*')).filter(elem => {
          return !elem.classList.contains('xray-react-element-temp') &&
                 !elem.closest('.xray-react-action-bar') &&
                 !elem.closest(`.${xrayReactWrapperCN}`);
        });
        const batchSize = 20;
        let index = 0;
        
        const processBatch = () => {
          const endIndex = Math.min(index + batchSize, allElements.length);
          
          for (let i = index; i < endIndex; i++) {
            const elem = allElements[i];
            const xrayReactObj = searchAndCreateComponent(elem);
            if (xrayReactObj) {
              xrayReactObjects.push(xrayReactObj);
            }
          }
          
          index = endIndex;
          
          if (index < allElements.length) {
            setTimeout(processBatch, 1);
          } else {
            let pathIndex = 0;
            const pathBatchSize = 10;
            
            const processPaths = () => {
              const endIndex = Math.min(pathIndex + pathBatchSize, xrayReactObjects.length);
              
              for (let i = pathIndex; i < endIndex; i++) {
                const { elem, xrayReactElem } = xrayReactObjects[i];
                addAbsoluteComponentPath(elem, xrayReactElem);
              }
              
              pathIndex = endIndex;
              
              if (pathIndex < xrayReactObjects.length) {
                setTimeout(processPaths, 1);
              } else {
                const wrapper = document.querySelector(`.${xrayReactWrapperCN}`);
                if (wrapper) {
                  const tempElements = wrapper.querySelectorAll('.xray-react-element-temp');
                  tempElements.forEach(el => el.remove());
                  wrapper.append(...xrayReactObjects.map(obj => obj.xrayReactElem));
                }
              }
            };
            
            setTimeout(processPaths, 1);
          }
        };
        
        setTimeout(processBatch, 1);
      };
      
      processElementsAsync();
    }
  };

  /**
   * Keydown event handler for xray-react shortcuts
   * Matches xray-rails: Cmd+Shift+X (Mac) / Ctrl+Shift+X (Windows/Linux)
   */
  let keydownHandler = null;
  let isHandlerRegistered = false;

  const createKeydownHandler = () => {
    return (event) => {
      if (event.key === 'Escape') {
        const body = document.body;
        if (body && body.classList.contains('xray-react-enabled')) {
          toggleXrayReact();
          event.preventDefault();
        }
        return;
      }
      
      const isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;
      const isMetaOrCtrl = isMac ? event.metaKey : event.ctrlKey;
      const isShift = event.shiftKey;
      const isX = event.key === 'x' || event.key === 'X' || event.keyCode === 88;
      
      if (isMetaOrCtrl && isShift && isX) {
        toggleXrayReact();
        event.preventDefault();
        event.stopPropagation();
      }
    };
  };

  /**
   * Handles keyboard shortcut to toggle xray-react
   * Ensures the listener is only registered once
   */
  const handleXrayReactToggle = () => {
    if (isHandlerRegistered) {
      return;
    }
    
    if (!keydownHandler) {
      keydownHandler = createKeydownHandler();
    }
    
    document.addEventListener('keydown', keydownHandler, true);
    isHandlerRegistered = true;
  };

  /**
   * Enables xray-react functionality
   */
  const enableXrayReact = () => {
    currentMode = getCurrentMode();

    if (!projectRoot) {
      if (typeof window !== 'undefined' && window.__XRAY_REACT_PROJECT_ROOT__) {
        projectRoot = normalizePath(window.__XRAY_REACT_PROJECT_ROOT__);
      } else {
        setTimeout(() => {
          detectProjectRootFromDOM();
        }, 1000);
      }
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', handleXrayReactToggle);
    } else {
      handleXrayReactToggle();
    }
  };

  // Expose functions globally for client bundle to use
  if (typeof window !== 'undefined') {
    window.xrayReactSetProjectRoot = setProjectRoot;
    window.xrayReactSetUsageMap = setUsageMap;
    window.xrayReactSetImportMap = setImportMap;
    window.xrayReactSetProjectFiles = setProjectFiles;
    window.xrayReactSetMode = setMode;
  }

  enableXrayReact();

})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoieHJheS1yZWFjdC11aS5taW4uanMiLCJzb3VyY2VzIjpbIi4uL3NyYy9jb25zdGFudHMuanMiLCIuLi9zcmMvY3NzLmpzIiwiLi4vc3JjL3BhcnRpYWxzLmpzIiwiLi4vc3JjL3VpLXV0aWxzLmpzIiwiLi4vbGliL3hyYXktcmVhY3QtdWkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHhyYXlSZWFjdEVsZW1DTiA9ICd4cmF5LXJlYWN0LWVsZW1lbnQnO1xuZXhwb3J0IGNvbnN0IHhyYXlSZWFjdFdyYXBwZXJDTiA9ICd4cmF5LXJlYWN0LWVsZW1lbnRzLXdyYXBwZXInO1xuZXhwb3J0IGNvbnN0IHhyYXlSZWFjdENvbXBQYXRoQXR0ciA9ICdkYXRhLXhyYXktcmVhY3QtY29tcG9uZW50cy1wYXRoJztcbmV4cG9ydCBjb25zdCB4cmF5UmVhY3RGaWx0ZXJlZENvbXBQYXRoQXR0ciA9ICdkYXRhLXhyYXktcmVhY3QtZmlsdGVyZWQtY29tcG9uZW50cy1wYXRoJztcbmV4cG9ydCBjb25zdCB6SW5kZXggPSAxMDAwMDtcblxuZXhwb3J0IGNvbnN0IFVJX01PREVfRlVMTCA9ICdmdWxsJztcbmV4cG9ydCBjb25zdCBVSV9NT0RFX1NJTVBMRSA9ICdzaW1wbGUnO1xuZXhwb3J0IGNvbnN0IEFWQUlMQUJMRV9VSV9NT0RFUyA9IFtVSV9NT0RFX0ZVTEwsIFVJX01PREVfU0lNUExFXTtcblxuZXhwb3J0IGNvbnN0IEhUTUxfRUxFTUVOVFMgPSBuZXcgU2V0KFtcbiAgJ2RpdicsICdzcGFuJywgJ2Zvcm0nLCAnYnV0dG9uJywgJ2lucHV0JywgJ2EnLCAnaW1nJywgJ3AnLCAnaDEnLCAnaDInLCAnaDMnLCAnaDQnLCAnaDUnLCAnaDYnLFxuICAndWwnLCAnbGknLCAnb2wnLCAndGFibGUnLCAndHInLCAndGQnLCAndGgnLCAndGhlYWQnLCAndGJvZHknLCAndGZvb3QnLFxuICAnc2VjdGlvbicsICdhcnRpY2xlJywgJ2hlYWRlcicsICdmb290ZXInLCAnbmF2JywgJ21haW4nLCAnYXNpZGUnLFxuICAnbGFiZWwnLCAnc2VsZWN0JywgJ29wdGlvbicsICd0ZXh0YXJlYScsICdmaWVsZHNldCcsICdsZWdlbmQnLFxuICAnYnInLCAnaHInLCAnc3Ryb25nJywgJ2VtJywgJ2InLCAnaScsICd1JywgJ3NtYWxsJywgJ3N1YicsICdzdXAnLFxuICAnZGwnLCAnZHQnLCAnZGQnLCAncHJlJywgJ2NvZGUnLCAnYmxvY2txdW90ZScsICdjaXRlJyxcbiAgJ2NhbnZhcycsICdzdmcnLCAncGF0aCcsICdjaXJjbGUnLCAncmVjdCcsICdsaW5lJywgJ3BvbHlsaW5lJywgJ3BvbHlnb24nLFxuICAnaWZyYW1lJywgJ2VtYmVkJywgJ29iamVjdCcsICd2aWRlbycsICdhdWRpbycsICdzb3VyY2UnLCAndHJhY2snLFxuICAnbWV0YScsICdsaW5rJywgJ3N0eWxlJywgJ3NjcmlwdCcsICdub3NjcmlwdCcsICd0ZW1wbGF0ZSdcbl0pO1xuIiwiZXhwb3J0IGRlZmF1bHQgYFxuICAueHJheS1yZWFjdC1lbmFibGVkIHtcbiAgICBtYXJnaW4tYm90dG9tOiA1MHB4ICFpbXBvcnRhbnQ7XG4gIH1cbiAgLnhyYXktcmVhY3QtZWxlbWVudHMtd3JhcHBlciB7XG4gICAgYm90dG9tOiAwO1xuICAgIGZvbnQtZmFtaWx5OiBcIlNlZ29lIFVJXCIsIFJvYm90bywgXCJIZWx2ZXRpY2EgTmV1ZVwiLCBBcmlhbCwgc2Fucy1zZXJpZjtcbiAgICBmb250LXN0eWxlOiBub3JtYWw7XG4gICAgbGVmdDogMDtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgcmlnaHQ6IDA7XG4gICAgdG9wOiAwO1xuICB9XG4gIC54cmF5LXJlYWN0LWVsZW1lbnQge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMjU1LCAwLjI1KTtcbiAgICBib3JkZXI6IDJweCBzb2xpZCBibHVlO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIH1cbiAgLnhyYXktcmVhY3QtZWxlbWVudDo6YmVmb3JlIHtcbiAgICBhbGlnbi1zZWxmOiBjZW50ZXI7XG4gICAgY29sb3I6IHdoaXRlO1xuICAgIGNvbnRlbnQ6IGF0dHIoZGF0YS14cmF5LXJlYWN0LWVsZW1lbnQtbmFtZSk7XG4gICAgZGlzcGxheTogdGFibGU7XG4gICAgZm9udC1zaXplOiAxOHB4O1xuICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG4gICAgbGVmdDogNTAlO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICByaWdodDogMDtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgdG9wOiA1MCU7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XG4gIH1cbiAgLnhyYXktcmVhY3QtZWxlbWVudDo6YWZ0ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6IGRhcmtibHVlO1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgICBjb250ZW50OiBhdHRyKGRhdGEteHJheS1yZWFjdC1lbGVtZW50LW5hbWUpO1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICBmb250LXNpemU6IDEwcHg7XG4gICAgbGVmdDogMDtcbiAgICBwYWRkaW5nOiAwIDVweDtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICB9XG4gIC54cmF5LXJlYWN0LWVsZW1lbnQ6aG92ZXIsXG4gIC54cmF5LXJlYWN0LWVsZW1lbnQuLWhpZ2hsaWdodGVkIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDI1NSwgMC43NSk7XG4gICAgYm9yZGVyLWNvbG9yOiBjeWFuO1xuICB9XG4gIC54cmF5LXJlYWN0LWVsZW1lbnQ6aG92ZXI6OmJlZm9yZSxcbiAgLnhyYXktcmVhY3QtZWxlbWVudC4taGlnaGxpZ2h0ZWQ6OmJlZm9yZSB7XG4gICAgY29sb3I6IGN5YW47XG4gIH1cbiAgLnhyYXktcmVhY3QtZWxlbWVudDpob3Zlcjo6YWZ0ZXIsXG4gIC54cmF5LXJlYWN0LWVsZW1lbnQuLWhpZ2hsaWdodGVkOjphZnRlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogY3lhbjtcbiAgICBjb2xvcjogZGFya2JsdWU7XG4gIH1cbiAgLnhyYXktcmVhY3QtZWxlbWVudC4taGlnaGxpZ2h0ZWQge1xuICAgIHotaW5kZXg6IDk5OTk5ICFpbXBvcnRhbnQ7XG4gIH1cbiAgLnhyYXktcmVhY3QtYWN0aW9uLWJhciB7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBkYXJrYmx1ZTtcbiAgICBib3R0b206IDA7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIG1heC1oZWlnaHQ6IDEwMHB4O1xuICAgIG1pbi1oZWlnaHQ6IDUwcHg7XG4gICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICBwYWRkaW5nOiAwIDEwcHg7XG4gICAgcG9zaXRpb246IGZpeGVkO1xuICAgIHdpZHRoOiAxMDB2dztcbiAgICB6LWluZGV4OiA5OTk5OTk7XG4gIH1cbiAgLnhyYXktcmVhY3QtYWN0aW9uLWJhcjo6LXdlYmtpdC1zY3JvbGxiYXIge1xuICAgIHdpZHRoOiA4cHg7XG4gIH1cbiAgLnhyYXktcmVhY3QtYWN0aW9uLWJhcjo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2sge1xuICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTtcbiAgfVxuICAueHJheS1yZWFjdC1hY3Rpb24tYmFyOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7XG4gICAgYmFja2dyb3VuZDogY3lhbjtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gIH1cbiAgLnhyYXktcmVhY3QtYWN0aW9uLWJhcjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWI6aG92ZXIge1xuICAgIGJhY2tncm91bmQ6ICMwMGZmZmY7XG4gIH1cbiAgLnhyYXktcmVhY3QtYWN0aW9ucy13cmFwcGVyIHtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZm9udC1mYW1pbHk6IFwiU2Vnb2UgVUlcIiwgUm9ib3RvLCBcIkhlbHZldGljYSBOZXVlXCIsIEFyaWFsLCBzYW5zLXNlcmlmO1xuICAgIGZvbnQtc3R5bGU6IG5vcm1hbDtcbiAgICBtaW4taGVpZ2h0OiA1MHB4O1xuICAgIHBhZGRpbmc6IDVweCAwO1xuICAgIHBvc2l0aW9uOiBzdGlja3k7XG4gICAgdG9wOiAwO1xuICAgIHdpZHRoOiAxMDAlO1xuICB9XG4gICNzZWFyY2gtY29tcG9uZW50IHtcbiAgICBhbGlnbi1zZWxmOiBjZW50ZXI7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogbGlnaHRncmF5O1xuICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICBib3JkZXI6IDA7XG4gICAgZmxleC1zaHJpbms6IDA7XG4gICAgZm9udC1zaXplOiAxNHB4O1xuICAgIGhlaWdodDogMzBweDtcbiAgICBsaW5lLWhlaWdodDogMjBweDtcbiAgICBtYXJnaW4tcmlnaHQ6IDE1cHg7XG4gICAgbWluLXdpZHRoOiAyMDBweDtcbiAgICBvdXRsaW5lOiAwO1xuICAgIHBhZGRpbmc6IDVweCAxMHB4O1xuICAgIHdpZHRoOiAyNSU7XG4gIH1cbiAgLmNvbXBvbmVudHMtcGF0aCB7XG4gICAgY29sb3I6IGN5YW47XG4gICAgZmxleDogMTtcbiAgICBmb250LXNpemU6IDExcHg7XG4gICAgbGluZS1oZWlnaHQ6IDEuNDtcbiAgICBtaW4td2lkdGg6IDA7XG4gICAgb3ZlcmZsb3cteDogYXV0bztcbiAgICBvdmVyZmxvdy15OiB2aXNpYmxlO1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgd29yZC1icmVhazoga2VlcC1hbGw7XG4gIH1cbiAgLmNvbXBvbmVudHMtcGF0aDo6LXdlYmtpdC1zY3JvbGxiYXIge1xuICAgIGhlaWdodDogNHB4O1xuICB9XG4gIC5jb21wb25lbnRzLXBhdGg6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHtcbiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7XG4gIH1cbiAgLmNvbXBvbmVudHMtcGF0aDo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIge1xuICAgIGJhY2tncm91bmQ6IGN5YW47XG4gICAgYm9yZGVyLXJhZGl1czogMnB4O1xuICB9XG4gIC5jb21wb25lbnRzLXBhdGg6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiAjMDBmZmZmO1xuICB9XG4gIC54cmF5LXJlYWN0LWVsZW1lbnQtdGVtcCB7XG4gICAgZGlzcGxheTogZmxleCAhaW1wb3J0YW50O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXIgIWltcG9ydGFudDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlciAhaW1wb3J0YW50O1xuICB9XG4gIC54cmF5LXJlYWN0LWVsZW1lbnQtdGVtcDo6YmVmb3JlIHtcbiAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG4gIH1cbiAgLnhyYXktcmVhY3QtZWxlbWVudC10ZW1wOjphZnRlciB7XG4gICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xuICB9XG4gIC54cmF5LXJlYWN0LXNwaW5uZXIge1xuICAgIHdpZHRoOiA1MHB4O1xuICAgIGhlaWdodDogNTBweDtcbiAgICBib3JkZXI6IDRweCBzb2xpZCByZ2JhKDAsIDI1NSwgMjU1LCAwLjMpO1xuICAgIGJvcmRlci10b3AtY29sb3I6IGN5YW47XG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgIGFuaW1hdGlvbjogeHJheS1yZWFjdC1zcGluIDFzIGxpbmVhciBpbmZpbml0ZTtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgei1pbmRleDogMTtcbiAgfVxuICBAa2V5ZnJhbWVzIHhyYXktcmVhY3Qtc3BpbiB7XG4gICAgdG8geyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB9XG4gIH1cbiAgLyogU2ltcGxlIG1vZGUgc3R5bGVzICovXG4gIC54cmF5LXJlYWN0LWVsZW1lbnRzLXdyYXBwZXIuLXNpbXBsZS1tb2RlIHtcbiAgICBib3JkZXI6IDJweCBzb2xpZCBibHVlO1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIH1cbiAgLnhyYXktcmVhY3QtZWxlbWVudHMtd3JhcHBlci4tc2ltcGxlLW1vZGUgLnhyYXktcmVhY3QtZWxlbWVudCB7XG4gICAgb3BhY2l0eTogMDtcbiAgICBwb2ludGVyLWV2ZW50czogYXV0bztcbiAgfVxuICAueHJheS1yZWFjdC1lbGVtZW50cy13cmFwcGVyLi1zaW1wbGUtbW9kZSAueHJheS1yZWFjdC1lbGVtZW50OmhvdmVyIHtcbiAgICBvcGFjaXR5OiAxO1xuICB9XG4gIC54cmF5LXJlYWN0LWFjdGlvbi1iYXIuLXNpbXBsZS1tb2RlICNzZWFyY2gtY29tcG9uZW50IHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG5gO1xuIiwiaW1wb3J0IGNzcyBmcm9tICcuL2Nzcy5qcyc7XG5cbmV4cG9ydCBjb25zdCBzdHlsZVRhZyA9IGA8c3R5bGUgY2xhc3M9XCJ4cmF5LXJlYWN0LXN0eWxlLXRhZ1wiPiR7Y3NzfTwvc3R5bGU+YDtcbmV4cG9ydCBjb25zdCBhY3Rpb25CYXIgPSBgXG4gIDxkaXYgY2xhc3M9XCJ4cmF5LXJlYWN0LWFjdGlvbi1iYXJcIj5cbiAgICA8ZGl2IGNsYXNzPVwieHJheS1yZWFjdC1hY3Rpb25zLXdyYXBwZXJcIj5cbiAgICAgIDxpbnB1dCBpZD1cInNlYXJjaC1jb21wb25lbnRcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiU2VhcmNoIGNvbXBvbmVudCBieSBuYW1lLi4uXCIvPlxuICAgICAgPGRpdiBjbGFzcz1cImNvbXBvbmVudHMtcGF0aFwiPjwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbmA7XG4iLCJpbXBvcnQgKiBhcyBjb25zdGFudHMgZnJvbSAnLi9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgc3R5bGVUYWcsIGFjdGlvbkJhciB9IGZyb20gJy4vcGFydGlhbHMuanMnO1xuaW1wb3J0IGNzcyBmcm9tICcuL2Nzcy5qcyc7XG5pbXBvcnQgeyBVSV9NT0RFX0ZVTEwsIFVJX01PREVfU0lNUExFLCBBVkFJTEFCTEVfVUlfTU9ERVMgfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5cbmNvbnN0IE1BWF9GSUJFUl9ERVBUSCA9IDUwOyAvLyBQcmV2ZW50IGluZmluaXRlIGxvb3BzXG5cbmxldCBwcm9qZWN0Um9vdCA9IG51bGw7XG5sZXQgdXNhZ2VNYXAgPSB7fTtcbmxldCBpbXBvcnRNYXAgPSB7fTtcbmxldCBwcm9qZWN0RmlsZVBhdGhzID0gbmV3IFNldCgpO1xubGV0IG5vcm1hbGl6ZWRQcm9qZWN0RmlsZVBhdGhzID0gbmV3IFNldCgpOyAgICAgICAgICAgLy8gUHJlLW5vcm1hbGl6ZWQgcGF0aHMgZm9yIE8oMSkgbG9va3VwXG5sZXQgY29tcG9uZW50TmFtZVRvRmlsZXNJbmRleCA9IG5ldyBNYXAoKTsgICAgICAgICAgICAvLyBjb21wb25lbnROYW1lIC0+IFNldDxmaWxlUGF0aD4gZm9yIE8oMSkgbG9va3VwXG5jb25zdCBub3JtYWxpemVQYXRoQ2FjaGUgPSBuZXcgTWFwKCk7ICAgICAgICAgICAgICAgICAvLyBNZW1vaXphdGlvbiBjYWNoZSBmb3Igbm9ybWFsaXplUGF0aFxubGV0IGN1cnJlbnRNb2RlID0gVUlfTU9ERV9GVUxMO1xuXG5jb25zdCBFWFRFUk5BTF9QQVRURVJOUyA9IFtcbiAgL25vZGVfbW9kdWxlcy9pLFxuICAvXFwubmV4dFtcXC9cXFxcXS9pLFxuICAvZGlzdFtcXC9cXFxcXS9pLFxuICAvYnVpbGRbXFwvXFxcXF0vaSxcbiAgL1xcLmdpdFtcXC9cXFxcXS9pLFxuICAvXFwuY2FjaGVbXFwvXFxcXF0vaSxcbiAgL2NvdmVyYWdlW1xcL1xcXFxdL2ksXG5dO1xuXG4vKipcbiAqIE5vcm1hbGl6ZXMgYSBmaWxlIHBhdGggZm9yIGNvbXBhcmlzb25cbiAqIEhhbmRsZXMgYm90aCBVbml4IGFuZCBXaW5kb3dzIHBhdGhzLCByZWxhdGl2ZSBhbmQgYWJzb2x1dGVcbiAqIFVzZXMgbWVtb2l6YXRpb24gY2FjaGUgZm9yIHJlcGVhdGVkIGNhbGxzIHdpdGggc2FtZSBwYXRoXG4gKiBAcGFyYW0ge3N0cmluZ30gZmlsZVBhdGggLSBGaWxlIHBhdGggdG8gbm9ybWFsaXplXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBOb3JtYWxpemVkIHBhdGhcbiAqL1xuY29uc3Qgbm9ybWFsaXplUGF0aCA9IChmaWxlUGF0aCkgPT4ge1xuICBpZiAoIWZpbGVQYXRoKSByZXR1cm4gJyc7XG4gIFxuICBjb25zdCBjYWNoZWQgPSBub3JtYWxpemVQYXRoQ2FjaGUuZ2V0KGZpbGVQYXRoKTtcbiAgaWYgKGNhY2hlZCAhPT0gdW5kZWZpbmVkKSByZXR1cm4gY2FjaGVkO1xuICBcbiAgbGV0IG5vcm1hbGl6ZWQgPSBTdHJpbmcoZmlsZVBhdGgpLnJlcGxhY2UoL1xcXFwvZywgJy8nKTtcbiAgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZWQucmVwbGFjZSgvXlxcLyt8XFwvKyQvZywgJycpO1xuICBub3JtYWxpemVkID0gbm9ybWFsaXplZC50b0xvd2VyQ2FzZSgpO1xuICBcbiAgbm9ybWFsaXplUGF0aENhY2hlLnNldChmaWxlUGF0aCwgbm9ybWFsaXplZCk7XG4gIHJldHVybiBub3JtYWxpemVkO1xufTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYSBmaWxlIHBhdGggaXMgZXh0ZXJuYWwgKG5vZGVfbW9kdWxlcywgYnVpbGQgYXJ0aWZhY3RzLCBldGMuKVxuICogQHBhcmFtIHtzdHJpbmd9IGZpbGVQYXRoIC0gRmlsZSBwYXRoIHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBwYXRoIGlzIGV4dGVybmFsXG4gKi9cbmNvbnN0IGlzRXh0ZXJuYWxQYXRoID0gKGZpbGVQYXRoKSA9PiB7XG4gIGlmICghZmlsZVBhdGgpIHJldHVybiBmYWxzZTtcbiAgXG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVQYXRoKGZpbGVQYXRoKTtcbiAgXG4gIHJldHVybiBFWFRFUk5BTF9QQVRURVJOUy5zb21lKHBhdHRlcm4gPT4gcGF0dGVybi50ZXN0KG5vcm1hbGl6ZWQpKTtcbn07XG5cbi8qKlxuICogRGV0ZWN0cyBwcm9qZWN0IHJvb3QgZnJvbSBhIGZpbGUgcGF0aCBieSBmaW5kaW5nIGNvbW1vbiBiYXNlIHBhdGhcbiAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gZmlsZVBhdGhzIC0gQXJyYXkgb2YgZmlsZSBwYXRocyBmcm9tIGZpYmVyc1xuICogQHJldHVybnMge3N0cmluZ3xudWxsfSBEZXRlY3RlZCBwcm9qZWN0IHJvb3Qgb3IgbnVsbFxuICovXG5jb25zdCBkZXRlY3RQcm9qZWN0Um9vdEZyb21QYXRocyA9IChmaWxlUGF0aHMpID0+IHtcbiAgaWYgKCFmaWxlUGF0aHMgfHwgZmlsZVBhdGhzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XG4gIFxuICBjb25zdCBwcm9qZWN0UGF0aHMgPSBmaWxlUGF0aHNcbiAgICAuZmlsdGVyKHBhdGggPT4gcGF0aCAmJiAhaXNFeHRlcm5hbFBhdGgocGF0aCkpXG4gICAgLm1hcChub3JtYWxpemVQYXRoKTtcbiAgXG4gIGlmIChwcm9qZWN0UGF0aHMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcbiAgXG4gIGNvbnN0IHBhdGhQYXJ0cyA9IHByb2plY3RQYXRocy5tYXAocGF0aCA9PiBwYXRoLnNwbGl0KCcvJykpO1xuICBjb25zdCBtaW5MZW5ndGggPSBNYXRoLm1pbiguLi5wYXRoUGFydHMubWFwKHBhcnRzID0+IHBhcnRzLmxlbmd0aCkpO1xuICBcbiAgbGV0IGNvbW1vblBhcnRzID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbWluTGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBwYXJ0ID0gcGF0aFBhcnRzWzBdW2ldO1xuICAgIGlmIChwYXRoUGFydHMuZXZlcnkocGFydHMgPT4gcGFydHNbaV0gPT09IHBhcnQpKSB7XG4gICAgICBjb21tb25QYXJ0cy5wdXNoKHBhcnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgXG4gIGlmIChjb21tb25QYXJ0cy5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuICcvJyArIGNvbW1vblBhcnRzLmpvaW4oJy8nKTtcbiAgfVxuICBcbiAgY29uc3QgZmlyc3RQYXRoID0gcHJvamVjdFBhdGhzWzBdO1xuICBjb25zdCBsYXN0U2xhc2ggPSBmaXJzdFBhdGgubGFzdEluZGV4T2YoJy8nKTtcbiAgaWYgKGxhc3RTbGFzaCA+IDApIHtcbiAgICByZXR1cm4gJy8nICsgZmlyc3RQYXRoLnN1YnN0cmluZygwLCBsYXN0U2xhc2gpO1xuICB9XG4gIFxuICByZXR1cm4gbnVsbDtcbn07XG5cbi8qKlxuICogUmVtb3ZlcyBjb25zZWN1dGl2ZSBkdXBsaWNhdGUgY29tcG9uZW50IG5hbWVzIGZyb20gYW4gYXJyYXlcbiAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gcGF0aCAtIEFycmF5IG9mIGNvbXBvbmVudCBuYW1lc1xuICogQHJldHVybnMge0FycmF5PHN0cmluZz59IEFycmF5IHdpdGggY29uc2VjdXRpdmUgZHVwbGljYXRlcyByZW1vdmVkXG4gKi9cbmNvbnN0IHJlbW92ZUNvbnNlY3V0aXZlRHVwbGljYXRlcyA9IChwYXRoKSA9PiB7XG4gIGlmIChwYXRoLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHBhdGg7XG4gIFxuICBjb25zdCByZXN1bHQgPSBbcGF0aFswXV07XG4gIGZvciAobGV0IGkgPSAxOyBpIDwgcGF0aC5sZW5ndGg7IGkrKykge1xuICAgIGlmIChwYXRoW2ldLnRvTG93ZXJDYXNlKCkgIT09IHBhdGhbaSAtIDFdLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIHJlc3VsdC5wdXNoKHBhdGhbaV0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLyoqXG4gKiBIYW5kbGVzIHNlYXJjaCBpbnB1dCBjaGFuZ2VzIHRvIGhpZ2hsaWdodCBtYXRjaGluZyBjb21wb25lbnRzXG4gKiBAcGFyYW0ge0V2ZW50fSBldmVudCAtIElucHV0IGV2ZW50XG4gKi9cbmNvbnN0IGhhbmRsZVNlYXJjaENoYW5nZSA9IChldmVudCkgPT4ge1xuICBjb25zdCB2YWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZS50b0xvd2VyQ2FzZSgpO1xuICBjb25zdCByZWdFeHAgPSBuZXcgUmVnRXhwKGBeJHt2YWx1ZX18JHt2YWx1ZX0kYCk7XG4gIGNvbnN0IGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgLiR7Y29uc3RhbnRzLnhyYXlSZWFjdEVsZW1DTn1gKTtcbiAgXG4gIGZvciAoY29uc3QgZWxlbSBvZiBlbGVtZW50cykge1xuICAgIGlmICh2YWx1ZS5sZW5ndGggPj0gMikge1xuICAgICAgY29uc3Qgc2VhcmNoTmFtZSA9IGVsZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXhyYXktcmVhY3QtZWxlbWVudC1zZWFyY2gtbmFtZScpO1xuICAgICAgaWYgKHNlYXJjaE5hbWUgJiYgc2VhcmNoTmFtZS5tYXRjaChyZWdFeHApKSB7XG4gICAgZWxlbS5jbGFzc0xpc3QuYWRkKCctaGlnaGxpZ2h0ZWQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnLWhpZ2hsaWdodGVkJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnLWhpZ2hsaWdodGVkJyk7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIEdldHMgdGhlIGN1cnJlbnQgbW9kZSBmcm9tIHdpbmRvdyBvciBkZWZhdWx0cyB0byBVSV9NT0RFX0ZVTExcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEN1cnJlbnQgbW9kZSAoVUlfTU9ERV9GVUxMIG9yIFVJX01PREVfU0lNUExFKVxuICovXG5jb25zdCBnZXRDdXJyZW50TW9kZSA9ICgpID0+IHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5fX1hSQVlfUkVBQ1RfTU9ERV9fKSB7XG4gICAgY29uc3QgbW9kZSA9IHdpbmRvdy5fX1hSQVlfUkVBQ1RfTU9ERV9fO1xuICAgIHJldHVybiBBVkFJTEFCTEVfVUlfTU9ERVMuaW5jbHVkZXMobW9kZSkgPyBtb2RlIDogVUlfTU9ERV9GVUxMO1xuICB9XG4gIHJldHVybiBVSV9NT0RFX0ZVTEw7XG59O1xuXG4vKipcbiAqIFNldHMgdGhlIGN1cnJlbnQgbW9kZVxuICogQHBhcmFtIHtzdHJpbmd9IG1vZGUgLSBNb2RlIHRvIHNldCAoVUlfTU9ERV9GVUxMIG9yIFVJX01PREVfU0lNUExFKVxuICovXG5leHBvcnQgY29uc3Qgc2V0TW9kZSA9IChtb2RlKSA9PiB7XG4gIGN1cnJlbnRNb2RlID0gQVZBSUxBQkxFX1VJX01PREVTLmluY2x1ZGVzKG1vZGUpID8gbW9kZSA6IFVJX01PREVfRlVMTDtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgd2luZG93Ll9fWFJBWV9SRUFDVF9NT0RFX18gPSBjdXJyZW50TW9kZTtcbiAgfVxufTtcblxuLyoqXG4gKiBHZXRzIHRoZSBjdXJyZW50IG1vZGVcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEN1cnJlbnQgbW9kZVxuICovXG5leHBvcnQgY29uc3QgZ2V0TW9kZSA9ICgpID0+IHtcbiAgcmV0dXJuIGN1cnJlbnRNb2RlO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIG92ZXJsYXkgZWxlbWVudCBmb3IgYSBSZWFjdCBjb21wb25lbnRcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW0gLSBUaGUgRE9NIGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb21wb25lbnROYW1lIC0gTmFtZSBvZiB0aGUgUmVhY3QgY29tcG9uZW50XG4gKiBAcmV0dXJucyB7T2JqZWN0fSBPYmplY3QgY29udGFpbmluZyBvcmlnaW5hbCBlbGVtZW50IGFuZCBvdmVybGF5IGVsZW1lbnRcbiAqL1xuY29uc3QgY3JlYXRlRWxlbUZvckNvbXBvbmVudCA9IChlbGVtLCBjb21wb25lbnROYW1lKSA9PiB7XG4gIGNvbnN0IHhyYXlSZWFjdEVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY29uc3QgYm91bmRpbmdDbGllbnRSZWN0ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgXG4gIHhyYXlSZWFjdEVsZW0uY2xhc3NOYW1lID0gY29uc3RhbnRzLnhyYXlSZWFjdEVsZW1DTjtcbiAgeHJheVJlYWN0RWxlbS5zZXRBdHRyaWJ1dGUoJ2RhdGEteHJheS1yZWFjdC1lbGVtZW50LW5hbWUnLCBjb21wb25lbnROYW1lKTtcbiAgeHJheVJlYWN0RWxlbS5zZXRBdHRyaWJ1dGUoJ2RhdGEteHJheS1yZWFjdC1lbGVtZW50LXNlYXJjaC1uYW1lJywgY29tcG9uZW50TmFtZS50b0xvd2VyQ2FzZSgpKTtcbiAgeHJheVJlYWN0RWxlbS5zdHlsZS5oZWlnaHQgPSBgJHtib3VuZGluZ0NsaWVudFJlY3QuaGVpZ2h0fXB4YDtcbiAgeHJheVJlYWN0RWxlbS5zdHlsZS53aWR0aCA9IGAke2JvdW5kaW5nQ2xpZW50UmVjdC53aWR0aH1weGA7XG4gIHhyYXlSZWFjdEVsZW0uc3R5bGUudG9wID0gYCR7Ym91bmRpbmdDbGllbnRSZWN0LnRvcCArIHdpbmRvdy5zY3JvbGxZfXB4YDtcbiAgeHJheVJlYWN0RWxlbS5zdHlsZS5sZWZ0ID0gYCR7Ym91bmRpbmdDbGllbnRSZWN0LmxlZnQgKyB3aW5kb3cuc2Nyb2xsWH1weGA7XG4gIHhyYXlSZWFjdEVsZW0uc3R5bGUuekluZGV4ID0gY29uc3RhbnRzLnpJbmRleDtcbiAgXG4gIHJldHVybiB7IGVsZW0sIHhyYXlSZWFjdEVsZW0gfTtcbn07XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgbmFtZSBpcyBhbiBIVE1MIGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gQ29tcG9uZW50IG9yIGVsZW1lbnQgbmFtZVxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgaXQncyBhbiBIVE1MIGVsZW1lbnRcbiAqL1xuY29uc3QgaXNIVE1MRWxlbWVudCA9IChuYW1lKSA9PiB7XG4gIGlmICghbmFtZSB8fCB0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIGNvbnN0YW50cy5IVE1MX0VMRU1FTlRTLmhhcyhuYW1lLnRvTG93ZXJDYXNlKCkpO1xufTtcblxuLyoqXG4gKiBSZXNvbHZlcyBjb21wb25lbnQgbmFtZSBmcm9tIGVsZW1lbnQgdHlwZSBhbmQgZmliZXJcbiAqIEhhbmRsZXMgZnVuY3Rpb24gY29tcG9uZW50cywgY2xhc3MgY29tcG9uZW50cywgZm9yd2FyZFJlZiwgbWVtbywgZXRjLlxuICogQHBhcmFtIHsqfSBlbGVtZW50VHlwZSAtIFJlYWN0IGVsZW1lbnQgdHlwZVxuICogQHBhcmFtIHtPYmplY3R9IGZpYmVyIC0gUmVhY3QgZmliZXIgbm9kZVxuICogQHJldHVybnMge3N0cmluZ3xudWxsfSBDb21wb25lbnQgbmFtZSBvciBudWxsXG4gKi9cbmNvbnN0IHJlc29sdmVDb21wb25lbnROYW1lID0gKGVsZW1lbnRUeXBlLCBmaWJlciA9IG51bGwpID0+IHtcbiAgaWYgKCFlbGVtZW50VHlwZSkgcmV0dXJuIG51bGw7XG5cbiAgaWYgKHR5cGVvZiBlbGVtZW50VHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGlmIChlbGVtZW50VHlwZS5kaXNwbGF5TmFtZSkge1xuICAgICAgcmV0dXJuIGVsZW1lbnRUeXBlLmRpc3BsYXlOYW1lO1xuICAgIH1cbiAgICBcbiAgICBpZiAoZWxlbWVudFR5cGUubmFtZSAmJiBlbGVtZW50VHlwZS5uYW1lICE9PSAnQW5vbnltb3VzJykge1xuICAgICAgcmV0dXJuIGVsZW1lbnRUeXBlLm5hbWU7XG4gICAgfVxuICAgIFxuICAgIGlmIChlbGVtZW50VHlwZS5yZW5kZXIpIHtcbiAgICAgIHJldHVybiByZXNvbHZlQ29tcG9uZW50TmFtZShlbGVtZW50VHlwZS5yZW5kZXIsIGZpYmVyKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGVsZW1lbnRUeXBlLiQkdHlwZW9mICYmIGVsZW1lbnRUeXBlLnR5cGUpIHtcbiAgICAgIHJldHVybiByZXNvbHZlQ29tcG9uZW50TmFtZShlbGVtZW50VHlwZS50eXBlLCBmaWJlcik7XG4gICAgfVxuICB9XG4gIFxuICBpZiAodHlwZW9mIGVsZW1lbnRUeXBlID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBlbGVtZW50VHlwZTtcbiAgfVxuICBcbiAgaWYgKGVsZW1lbnRUeXBlICYmIGVsZW1lbnRUeXBlLiQkdHlwZW9mKSB7XG4gICAgaWYgKGVsZW1lbnRUeXBlLnR5cGUpIHtcbiAgICAgIHJldHVybiByZXNvbHZlQ29tcG9uZW50TmFtZShlbGVtZW50VHlwZS50eXBlLCBmaWJlcik7XG4gICAgfVxuICB9XG4gIFxuICBpZiAoZmliZXIgJiYgZmliZXIuX2RlYnVnU291cmNlKSB7XG4gICAgY29uc3QgZmlsZU5hbWUgPSBmaWJlci5fZGVidWdTb3VyY2UuZmlsZU5hbWU7XG4gICAgaWYgKGZpbGVOYW1lKSB7XG4gICAgICBjb25zdCBtYXRjaCA9IGZpbGVOYW1lLm1hdGNoKC8oW14vXFxcXF0rKVxcLihqc3g/fHRzeD8pJC8pO1xuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIHJldHVybiBtYXRjaFsxXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiBudWxsO1xufTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYSBjb21wb25lbnQgYmVsb25ncyB0byB0aGUgcHJvamVjdCBiYXNlZCBvbiBpdHMgc291cmNlIGZpbGUgcGF0aFxuICogQHBhcmFtIHtPYmplY3R9IGZpYmVyIC0gUmVhY3QgZmliZXIgbm9kZVxuICogQHBhcmFtIHtzdHJpbmd9IHByb2plY3RSb290UGF0aCAtIFByb2plY3Qgcm9vdCBwYXRoIGZvciBjb21wYXJpc29uXG4gKiBAcGFyYW0ge3N0cmluZ30gY29tcG9uZW50TmFtZSAtIE9wdGlvbmFsIGNvbXBvbmVudCBuYW1lIHRvIGNoZWNrIGFnYWluc3QgcHJvamVjdCBmaWxlc1xuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgY29tcG9uZW50IGJlbG9uZ3MgdG8gcHJvamVjdFxuICovXG5jb25zdCBpc1Byb2plY3RDb21wb25lbnQgPSAoZmliZXIsIHByb2plY3RSb290UGF0aCwgY29tcG9uZW50TmFtZSA9IG51bGwpID0+IHtcbiAgaWYgKCFwcm9qZWN0Um9vdFBhdGgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGNvbnN0IGZpbGVQYXRoID0gZmliZXI/Ll9kZWJ1Z1NvdXJjZT8uZmlsZU5hbWU7XG5cbiAgaWYgKGZpbGVQYXRoKSB7XG4gICAgaWYgKGlzRXh0ZXJuYWxQYXRoKGZpbGVQYXRoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBub3JtYWxpemVkRmlsZVBhdGggPSBub3JtYWxpemVQYXRoKGZpbGVQYXRoKTtcbiAgICBjb25zdCBub3JtYWxpemVkUHJvamVjdFJvb3QgPSBub3JtYWxpemVQYXRoKHByb2plY3RSb290UGF0aCk7XG4gICAgXG4gICAgaWYgKG5vcm1hbGl6ZWRGaWxlUGF0aC5zdGFydHNXaXRoKG5vcm1hbGl6ZWRQcm9qZWN0Um9vdCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICBpZiAoIW5vcm1hbGl6ZWRGaWxlUGF0aC5pbmNsdWRlcygnbm9kZV9tb2R1bGVzJykgJiYgXG4gICAgICAgICFub3JtYWxpemVkRmlsZVBhdGguc3RhcnRzV2l0aCgnLycpICYmXG4gICAgICAgICFub3JtYWxpemVkRmlsZVBhdGgubWF0Y2goL15bYS16XTovaSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgXG4gIGlmIChjb21wb25lbnROYW1lKSB7XG4gICAgY29uc3Qgbm9ybWFsaXplZENvbXBvbmVudE5hbWUgPSBjb21wb25lbnROYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgLy8gTygxKSBsb29rdXAgdXNpbmcgcHJlLWJ1aWx0IGluZGV4IGluc3RlYWQgb2YgTyhtKSBsb29wIHRocm91Z2ggYWxsIGZpbGVzXG4gICAgaWYgKGNvbXBvbmVudE5hbWVUb0ZpbGVzSW5kZXguaGFzKG5vcm1hbGl6ZWRDb21wb25lbnROYW1lKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gZmFsc2U7XG59O1xuXG4vKipcbiAqIFNldHMgdGhlIHByb2plY3Qgcm9vdCBwYXRoIGZvciBmaWx0ZXJpbmdcbiAqIEBwYXJhbSB7c3RyaW5nfSByb290UGF0aCAtIFByb2plY3Qgcm9vdCBwYXRoXG4gKi9cbmV4cG9ydCBjb25zdCBzZXRQcm9qZWN0Um9vdCA9IChyb290UGF0aCkgPT4ge1xuICBwcm9qZWN0Um9vdCA9IHJvb3RQYXRoID8gbm9ybWFsaXplUGF0aChyb290UGF0aCkgOiBudWxsO1xuICBcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5fX1hSQVlfUkVBQ1RfUFJPSkVDVF9ST09UX18gJiYgIXByb2plY3RSb290KSB7XG4gICAgcHJvamVjdFJvb3QgPSBub3JtYWxpemVQYXRoKHdpbmRvdy5fX1hSQVlfUkVBQ1RfUFJPSkVDVF9ST09UX18pO1xuICB9XG59O1xuXG4vKipcbiAqIEdldHMgdGhlIGN1cnJlbnQgcHJvamVjdCByb290IHBhdGhcbiAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gUHJvamVjdCByb290IHBhdGggb3IgbnVsbFxuICovXG5leHBvcnQgY29uc3QgZ2V0UHJvamVjdFJvb3QgPSAoKSA9PiB7XG4gIHJldHVybiBwcm9qZWN0Um9vdDtcbn07XG5cbi8qKlxuICogU2V0cyB0aGUgdXNhZ2UgbWFwIGZvciBmaWx0ZXJpbmcgZXh0ZXJuYWwgY29tcG9uZW50c1xuICogQHBhcmFtIHtPYmplY3R9IG1hcCAtIFVzYWdlIG1hcCAoZmlsZSBwYXRoIC0+IEFycmF5IG9mIGNvbXBvbmVudCBuYW1lcylcbiAqL1xuZXhwb3J0IGNvbnN0IHNldFVzYWdlTWFwID0gKG1hcCkgPT4ge1xuICB1c2FnZU1hcCA9IG1hcCB8fCB7fTtcbiAgXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuX19YUkFZX1JFQUNUX1VTQUdFX01BUF9fICYmIE9iamVjdC5rZXlzKHVzYWdlTWFwKS5sZW5ndGggPT09IDApIHtcbiAgICB1c2FnZU1hcCA9IHdpbmRvdy5fX1hSQVlfUkVBQ1RfVVNBR0VfTUFQX187XG4gIH1cbiAgXG4gIGlmIChwcm9qZWN0RmlsZVBhdGhzLnNpemUgPT09IDApIHtcbiAgICBwcm9qZWN0RmlsZVBhdGhzID0gbmV3IFNldChPYmplY3Qua2V5cyh1c2FnZU1hcCB8fCB7fSkpO1xuICB9IGVsc2Uge1xuICAgIE9iamVjdC5rZXlzKHVzYWdlTWFwIHx8IHt9KS5mb3JFYWNoKGZpbGVQYXRoID0+IHByb2plY3RGaWxlUGF0aHMuYWRkKGZpbGVQYXRoKSk7XG4gIH1cbn07XG5cbi8qKlxuICogU2V0cyB0aGUgaW1wb3J0IG1hcCBmb3IgZmlsdGVyaW5nIGV4dGVybmFsIGNvbXBvbmVudHMgKGZhbGxiYWNrKVxuICogQHBhcmFtIHtPYmplY3R9IG1hcCAtIEltcG9ydCBtYXAgKGZpbGUgcGF0aCAtPiBBcnJheSBvZiBjb21wb25lbnQgbmFtZXMpXG4gKi9cbmV4cG9ydCBjb25zdCBzZXRJbXBvcnRNYXAgPSAobWFwKSA9PiB7XG4gIGltcG9ydE1hcCA9IG1hcCB8fCB7fTtcbiAgXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuX19YUkFZX1JFQUNUX0lNUE9SVF9NQVBfXyAmJiBPYmplY3Qua2V5cyhpbXBvcnRNYXApLmxlbmd0aCA9PT0gMCkge1xuICAgIGltcG9ydE1hcCA9IHdpbmRvdy5fX1hSQVlfUkVBQ1RfSU1QT1JUX01BUF9fO1xuICB9XG4gIFxuICBPYmplY3Qua2V5cyhpbXBvcnRNYXAgfHwge30pLmZvckVhY2goZmlsZVBhdGggPT4gcHJvamVjdEZpbGVQYXRocy5hZGQoZmlsZVBhdGgpKTtcbn07XG5cbi8qKlxuICogU2V0cyB0aGUgbGlzdCBvZiBhbGwgcHJvamVjdCBmaWxlcyBmb3VuZCBpbiBzb3VyY2VQYXRoIGZvbGRlcnNcbiAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gZmlsZXMgLSBBcnJheSBvZiBhbGwgZmlsZSBwYXRocyBmb3VuZCBpbiBzb3VyY2VQYXRoXG4gKi9cbmV4cG9ydCBjb25zdCBzZXRQcm9qZWN0RmlsZXMgPSAoZmlsZXMpID0+IHtcbiAgbGV0IGZpbGVMaXN0ID0gZmlsZXMgfHwgW107XG4gIFxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Ll9fWFJBWV9SRUFDVF9QUk9KRUNUX0ZJTEVTX18gJiYgZmlsZUxpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgY29uc3QgZ2xvYmFsRmlsZXMgPSB3aW5kb3cuX19YUkFZX1JFQUNUX1BST0pFQ1RfRklMRVNfXztcbiAgICBpZiAoQXJyYXkuaXNBcnJheShnbG9iYWxGaWxlcykpIHtcbiAgICAgIGZpbGVMaXN0ID0gWy4uLmdsb2JhbEZpbGVzXTtcbiAgICB9XG4gIH1cbiAgXG4gIHByb2plY3RGaWxlUGF0aHMgPSBuZXcgU2V0KGZpbGVMaXN0KTtcbiAgXG4gIC8vIFByZS1jb21wdXRlIG5vcm1hbGl6ZWQgcGF0aHMgYW5kIGNvbXBvbmVudCBuYW1lIGluZGV4IGZvciBPKDEpIGxvb2t1cHNcbiAgbm9ybWFsaXplZFByb2plY3RGaWxlUGF0aHMuY2xlYXIoKTtcbiAgY29tcG9uZW50TmFtZVRvRmlsZXNJbmRleC5jbGVhcigpO1xuICBcbiAgZm9yIChjb25zdCBmaWxlUGF0aCBvZiBmaWxlTGlzdCkge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVQYXRoKGZpbGVQYXRoKTtcbiAgICBub3JtYWxpemVkUHJvamVjdEZpbGVQYXRocy5hZGQobm9ybWFsaXplZCk7XG4gICAgXG4gICAgY29uc3QgcGF0aFBhcnRzID0gbm9ybWFsaXplZC5zcGxpdCgnLycpO1xuICAgIGNvbnN0IGZpbGVuYW1lID0gcGF0aFBhcnRzW3BhdGhQYXJ0cy5sZW5ndGggLSAxXSB8fCAnJztcbiAgICBjb25zdCBmaWxlbmFtZVdpdGhvdXRFeHQgPSBmaWxlbmFtZS5yZXBsYWNlKC9cXC4odHN4P3xqc3g/KSQvLCAnJyk7XG4gICAgXG4gICAgaWYgKGZpbGVuYW1lV2l0aG91dEV4dCkge1xuICAgICAgaWYgKCFjb21wb25lbnROYW1lVG9GaWxlc0luZGV4LmhhcyhmaWxlbmFtZVdpdGhvdXRFeHQpKSB7XG4gICAgICAgIGNvbXBvbmVudE5hbWVUb0ZpbGVzSW5kZXguc2V0KGZpbGVuYW1lV2l0aG91dEV4dCwgbmV3IFNldCgpKTtcbiAgICAgIH1cbiAgICAgIGNvbXBvbmVudE5hbWVUb0ZpbGVzSW5kZXguZ2V0KGZpbGVuYW1lV2l0aG91dEV4dCkuYWRkKGZpbGVQYXRoKTtcbiAgICB9XG4gICAgXG4gICAgZm9yIChjb25zdCBwYXJ0IG9mIHBhdGhQYXJ0cy5zbGljZSgwLCAtMSkpIHtcbiAgICAgIGlmIChwYXJ0ICYmIHBhcnQubGVuZ3RoID4gMSkge1xuICAgICAgICBpZiAoIWNvbXBvbmVudE5hbWVUb0ZpbGVzSW5kZXguaGFzKHBhcnQpKSB7XG4gICAgICAgICAgY29tcG9uZW50TmFtZVRvRmlsZXNJbmRleC5zZXQocGFydCwgbmV3IFNldCgpKTtcbiAgICAgICAgfVxuICAgICAgICBjb21wb25lbnROYW1lVG9GaWxlc0luZGV4LmdldChwYXJ0KS5hZGQoZmlsZVBhdGgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBBdHRlbXB0cyB0byBkZXRlY3QgcHJvamVjdCByb290IGZyb20gZmliZXIgdHJlZSB3aGVuIHNlcnZlciBpcyBub3QgYXZhaWxhYmxlXG4gKiBTY2FucyBET00gZm9yIFJlYWN0IGZpYmVycyBhbmQgZXh0cmFjdHMgZmlsZSBwYXRocyB0byBpbmZlciBwcm9qZWN0IHJvb3RcbiAqL1xuY29uc3QgZGV0ZWN0UHJvamVjdFJvb3RGcm9tRE9NID0gKCkgPT4ge1xuICBpZiAocHJvamVjdFJvb3QpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgXG4gIHRyeSB7XG4gICAgY29uc3QgZmlsZVBhdGhzID0gW107XG4gICAgY29uc3QgbWF4U2FtcGxlcyA9IDUwOyAvLyBMaW1pdCBzYW1wbGVzIGZvciBwZXJmb3JtYW5jZVxuICAgIGxldCBzYW1wbGVzID0gMDtcbiAgICBcbiAgICBjb25zdCB3YWxrZXIgPSBkb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKFxuICAgICAgZG9jdW1lbnQuYm9keSxcbiAgICAgIE5vZGVGaWx0ZXIuU0hPV19FTEVNRU5ULFxuICAgICAgbnVsbCxcbiAgICAgIGZhbHNlXG4gICAgKTtcbiAgICBcbiAgICBsZXQgbm9kZTtcbiAgICB3aGlsZSAoKG5vZGUgPSB3YWxrZXIubmV4dE5vZGUoKSkgJiYgc2FtcGxlcyA8IG1heFNhbXBsZXMpIHtcbiAgICAgIGNvbnN0IGZpYmVyS2V5ID0gT2JqZWN0LmtleXMobm9kZSkuZmluZChrZXkgPT5cbiAgICAgICAga2V5LnN0YXJ0c1dpdGgoJ19fcmVhY3RGaWJlciQnKSB8fCBrZXkuc3RhcnRzV2l0aCgnX19yZWFjdEludGVybmFsSW5zdGFuY2UkJylcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGlmIChmaWJlcktleSkge1xuICAgICAgICBjb25zdCBmaWJlciA9IG5vZGVbZmliZXJLZXldO1xuICAgICAgICBsZXQgY3VycmVudEZpYmVyID0gZmliZXI7XG4gICAgICAgIGxldCBkZXB0aCA9IDA7XG4gICAgICAgIFxuICAgICAgICB3aGlsZSAoY3VycmVudEZpYmVyICYmIGRlcHRoIDwgMTApIHtcbiAgICAgICAgICBpZiAoY3VycmVudEZpYmVyLl9kZWJ1Z1NvdXJjZSAmJiBjdXJyZW50RmliZXIuX2RlYnVnU291cmNlLmZpbGVOYW1lKSB7XG4gICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGN1cnJlbnRGaWJlci5fZGVidWdTb3VyY2UuZmlsZU5hbWU7XG4gICAgICAgICAgICBpZiAoIWlzRXh0ZXJuYWxQYXRoKGZpbGVQYXRoKSkge1xuICAgICAgICAgICAgICBmaWxlUGF0aHMucHVzaChmaWxlUGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGN1cnJlbnRGaWJlciA9IGN1cnJlbnRGaWJlci5yZXR1cm47XG4gICAgICAgICAgZGVwdGgrKztcbiAgICAgICAgICBzYW1wbGVzKys7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgaWYgKGZpbGVQYXRocy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBkZXRlY3RlZFJvb3QgPSBkZXRlY3RQcm9qZWN0Um9vdEZyb21QYXRocyhmaWxlUGF0aHMpO1xuICAgICAgaWYgKGRldGVjdGVkUm9vdCkge1xuICAgICAgICBwcm9qZWN0Um9vdCA9IGRldGVjdGVkUm9vdDtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gU2lsZW50bHkgZmFpbCAtIHByb2plY3Qgcm9vdCBkZXRlY3Rpb24gaXMgb3B0aW9uYWxcbiAgfVxufTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYW4gZXh0ZXJuYWwgY29tcG9uZW50IGlzIHVzZWQgYnkgYW55IGludGVybmFsIGNvbXBvbmVudCBpbiB0aGUgc2VlbiBsaXN0XG4gKiBDaGVja3MgdXNhZ2UgbWFwIGZpcnN0IChwcmltYXJ5KSwgdGhlbiBpbXBvcnQgbWFwIChmYWxsYmFjaylcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb21wb25lbnROYW1lIC0gRXh0ZXJuYWwgY29tcG9uZW50IG5hbWUgdG8gY2hlY2tcbiAqIEBwYXJhbSB7QXJyYXl9IHNlZW5JbnRlcm5hbENvbXBvbmVudHMgLSBBcnJheSBvZiBpbnRlcm5hbCBjb21wb25lbnRzIHNlZW4gc28gZmFyIGluIHBhdGhcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGNvbXBvbmVudCBpcyB1c2VkIGJ5IGFueSBzZWVuIGludGVybmFsIGNvbXBvbmVudFxuICovXG5jb25zdCBpc1VzZWRCeUludGVybmFsQ29tcG9uZW50cyA9IChjb21wb25lbnROYW1lLCBzZWVuSW50ZXJuYWxDb21wb25lbnRzKSA9PiB7XG4gIGlmICghY29tcG9uZW50TmFtZSB8fCBzZWVuSW50ZXJuYWxDb21wb25lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBcbiAgaWYgKE9iamVjdC5rZXlzKHVzYWdlTWFwKS5sZW5ndGggPT09IDAgJiYgT2JqZWN0LmtleXMoaW1wb3J0TWFwKS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBcbiAgZm9yIChjb25zdCBpbnRlcm5hbENvbXAgb2Ygc2VlbkludGVybmFsQ29tcG9uZW50cykge1xuICAgIGNvbnN0IGZpbGVQYXRoID0gaW50ZXJuYWxDb21wLmZpbGU7XG4gICAgaWYgKCFmaWxlUGF0aCkgY29udGludWU7XG4gICAgXG4gICAgaWYgKHVzYWdlTWFwW2ZpbGVQYXRoXSAmJiBBcnJheS5pc0FycmF5KHVzYWdlTWFwW2ZpbGVQYXRoXSkpIHtcbiAgICAgIGlmICh1c2FnZU1hcFtmaWxlUGF0aF0uaW5jbHVkZXMoY29tcG9uZW50TmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmIChpbXBvcnRNYXBbZmlsZVBhdGhdICYmIEFycmF5LmlzQXJyYXkoaW1wb3J0TWFwW2ZpbGVQYXRoXSkpIHtcbiAgICAgIGlmIChpbXBvcnRNYXBbZmlsZVBhdGhdLmluY2x1ZGVzKGNvbXBvbmVudE5hbWUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLyoqXG4gKiBUcmF2ZXJzZXMgdGhlIGZpYmVyIHRyZWUgdG8gZmluZCBSZWFjdCBjb21wb25lbnRzLCBza2lwcGluZyBIVE1MIGVsZW1lbnRzXG4gKiBGaWx0ZXJzIG91dCBleHRlcm5hbCBsaWJyYXJ5IGNvbXBvbmVudHMgYmFzZWQgb24gdXNhZ2UvaW1wb3J0IG1hcHNcbiAqIEBwYXJhbSB7T2JqZWN0fSBmaWJlciAtIFN0YXJ0aW5nIGZpYmVyIG5vZGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhEZXB0aCAtIE1heGltdW0gZGVwdGggdG8gdHJhdmVyc2VcbiAqIEByZXR1cm5zIHtBcnJheX0gQXJyYXkgb2YgY29tcG9uZW50IGluZm9ybWF0aW9uIG9iamVjdHNcbiAqL1xuY29uc3QgdHJhdmVyc2VGaWJlclRyZWUgPSAoZmliZXIsIG1heERlcHRoID0gTUFYX0ZJQkVSX0RFUFRIKSA9PiB7XG4gIGNvbnN0IGFsbENvbXBvbmVudHMgPSBbXTtcbiAgY29uc3QgaW50ZXJuYWxDb21wb25lbnRzID0gW107XG4gIGxldCBjdXJyZW50RmliZXIgPSBmaWJlcjtcbiAgbGV0IGRlcHRoID0gMDtcbiAgLy8gUGVyZm9ybWFuY2UgaW1wcm92ZW1lbnRzXG4gIGNvbnN0IHZpc2l0ZWQgPSBuZXcgU2V0KCk7XG4gIFxuICB3aGlsZSAoY3VycmVudEZpYmVyICYmIGRlcHRoIDwgbWF4RGVwdGgpIHtcbiAgICBpZiAodmlzaXRlZC5oYXMoY3VycmVudEZpYmVyKSkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHZpc2l0ZWQuYWRkKGN1cnJlbnRGaWJlcik7XG4gICAgXG4gICAgY29uc3QgZWxlbWVudFR5cGUgPSBjdXJyZW50RmliZXIuZWxlbWVudFR5cGUgfHwgY3VycmVudEZpYmVyLnR5cGU7XG4gICAgXG4gICAgaWYgKGVsZW1lbnRUeXBlKSB7XG4gICAgICBjb25zdCBjb21wb25lbnROYW1lID0gcmVzb2x2ZUNvbXBvbmVudE5hbWUoZWxlbWVudFR5cGUsIGN1cnJlbnRGaWJlcik7XG4gICAgICBcbiAgICAgIGlmIChjb21wb25lbnROYW1lKSB7XG4gICAgICAgIGlmICghaXNIVE1MRWxlbWVudChjb21wb25lbnROYW1lKSkge1xuICAgICAgICAgIGNvbnN0IGlzSW50ZXJuYWwgPSBpc1Byb2plY3RDb21wb25lbnQoY3VycmVudEZpYmVyLCBwcm9qZWN0Um9vdCwgY29tcG9uZW50TmFtZSk7XG4gICAgICAgICAgXG4gICAgICAgICAgbGV0IGZpbGVQYXRoID0gbnVsbDtcbiAgICAgICAgICBpZiAoY3VycmVudEZpYmVyLl9kZWJ1Z1NvdXJjZSAmJiBjdXJyZW50RmliZXIuX2RlYnVnU291cmNlLmZpbGVOYW1lKSB7XG4gICAgICAgICAgICBmaWxlUGF0aCA9IGN1cnJlbnRGaWJlci5fZGVidWdTb3VyY2UuZmlsZU5hbWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGFsbENvbXBvbmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBjb21wb25lbnROYW1lLFxuICAgICAgICAgICAgZmliZXI6IGN1cnJlbnRGaWJlcixcbiAgICAgICAgICAgIGVsZW1lbnRUeXBlOiBlbGVtZW50VHlwZSxcbiAgICAgICAgICAgIGRlcHRoOiBkZXB0aCxcbiAgICAgICAgICAgIGlzSW50ZXJuYWw6IGlzSW50ZXJuYWwsXG4gICAgICAgICAgICBmaWxlOiBmaWxlUGF0aFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChpc0ludGVybmFsKSB7XG4gICAgICAgICAgICBpbnRlcm5hbENvbXBvbmVudHMucHVzaCh7XG4gICAgICAgICAgICAgIG5hbWU6IGNvbXBvbmVudE5hbWUsXG4gICAgICAgICAgICAgIGZpbGU6IGZpbGVQYXRoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgY3VycmVudEZpYmVyID0gY3VycmVudEZpYmVyLnJldHVybiB8fCBjdXJyZW50RmliZXIuX293bmVyO1xuICAgIGRlcHRoKys7XG4gIH1cbiAgXG4gIGNvbnN0IGZpbHRlcmVkQ29tcG9uZW50cyA9IFtdO1xuICBmb3IgKGNvbnN0IGNvbXAgb2YgYWxsQ29tcG9uZW50cykge1xuICAgIGlmIChjb21wLmlzSW50ZXJuYWwpIHtcbiAgICAgIGZpbHRlcmVkQ29tcG9uZW50cy5wdXNoKHtcbiAgICAgICAgbmFtZTogY29tcC5uYW1lLFxuICAgICAgICBmaWJlcjogY29tcC5maWJlcixcbiAgICAgICAgZWxlbWVudFR5cGU6IGNvbXAuZWxlbWVudFR5cGUsXG4gICAgICAgIGRlcHRoOiBjb21wLmRlcHRoLFxuICAgICAgICBmaWxlOiBjb21wLmZpbGUsXG4gICAgICAgIGlzSW50ZXJuYWw6IGNvbXAuaXNJbnRlcm5hbFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpc1VzZWRCeUludGVybmFsQ29tcG9uZW50cyhjb21wLm5hbWUsIGludGVybmFsQ29tcG9uZW50cykpIHtcbiAgICAgICAgZmlsdGVyZWRDb21wb25lbnRzLnB1c2goe1xuICAgICAgICAgIG5hbWU6IGNvbXAubmFtZSxcbiAgICAgICAgICBmaWJlcjogY29tcC5maWJlcixcbiAgICAgICAgICBlbGVtZW50VHlwZTogY29tcC5lbGVtZW50VHlwZSxcbiAgICAgICAgICBkZXB0aDogY29tcC5kZXB0aCxcbiAgICAgICAgICBmaWxlOiBjb21wLmZpbGUsXG4gICAgICAgICAgaXNJbnRlcm5hbDogY29tcC5pc0ludGVybmFsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuIGZpbHRlcmVkQ29tcG9uZW50cztcbn07XG5cbi8qKlxuICogR2V0cyBSZWFjdCBjb21wb25lbnQgaW5mb3JtYXRpb24gZnJvbSBhIERPTSBlbGVtZW50IHVzaW5nIFJlYWN0IERldlRvb2xzIHByb3RvY29sXG4gKiBTdXBwb3J0cyBSZWFjdCAxOCsgYW5kIGZhbGxzIGJhY2sgdG8gbGVnYWN5IGRldGVjdGlvbiBmb3Igb2xkZXIgdmVyc2lvbnNcbiAqIEVuaGFuY2VkIHRvIHNraXAgSFRNTCBlbGVtZW50cyBhbmQgZmluZCBhY3R1YWwgUmVhY3QgY29tcG9uZW50c1xuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbSAtIFRoZSBET00gZWxlbWVudFxuICogQHJldHVybnMge09iamVjdH0gT2JqZWN0IHdpdGggY29tcG9uZW50IG5hbWUgYW5kIG9wdGlvbmFsIHVpZFxuICovXG5jb25zdCBnZXRDb21wb25lbnRPYmogPSAoZWxlbSkgPT4ge1xuICBpZiAod2luZG93Ll9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBmaWJlcktleSA9IE9iamVjdC5rZXlzKGVsZW0pLmZpbmQoa2V5ID0+IFxuICAgICAgICBrZXkuc3RhcnRzV2l0aCgnX19yZWFjdEZpYmVyJCcpIHx8IGtleS5zdGFydHNXaXRoKCdfX3JlYWN0SW50ZXJuYWxJbnN0YW5jZSQnKVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgaWYgKGZpYmVyS2V5KSB7XG4gICAgICAgIGNvbnN0IGZpYmVyID0gZWxlbVtmaWJlcktleV07XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudHMgPSB0cmF2ZXJzZUZpYmVyVHJlZShmaWJlcik7XG4gICAgICAgIFxuICAgICAgICBpZiAoY29tcG9uZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgZmlyc3RDb21wb25lbnQgPSBjb21wb25lbnRzWzBdO1xuICAgICAgICAgIGNvbnN0IHVpZCA9IGZpcnN0Q29tcG9uZW50LmZpYmVyLl9kZWJ1Z0lEIHx8IFxuICAgICAgICAgICAgICAgICAgICAgYCR7Zmlyc3RDb21wb25lbnQuZmliZXIuaW5kZXggfHwgJyd9JHtmaXJzdENvbXBvbmVudC5maWJlci5rZXkgfHwgJyd9YDtcbiAgICAgICAgICBjb25zdCByZXZlcnNlZEhpZXJhcmNoeSA9IGNvbXBvbmVudHMucmV2ZXJzZSgpLm1hcChjID0+IGMubmFtZSk7XG4gICAgICAgICAgcmV0dXJuIHsgXG4gICAgICAgICAgICBuYW1lOiBmaXJzdENvbXBvbmVudC5uYW1lLCBcbiAgICAgICAgICAgIHVpZCxcbiAgICAgICAgICAgIGhpZXJhcmNoeTogcmV2ZXJzZWRIaWVyYXJjaHlcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIFNpbGVudGx5IGZhbGwgYmFjayB0byBsZWdhY3kgZGV0ZWN0aW9uXG4gICAgfVxuICB9XG4gIFxuICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhlbGVtKSkge1xuICAgIGlmIChrZXkuc3RhcnRzV2l0aCgnX19yZWFjdEludGVybmFsSW5zdGFuY2UkJykpIHtcbiAgICAgIGNvbnN0IGZpYmVyTm9kZSA9IGVsZW1ba2V5XTtcbiAgICAgIGlmIChmaWJlck5vZGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBjb21wb25lbnRzID0gdHJhdmVyc2VGaWJlclRyZWUoZmliZXJOb2RlKTtcbiAgICAgICAgICBpZiAoY29tcG9uZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBmaXJzdENvbXBvbmVudCA9IGNvbXBvbmVudHNbMF07XG4gICAgICAgICAgICBjb25zdCByZXZlcnNlZEhpZXJhcmNoeSA9IGNvbXBvbmVudHMucmV2ZXJzZSgpLm1hcChjID0+IGMubmFtZSk7XG4gICAgICAgICAgICByZXR1cm4geyBcbiAgICAgICAgICAgICAgbmFtZTogZmlyc3RDb21wb25lbnQubmFtZSxcbiAgICAgICAgICAgICAgdWlkOiBgJHtmaWJlck5vZGUuX21vdW50SW5kZXggfHwgJyd9JHtmaWJlck5vZGUuX21vdW50T3JkZXIgfHwgJyd9YCxcbiAgICAgICAgICAgICAgaGllcmFyY2h5OiByZXZlcnNlZEhpZXJhcmNoeVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgLy8gQ29udGludWUgdG8gb2xkIGxlZ2FjeSBkZXRlY3Rpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoZmliZXJOb2RlICYmIGZpYmVyTm9kZS5fY3VycmVudEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3Qgb3duZXIgPSBmaWJlck5vZGUuX2N1cnJlbnRFbGVtZW50Ll9vd25lcjtcbiAgICAgICAgY29uc3QgZmliZXIgPSBvd25lciAmJiBvd25lci5faW5zdGFuY2U7XG4gICAgICAgIGlmIChmaWJlcikge1xuICAgICAgICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSBmaWJlci5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICAgIGlmICghaXNIVE1MRWxlbWVudChjb21wb25lbnROYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgXG4gICAgICAgICAgICAgIG5hbWU6IGNvbXBvbmVudE5hbWUsIFxuICAgICAgICAgICAgICB1aWQ6IGAke293bmVyLl9tb3VudEluZGV4IHx8ICcnfSR7b3duZXIuX21vdW50T3JkZXIgfHwgJyd9YCBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGZpYmVyTm9kZSkge1xuICAgICAgICBjb25zdCBmaWJlciA9IGZpYmVyTm9kZS5yZXR1cm4/LnN0YXRlTm9kZT8uX3JlYWN0SW50ZXJuYWxGaWJlcjtcbiAgICAgICAgaWYgKGZpYmVyKSB7XG4gICAgICAgICAgY29uc3QgY29tcG9uZW50TmFtZSA9IGZpYmVyLnR5cGU/Lm5hbWUgfHwgJ1Vua25vd24nO1xuICAgICAgICAgIGlmIChjb21wb25lbnROYW1lICE9PSAnVW5rbm93bicgJiYgIWlzSFRNTEVsZW1lbnQoY29tcG9uZW50TmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB7IG5hbWU6IGNvbXBvbmVudE5hbWUgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIGNvbnN0IHRhZ05hbWUgPSBlbGVtLnRhZ05hbWU/LnRvTG93ZXJDYXNlKCk7XG4gIGlmICh0YWdOYW1lICYmIGlzSFRNTEVsZW1lbnQodGFnTmFtZSkpIHtcbiAgICByZXR1cm4geyBuYW1lOiB0YWdOYW1lIH07XG4gIH1cbiAgXG4gIHJldHVybiB7fTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIGNhY2hlZCBmdW5jdGlvbiBmb3Igc2VhcmNoaW5nIGFuZCBjcmVhdGluZyBjb21wb25lbnQgb3ZlcmxheXNcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gRnVuY3Rpb24gdGhhdCBjcmVhdGVzIG92ZXJsYXkgZWxlbWVudHMgZm9yIGNvbXBvbmVudHNcbiAqL1xuY29uc3Qgc2VhcmNoQW5kQ3JlYXRlQ29tcG9uZW50Q2FjaGVkID0gKCkgPT4ge1xuICAvLyBQZXJmb3JtYW5jZSBpbXByb3ZlbWVudHNcbiAgY29uc3QgdWlkcyA9IG5ldyBTZXQoKTtcbiAgcmV0dXJuIChlbGVtKSA9PiB7XG4gICAgY29uc3QgeyBuYW1lLCB1aWQgfSA9IGdldENvbXBvbmVudE9iaihlbGVtKTtcbiAgICBcbiAgICBpZiAobmFtZSAmJiBuYW1lICE9PSAnVW5rbm93bicpIHtcbiAgICAgIGlmICh1aWQpIHtcbiAgICAgICAgaWYgKCF1aWRzLmhhcyh1aWQpKSB7XG4gICAgICAgICAgdWlkcy5hZGQodWlkKTtcbiAgICAgICAgICByZXR1cm4gY3JlYXRlRWxlbUZvckNvbXBvbmVudChlbGVtLCBuYW1lKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVsZW1Gb3JDb21wb25lbnQoZWxlbSwgbmFtZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9O1xufTtcblxuLyoqXG4gKiBFeHRyYWN0cyBjb21wb25lbnQgb2JqZWN0cyBmcm9tIFJlYWN0IGZpYmVyIHRyZWVcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW0gLSBET00gZWxlbWVudCB0byBleHRyYWN0IGNvbXBvbmVudHMgZnJvbVxuICogQHJldHVybnMge0FycmF5fSBBcnJheSBvZiBjb21wb25lbnQgb2JqZWN0cyBmcm9tIGZpYmVyIHRyZWVcbiAqL1xuY29uc3QgZ2V0Q29tcG9uZW50c0Zyb21FbGVtZW50ID0gKGVsZW0pID0+IHtcbiAgbGV0IGNvbXBvbmVudHMgPSBbXTtcbiAgXG4gIGlmICh3aW5kb3cuX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGZpYmVyS2V5ID0gT2JqZWN0LmtleXMoZWxlbSkuZmluZChrZXkgPT4gXG4gICAgICAgIGtleS5zdGFydHNXaXRoKCdfX3JlYWN0RmliZXIkJykgfHwga2V5LnN0YXJ0c1dpdGgoJ19fcmVhY3RJbnRlcm5hbEluc3RhbmNlJCcpXG4gICAgICApO1xuICAgICAgXG4gICAgICBpZiAoZmliZXJLZXkpIHtcbiAgICAgICAgY29uc3QgZmliZXIgPSBlbGVtW2ZpYmVyS2V5XTtcbiAgICAgICAgY29tcG9uZW50cyA9IHRyYXZlcnNlRmliZXJUcmVlKGZpYmVyKTtcbiAgICAgICAgLy8gUmV2ZXJzZSB0byBnZXQgcGFyZW50IC0+IGNoaWxkIG9yZGVyICh0cmF2ZXJzYWwgZ29lcyBjaGlsZCAtPiBwYXJlbnQpXG4gICAgICAgIGNvbXBvbmVudHMgPSBjb21wb25lbnRzLnJldmVyc2UoKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gU2lsZW50bHkgZmFsbCBiYWNrIHRvIGxlZ2FjeSBkZXRlY3Rpb25cbiAgICB9XG4gIH1cbiAgXG4gIGlmIChjb21wb25lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKGVsZW0pKSB7XG4gICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ19fcmVhY3RJbnRlcm5hbEluc3RhbmNlJCcpKSB7XG4gICAgICAgIGNvbnN0IGZpYmVyTm9kZSA9IGVsZW1ba2V5XTtcbiAgICAgICAgaWYgKGZpYmVyTm9kZSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb21wb25lbnRzID0gdHJhdmVyc2VGaWJlclRyZWUoZmliZXJOb2RlKTtcbiAgICAgICAgICAgIC8vIFJldmVyc2UgdG8gZ2V0IHBhcmVudCAtPiBjaGlsZCBvcmRlclxuICAgICAgICAgICAgY29tcG9uZW50cyA9IGNvbXBvbmVudHMucmV2ZXJzZSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIFNpbGVudGx5IGNvbnRpbnVlIHRvIG5leHQgZGV0ZWN0aW9uIG1ldGhvZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuIGNvbXBvbmVudHM7XG59O1xuXG4vKipcbiAqIEdldHMgY29tcG9uZW50IHBhdGggZnJvbSBET00gdHJhdmVyc2FsIChmYWxsYmFjayBtZXRob2QpXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtIC0gRE9NIGVsZW1lbnQgdG8gc3RhcnQgdHJhdmVyc2FsIGZyb21cbiAqIEByZXR1cm5zIHtBcnJheX0gQXJyYXkgb2YgY29tcG9uZW50IG5hbWVzIGZyb20gRE9NIHRyYXZlcnNhbFxuICovXG5jb25zdCBnZXREb21QYXRoID0gKGVsZW0pID0+IHtcbiAgbGV0IGN1cnJlbnRFbGVtID0gZWxlbTtcbiAgY29uc3QgZG9tUGF0aCA9IFtdO1xuICBjb25zdCBzZWVuQ29tcG9uZW50TmFtZXMgPSBuZXcgU2V0KCk7XG4gIFxuICB3aGlsZSAoY3VycmVudEVsZW0gJiYgY3VycmVudEVsZW0ucGFyZW50Tm9kZSAmJiBkb21QYXRoLmxlbmd0aCA8IDIwKSB7XG4gICAgY3VycmVudEVsZW0gPSBjdXJyZW50RWxlbS5wYXJlbnROb2RlO1xuICAgIGNvbnN0IHsgbmFtZTogY29tcG9uZW50IH0gPSBnZXRDb21wb25lbnRPYmooY3VycmVudEVsZW0pO1xuICAgIGlmIChjb21wb25lbnQgJiYgY29tcG9uZW50ICE9PSAnVW5rbm93bicgJiYgIWlzSFRNTEVsZW1lbnQoY29tcG9uZW50KSkge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZE5hbWUgPSBjb21wb25lbnQudG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmICghc2VlbkNvbXBvbmVudE5hbWVzLmhhcyhub3JtYWxpemVkTmFtZSkpIHtcbiAgICAgICAgc2VlbkNvbXBvbmVudE5hbWVzLmFkZChub3JtYWxpemVkTmFtZSk7XG4gICAgICAgIGRvbVBhdGgudW5zaGlmdChjb21wb25lbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuIGRvbVBhdGg7XG59O1xuXG4vKipcbiAqIEJ1aWxkcyBmdWxsIGNvbXBvbmVudCBzdHJ1Y3R1cmUgcGF0aCAoaW5jbHVkZXMgYWxsIGNvbXBvbmVudHMpXG4gKiBAcGFyYW0ge0FycmF5fSBjb21wb25lbnRzIC0gQ29tcG9uZW50IG9iamVjdHMgZnJvbSBmaWJlciB0cmVlXG4gKiBAcGFyYW0ge3N0cmluZ30gY3VycmVudENvbXBvbmVudE5hbWUgLSBOYW1lIG9mIGN1cnJlbnQgY29tcG9uZW50XG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtIC0gT3JpZ2luYWwgRE9NIGVsZW1lbnQgZm9yIGZhbGxiYWNrXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBGdWxsIGNvbXBvbmVudCBwYXRoIHN0cnVjdHVyZVxuICovXG5jb25zdCBidWlsZEZ1bGxTdHJ1Y3R1cmUgPSAoY29tcG9uZW50cywgY3VycmVudENvbXBvbmVudE5hbWUsIGVsZW0pID0+IHtcbiAgaWYgKGNvbXBvbmVudHMubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGZpbHRlcmVkQ29tcG9uZW50cyA9IGNvbXBvbmVudHMuZmlsdGVyKGNvbXAgPT4gXG4gICAgICBjb21wLm5hbWUgIT09IGN1cnJlbnRDb21wb25lbnROYW1lICYmICFpc0hUTUxFbGVtZW50KGNvbXAubmFtZSlcbiAgICApO1xuICAgIFxuICAgIGlmIChmaWx0ZXJlZENvbXBvbmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgZnVsbFBhdGggPSBmaWx0ZXJlZENvbXBvbmVudHMubWFwKGNvbXAgPT4gY29tcC5uYW1lKTtcbiAgICAgIHJldHVybiBbLi4uZnVsbFBhdGgsIGN1cnJlbnRDb21wb25lbnROYW1lXS5qb2luKCcgLT4gJyk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBjdXJyZW50Q29tcG9uZW50TmFtZTtcbiAgfVxuICBcbiAgY29uc3QgZG9tUGF0aCA9IGdldERvbVBhdGgoZWxlbSk7XG4gIFxuICBpZiAoZG9tUGF0aC5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIFsuLi5kb21QYXRoLCBjdXJyZW50Q29tcG9uZW50TmFtZV0uam9pbignIC0+ICcpO1xuICB9XG4gIFxuICByZXR1cm4gY3VycmVudENvbXBvbmVudE5hbWU7XG59O1xuXG4vKipcbiAqIEJ1aWxkcyBmaWx0ZXJlZCBjb21wb25lbnQgc3RydWN0dXJlIHBhdGggKG9ubHkgcHJvamVjdC1vd25lZCBjb21wb25lbnRzKVxuICogQHBhcmFtIHtBcnJheX0gY29tcG9uZW50cyAtIENvbXBvbmVudCBvYmplY3RzIGZyb20gZmliZXIgdHJlZVxuICogQHBhcmFtIHtzdHJpbmd9IGN1cnJlbnRDb21wb25lbnROYW1lIC0gTmFtZSBvZiBjdXJyZW50IGNvbXBvbmVudFxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbSAtIE9yaWdpbmFsIERPTSBlbGVtZW50IGZvciBmYWxsYmFja1xuICogQHJldHVybnMge3N0cmluZ30gRmlsdGVyZWQgY29tcG9uZW50IHBhdGggc3RydWN0dXJlXG4gKi9cbmNvbnN0IGJ1aWxkRmlsdGVyZWRTdHJ1Y3R1cmUgPSAoY29tcG9uZW50cywgY3VycmVudENvbXBvbmVudE5hbWUsIGVsZW0pID0+IHtcbiAgaWYgKGNvbXBvbmVudHMubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGZpbHRlcmVkQ29tcG9uZW50cyA9IGNvbXBvbmVudHMuZmlsdGVyKGNvbXAgPT4gXG4gICAgICBjb21wLm5hbWUgIT09IGN1cnJlbnRDb21wb25lbnROYW1lICYmICFpc0hUTUxFbGVtZW50KGNvbXAubmFtZSlcbiAgICApO1xuICAgIFxuICAgIGNvbnN0IHNlZW5Db21wb25lbnRzID0gbmV3IFNldCgpO1xuICAgIGNvbnN0IHByb2plY3RPd25lZENvbXBvbmVudHMgPSBbXTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IGNvbXAgb2YgZmlsdGVyZWRDb21wb25lbnRzKSB7XG4gICAgICBpZiAoIWNvbXAuaXNJbnRlcm5hbCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgbm9ybWFsaXplZE5hbWUgPSBjb21wLm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgIFxuICAgICAgaWYgKGNvbXAuZmlsZSkge1xuICAgICAgICBjb25zdCBub3JtYWxpemVkRmlsZSA9IGNvbXAuZmlsZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCBwYXRoUGFydHMgPSBub3JtYWxpemVkRmlsZS5zcGxpdCgvW1xcL1xcXFxdLyk7XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gcGF0aFBhcnRzW3BhdGhQYXJ0cy5sZW5ndGggLSAxXTtcbiAgICAgICAgY29uc3QgZmlsZW5hbWVXaXRob3V0RXh0ID0gZmlsZW5hbWUucmVwbGFjZSgvXFwuKHRzeD98anN4PykkLywgJycpO1xuXG4gICAgICAgIGNvbnN0IG5hbWVNYXRjaGVzRmlsZSA9IG5vcm1hbGl6ZWRGaWxlLmluY2x1ZGVzKGAvJHtub3JtYWxpemVkTmFtZX1gKSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZEZpbGUuaW5jbHVkZXMoYFxcXFwke25vcm1hbGl6ZWROYW1lfWApIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRGaWxlLmVuZHNXaXRoKGAvJHtub3JtYWxpemVkTmFtZX0udHN4YCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZEZpbGUuZW5kc1dpdGgoYC8ke25vcm1hbGl6ZWROYW1lfS50c2ApIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRGaWxlLmVuZHNXaXRoKGAvJHtub3JtYWxpemVkTmFtZX0uanN4YCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZEZpbGUuZW5kc1dpdGgoYC8ke25vcm1hbGl6ZWROYW1lfS5qc2ApIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRGaWxlLmVuZHNXaXRoKGBcXFxcJHtub3JtYWxpemVkTmFtZX0udHN4YCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZEZpbGUuZW5kc1dpdGgoYFxcXFwke25vcm1hbGl6ZWROYW1lfS50c2ApIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRGaWxlLmVuZHNXaXRoKGBcXFxcJHtub3JtYWxpemVkTmFtZX0uanN4YCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZEZpbGUuZW5kc1dpdGgoYFxcXFwke25vcm1hbGl6ZWROYW1lfS5qc2ApIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lV2l0aG91dEV4dCA9PT0gbm9ybWFsaXplZE5hbWU7XG4gICAgICAgIFxuICAgICAgICAvLyBPKDEpIGxvb2t1cCB1c2luZyBwcmUtYnVpbHQgaW5kZXggaW5zdGVhZCBvZiBPKG0pIHNwcmVhZCArIHNvbWUgKyBpbmNsdWRlc1xuICAgICAgICBjb25zdCBpblByb2plY3RGaWxlUGF0aHMgPSBjb21wb25lbnROYW1lVG9GaWxlc0luZGV4Lmhhcyhub3JtYWxpemVkTmFtZSk7XG5cbiAgICAgICAgaWYgKCFuYW1lTWF0Y2hlc0ZpbGUgJiYgIWluUHJvamVjdEZpbGVQYXRocykge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBEZWR1cGxpY2F0ZSBieSBjb21wb25lbnQgaWRlbnRpdHk6IHVzZSBub3JtYWxpemVkIG5hbWUgKyBub3JtYWxpemVkIGZpbGUgcGF0aCBhcyB1bmlxdWUga2V5XG4gICAgICAgIC8vIFRoaXMgZW5zdXJlcyB0aGF0OlxuICAgICAgICAvLyAxLiBUaGUgc2FtZSBjb21wb25lbnQgKHNhbWUgbmFtZSwgc2FtZSBmaWxlKSBhcHBlYXJpbmcgbXVsdGlwbGUgdGltZXMgaXMgb25seSBzaG93biBvbmNlXG4gICAgICAgIC8vICAgIChlLmcuLCBXZWJBcHBMYXlvdXQgLT4gV2ViQXBwTGF5b3V0IC0+IFdlYkFwcExheW91dClcbiAgICAgICAgLy8gMi4gRGlmZmVyZW50IGNvbXBvbmVudHMgd2l0aCB0aGUgc2FtZSBuYW1lIGJ1dCBkaWZmZXJlbnQgZmlsZXMgYXJlIGJvdGggc2hvd25cbiAgICAgICAgLy8gICAgKGUuZy4sIGNvbXBvbmVudHNfbGVmdC9QYXJlbnQuanN4IHZzIGNvbXBvbmVudHNfcmlnaHQvUGFyZW50LmpzeClcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZEZpbGVQYXRoID0gbm9ybWFsaXplUGF0aChjb21wLmZpbGUpO1xuICAgICAgICBjb25zdCBjb21wb25lbnRLZXkgPSBgJHtub3JtYWxpemVkTmFtZX06JHtub3JtYWxpemVkRmlsZVBhdGh9YDtcbiAgICAgICAgXG4gICAgICAgIGlmIChzZWVuQ29tcG9uZW50cy5oYXMoY29tcG9uZW50S2V5KSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBzZWVuQ29tcG9uZW50cy5hZGQoY29tcG9uZW50S2V5KTtcbiAgICAgICAgcHJvamVjdE93bmVkQ29tcG9uZW50cy5wdXNoKGNvbXApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgY29tcG9uZW50S2V5ID0gbm9ybWFsaXplZE5hbWU7XG4gICAgICAgIFxuICAgICAgICBpZiAoc2VlbkNvbXBvbmVudHMuaGFzKGNvbXBvbmVudEtleSkpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlZW5Db21wb25lbnRzLmFkZChjb21wb25lbnRLZXkpO1xuICAgICAgICBwcm9qZWN0T3duZWRDb21wb25lbnRzLnB1c2goY29tcCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHByb2plY3RPd25lZENvbXBvbmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgZmlsdGVyZWRQYXRoID0gcHJvamVjdE93bmVkQ29tcG9uZW50cy5tYXAoY29tcCA9PiBjb21wLm5hbWUpO1xuICAgICAgY29uc3QgY3VycmVudE5hbWVMb3dlciA9IGN1cnJlbnRDb21wb25lbnROYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICBjb25zdCBwYXRoQ29udGFpbnNDdXJyZW50ID0gZmlsdGVyZWRQYXRoLnNvbWUobmFtZSA9PiBuYW1lLnRvTG93ZXJDYXNlKCkgPT09IGN1cnJlbnROYW1lTG93ZXIpO1xuICAgICAgXG4gICAgICBsZXQgZmluYWxQYXRoO1xuICAgICAgaWYgKCFwYXRoQ29udGFpbnNDdXJyZW50KSB7XG4gICAgICAgIGZpbmFsUGF0aCA9IFsuLi5maWx0ZXJlZFBhdGgsIGN1cnJlbnRDb21wb25lbnROYW1lXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZpbmFsUGF0aCA9IGZpbHRlcmVkUGF0aDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUmVtb3ZlIGNvbnNlY3V0aXZlIGR1cGxpY2F0ZXMgb2YgdGhlIHNhbWUgY29tcG9uZW50cyBiZWZvcmUgam9pbmluZ1xuICAgICAgZmluYWxQYXRoID0gcmVtb3ZlQ29uc2VjdXRpdmVEdXBsaWNhdGVzKGZpbmFsUGF0aCk7XG4gICAgICByZXR1cm4gZmluYWxQYXRoLmpvaW4oJyAtPiAnKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGN1cnJlbnRDb21wb25lbnROYW1lO1xuICB9XG4gIFxuICBjb25zdCBkb21QYXRoID0gZ2V0RG9tUGF0aChlbGVtKTtcbiAgXG4gIGlmIChkb21QYXRoLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBjdXJyZW50TmFtZUxvd2VyID0gY3VycmVudENvbXBvbmVudE5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICBjb25zdCBwYXRoQ29udGFpbnNDdXJyZW50ID0gZG9tUGF0aC5zb21lKG5hbWUgPT4gbmFtZS50b0xvd2VyQ2FzZSgpID09PSBjdXJyZW50TmFtZUxvd2VyKTtcbiAgICBcbiAgICBsZXQgZmluYWxQYXRoO1xuICAgIGlmICghcGF0aENvbnRhaW5zQ3VycmVudCkge1xuICAgICAgZmluYWxQYXRoID0gWy4uLmRvbVBhdGgsIGN1cnJlbnRDb21wb25lbnROYW1lXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZmluYWxQYXRoID0gZG9tUGF0aDtcbiAgICB9XG4gICAgXG4gICAgLy8gUmVtb3ZlIGNvbnNlY3V0aXZlIGR1cGxpY2F0ZXMgb2YgdGhlIHNhbWUgY29tcG9uZW50cyBiZWZvcmUgam9pbmluZ1xuICAgIGZpbmFsUGF0aCA9IHJlbW92ZUNvbnNlY3V0aXZlRHVwbGljYXRlcyhmaW5hbFBhdGgpO1xuICAgIHJldHVybiBmaW5hbFBhdGguam9pbignIC0+ICcpO1xuICB9XG4gIFxuICByZXR1cm4gY3VycmVudENvbXBvbmVudE5hbWU7XG59O1xuXG4vKipcbiAqIEFkZHMgdGhlIGFic29sdXRlIGNvbXBvbmVudCBwYXRoIHRvIGFuIG92ZXJsYXkgZWxlbWVudFxuICogVXNlcyBmaWJlci1iYXNlZCBoaWVyYXJjaHkgZm9yIGFjY3VyYXRlIFJlYWN0IGNvbXBvbmVudCBwYXRoc1xuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbSAtIE9yaWdpbmFsIERPTSBlbGVtZW50XG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB4cmF5UmVhY3RFbGVtIC0gT3ZlcmxheSBlbGVtZW50XG4gKi9cbmNvbnN0IGFkZEFic29sdXRlQ29tcG9uZW50UGF0aCA9IChlbGVtLCB4cmF5UmVhY3RFbGVtKSA9PiB7XG4gIGNvbnN0IGN1cnJlbnRDb21wb25lbnROYW1lID0geHJheVJlYWN0RWxlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEteHJheS1yZWFjdC1lbGVtZW50LW5hbWUnKSB8fCAnJztcbiAgXG4gIGNvbnN0IGNvbXBvbmVudHMgPSBnZXRDb21wb25lbnRzRnJvbUVsZW1lbnQoZWxlbSk7XG4gIFxuICBjb25zdCBmdWxsU3RydWN0dXJlID0gYnVpbGRGdWxsU3RydWN0dXJlKGNvbXBvbmVudHMsIGN1cnJlbnRDb21wb25lbnROYW1lLCBlbGVtKTtcbiAgY29uc3QgZmlsdGVyZWRTdHJ1Y3R1cmUgPSBidWlsZEZpbHRlcmVkU3RydWN0dXJlKGNvbXBvbmVudHMsIGN1cnJlbnRDb21wb25lbnROYW1lLCBlbGVtKTtcbiAgXG4gIHhyYXlSZWFjdEVsZW0uc2V0QXR0cmlidXRlKGNvbnN0YW50cy54cmF5UmVhY3RDb21wUGF0aEF0dHIsIGZ1bGxTdHJ1Y3R1cmUpO1xuICB4cmF5UmVhY3RFbGVtLnNldEF0dHJpYnV0ZShjb25zdGFudHMueHJheVJlYWN0RmlsdGVyZWRDb21wUGF0aEF0dHIsIGZpbHRlcmVkU3RydWN0dXJlKTtcbn07XG5cbi8qKlxuICogSGFuZGxlcyBtb3VzZW92ZXIgZXZlbnRzIG9uIG92ZXJsYXkgZWxlbWVudHNcbiAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IC0gTW91c2VvdmVyIGV2ZW50XG4gKi9cbmNvbnN0IG9uWHJheVJlYWN0TW91c2VvdmVyID0gKGV2ZW50KSA9PiB7XG4gIGNvbnN0IHsgdGFyZ2V0IH0gPSBldmVudDtcbiAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoY29uc3RhbnRzLnhyYXlSZWFjdEVsZW1DTikpIHtcbiAgICBjb25zdCBjb21wb25lbnRzUGF0aCA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoY29uc3RhbnRzLnhyYXlSZWFjdEZpbHRlcmVkQ29tcFBhdGhBdHRyKSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5nZXRBdHRyaWJ1dGUoY29uc3RhbnRzLnhyYXlSZWFjdENvbXBQYXRoQXR0cikgfHwgJyc7XG4gICAgY29uc3QgcGF0aEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcueHJheS1yZWFjdC1hY3Rpb25zLXdyYXBwZXIgLmNvbXBvbmVudHMtcGF0aCcpO1xuICAgIGlmIChwYXRoRWxlbWVudCkge1xuICAgICAgcGF0aEVsZW1lbnQuaW5uZXJIVE1MID0gY29tcG9uZW50c1BhdGg7XG4gICAgfVxuICB9XG59O1xuXG5cbi8qKlxuICogVG9nZ2xlcyB0aGUgeHJheS1yZWFjdCBvdmVybGF5IG9uL29mZlxuICovXG5jb25zdCB0b2dnbGVYcmF5UmVhY3QgPSAoKSA9PiB7XG4gIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuICBcbiAgaWYgKGJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCd4cmF5LXJlYWN0LWVuYWJsZWQnKSkge1xuICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgneHJheS1yZWFjdC1lbmFibGVkJyk7XG4gICAgY29uc3QgeHJheVJlYWN0RWxlbWVudHNXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7Y29uc3RhbnRzLnhyYXlSZWFjdFdyYXBwZXJDTn1gKTtcbiAgICBjb25zdCB4cmF5UmVhY3RBY3Rpb25CYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcueHJheS1yZWFjdC1hY3Rpb24tYmFyJyk7XG4gICAgY29uc3QgeHJheVJlYWN0U3R5bGVUYWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcueHJheS1yZWFjdC1zdHlsZS10YWcnKTtcbiAgICBjb25zdCB0ZW1wRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcueHJheS1yZWFjdC1lbGVtZW50LXRlbXAnKTtcbiAgICBcbiAgICBpZiAoeHJheVJlYWN0QWN0aW9uQmFyKSB7XG4gICAgICB4cmF5UmVhY3RBY3Rpb25CYXIuY2xhc3NMaXN0LnJlbW92ZSgnLXNpbXBsZS1tb2RlJyk7XG4gICAgfVxuICAgIGlmICh4cmF5UmVhY3RFbGVtZW50c1dyYXBwZXIpIHhyYXlSZWFjdEVsZW1lbnRzV3JhcHBlci5yZW1vdmUoKTtcbiAgICBpZiAoeHJheVJlYWN0QWN0aW9uQmFyKSB4cmF5UmVhY3RBY3Rpb25CYXIucmVtb3ZlKCk7XG4gICAgaWYgKHhyYXlSZWFjdFN0eWxlVGFnKSB4cmF5UmVhY3RTdHlsZVRhZy5yZW1vdmUoKTtcbiAgICB0ZW1wRWxlbWVudHMuZm9yRWFjaChlbCA9PiBlbC5yZW1vdmUoKSk7XG4gICAgXG4gICAgYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBvblhyYXlSZWFjdE1vdXNlb3Zlcik7XG4gIH0gZWxzZSB7XG4gICAgYm9keS5jbGFzc0xpc3QuYWRkKCd4cmF5LXJlYWN0LWVuYWJsZWQnKTtcblxuICAgIGN1cnJlbnRNb2RlID0gZ2V0Q3VycmVudE1vZGUoKTtcblxuICAgIGxldCBzdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcueHJheS1yZWFjdC1zdHlsZS10YWcnKTtcbiAgICBpZiAoIXN0eWxlRWxlbWVudCkge1xuICAgICAgc3R5bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgIHN0eWxlRWxlbWVudC5jbGFzc05hbWUgPSAneHJheS1yZWFjdC1zdHlsZS10YWcnO1xuICAgICAgc3R5bGVFbGVtZW50LnRleHRDb250ZW50ID0gY3NzO1xuICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsZW1lbnQpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBleGlzdGluZ0FjdGlvbkJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy54cmF5LXJlYWN0LWFjdGlvbi1iYXInKTtcbiAgICBpZiAoIWV4aXN0aW5nQWN0aW9uQmFyKSB7XG4gICAgICBib2R5Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgYWN0aW9uQmFyKTtcbiAgICB9XG4gICAgaWYgKGN1cnJlbnRNb2RlID09PSBVSV9NT0RFX1NJTVBMRSAmJiBleGlzdGluZ0FjdGlvbkJhcikge1xuICAgICAgZXhpc3RpbmdBY3Rpb25CYXIuY2xhc3NMaXN0LmFkZCgnLXNpbXBsZS1tb2RlJyk7XG4gICAgfSBlbHNlIGlmIChjdXJyZW50TW9kZSA9PT0gVUlfTU9ERV9TSU1QTEUgJiYgIWV4aXN0aW5nQWN0aW9uQmFyKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgY29uc3QgYWN0aW9uQmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnhyYXktcmVhY3QtYWN0aW9uLWJhcicpO1xuICAgICAgICBpZiAoYWN0aW9uQmFyKSB7XG4gICAgICAgICAgYWN0aW9uQmFyLmNsYXNzTGlzdC5hZGQoJy1zaW1wbGUtbW9kZScpO1xuICAgICAgICB9XG4gICAgICB9LCAwKTtcbiAgICB9IGVsc2UgaWYgKGN1cnJlbnRNb2RlICE9PSBVSV9NT0RFX1NJTVBMRSAmJiBleGlzdGluZ0FjdGlvbkJhcikge1xuICAgICAgZXhpc3RpbmdBY3Rpb25CYXIuY2xhc3NMaXN0LnJlbW92ZSgnLXNpbXBsZS1tb2RlJyk7XG4gICAgfVxuICAgIGNvbnN0IHNlYXJjaElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaC1jb21wb25lbnQnKTtcbiAgICBpZiAoc2VhcmNoSW5wdXQpIHtcbiAgICAgIHNlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgaGFuZGxlU2VhcmNoQ2hhbmdlKTtcbiAgICB9XG4gICAgYm9keS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBvblhyYXlSZWFjdE1vdXNlb3Zlcik7XG4gICAgXG4gICAgY29uc3QgZXhpc3RpbmdXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7Y29uc3RhbnRzLnhyYXlSZWFjdFdyYXBwZXJDTn1gKTtcbiAgICBpZiAoZXhpc3RpbmdXcmFwcGVyKSB7XG4gICAgICBleGlzdGluZ1dyYXBwZXIucmVtb3ZlKCk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHhyYXlSZWFjdEVsZW1lbnRzV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHhyYXlSZWFjdEVsZW1lbnRzV3JhcHBlci5jbGFzc05hbWUgPSBjb25zdGFudHMueHJheVJlYWN0V3JhcHBlckNOO1xuICAgIGlmIChjdXJyZW50TW9kZSA9PT0gVUlfTU9ERV9TSU1QTEUpIHtcbiAgICAgIHhyYXlSZWFjdEVsZW1lbnRzV3JhcHBlci5jbGFzc0xpc3QuYWRkKCctc2ltcGxlLW1vZGUnKTtcbiAgICB9XG4gICAgYm9keS5hcHBlbmQoeHJheVJlYWN0RWxlbWVudHNXcmFwcGVyKTtcbiAgICBpZiAoY3VycmVudE1vZGUgPT09IFVJX01PREVfU0lNUExFKSB7XG4gICAgICBjb25zdCBhY3Rpb25CYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcueHJheS1yZWFjdC1hY3Rpb24tYmFyJyk7XG4gICAgICBpZiAoYWN0aW9uQmFyKSB7XG4gICAgICAgIGFjdGlvbkJhci5jbGFzc0xpc3QuYWRkKCctc2ltcGxlLW1vZGUnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgZXhpc3RpbmdMb2FkaW5nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnhyYXktcmVhY3QtZWxlbWVudC10ZW1wJyk7XG4gICAgZXhpc3RpbmdMb2FkaW5nLmZvckVhY2goZWwgPT4gZWwucmVtb3ZlKCkpO1xuICAgIFxuICAgIGNvbnN0IGxvYWRpbmdFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbG9hZGluZ0VsZW1lbnQuY2xhc3NOYW1lID0gJ3hyYXktcmVhY3QtZWxlbWVudCB4cmF5LXJlYWN0LWVsZW1lbnQtdGVtcCc7XG4gICAgbG9hZGluZ0VsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gYCR7d2luZG93LmlubmVySGVpZ2h0fXB4YDtcbiAgICBsb2FkaW5nRWxlbWVudC5zdHlsZS53aWR0aCA9IGAke3dpbmRvdy5pbm5lcldpZHRofXB4YDtcbiAgICBsb2FkaW5nRWxlbWVudC5zdHlsZS50b3AgPSBgJHt3aW5kb3cuc2Nyb2xsWX1weGA7XG4gICAgbG9hZGluZ0VsZW1lbnQuc3R5bGUubGVmdCA9IGAke3dpbmRvdy5zY3JvbGxYfXB4YDtcbiAgICBsb2FkaW5nRWxlbWVudC5zdHlsZS56SW5kZXggPSAnMTAwMDAnO1xuICAgIGxvYWRpbmdFbGVtZW50LmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPVwieHJheS1yZWFjdC1zcGlubmVyIHhyYXktcmVhY3QtZWxlbWVudC10ZW1wXCI+PC9kaXY+JztcbiAgICB4cmF5UmVhY3RFbGVtZW50c1dyYXBwZXIuYXBwZW5kQ2hpbGQobG9hZGluZ0VsZW1lbnQpO1xuICAgIFxuICAgIC8vIFBlcmZvcm1hbmNlIGltcHJvdmVtZW50c1xuICAgIGNvbnN0IHByb2Nlc3NFbGVtZW50c0FzeW5jID0gKCkgPT4ge1xuICAgICAgY29uc3QgeHJheVJlYWN0T2JqZWN0cyA9IFtdO1xuICAgICAgY29uc3Qgc2VhcmNoQW5kQ3JlYXRlQ29tcG9uZW50ID0gc2VhcmNoQW5kQ3JlYXRlQ29tcG9uZW50Q2FjaGVkKCk7XG4gICAgICBjb25zdCBhbGxFbGVtZW50cyA9IEFycmF5LmZyb20oYm9keS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnKicpKS5maWx0ZXIoZWxlbSA9PiB7XG4gICAgICAgIHJldHVybiAhZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoJ3hyYXktcmVhY3QtZWxlbWVudC10ZW1wJykgJiZcbiAgICAgICAgICAgICAgICFlbGVtLmNsb3Nlc3QoJy54cmF5LXJlYWN0LWFjdGlvbi1iYXInKSAmJlxuICAgICAgICAgICAgICAgIWVsZW0uY2xvc2VzdChgLiR7Y29uc3RhbnRzLnhyYXlSZWFjdFdyYXBwZXJDTn1gKTtcbiAgICAgIH0pO1xuICAgICAgY29uc3QgYmF0Y2hTaXplID0gMjA7XG4gICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgXG4gICAgICBjb25zdCBwcm9jZXNzQmF0Y2ggPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGVuZEluZGV4ID0gTWF0aC5taW4oaW5kZXggKyBiYXRjaFNpemUsIGFsbEVsZW1lbnRzLmxlbmd0aCk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGxldCBpID0gaW5kZXg7IGkgPCBlbmRJbmRleDsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgZWxlbSA9IGFsbEVsZW1lbnRzW2ldO1xuICAgICAgICAgIGNvbnN0IHhyYXlSZWFjdE9iaiA9IHNlYXJjaEFuZENyZWF0ZUNvbXBvbmVudChlbGVtKTtcbiAgICAgICAgICBpZiAoeHJheVJlYWN0T2JqKSB7XG4gICAgICAgICAgICB4cmF5UmVhY3RPYmplY3RzLnB1c2goeHJheVJlYWN0T2JqKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGluZGV4ID0gZW5kSW5kZXg7XG4gICAgICAgIFxuICAgICAgICBpZiAoaW5kZXggPCBhbGxFbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KHByb2Nlc3NCYXRjaCwgMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGV0IHBhdGhJbmRleCA9IDA7XG4gICAgICAgICAgY29uc3QgcGF0aEJhdGNoU2l6ZSA9IDEwO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IHByb2Nlc3NQYXRocyA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVuZEluZGV4ID0gTWF0aC5taW4ocGF0aEluZGV4ICsgcGF0aEJhdGNoU2l6ZSwgeHJheVJlYWN0T2JqZWN0cy5sZW5ndGgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gcGF0aEluZGV4OyBpIDwgZW5kSW5kZXg7IGkrKykge1xuICAgICAgICAgICAgICBjb25zdCB7IGVsZW0sIHhyYXlSZWFjdEVsZW0gfSA9IHhyYXlSZWFjdE9iamVjdHNbaV07XG4gICAgICAgICAgICAgIGFkZEFic29sdXRlQ29tcG9uZW50UGF0aChlbGVtLCB4cmF5UmVhY3RFbGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcGF0aEluZGV4ID0gZW5kSW5kZXg7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChwYXRoSW5kZXggPCB4cmF5UmVhY3RPYmplY3RzLmxlbmd0aCkge1xuICAgICAgICAgICAgICBzZXRUaW1lb3V0KHByb2Nlc3NQYXRocywgMSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7Y29uc3RhbnRzLnhyYXlSZWFjdFdyYXBwZXJDTn1gKTtcbiAgICAgICAgICAgICAgaWYgKHdyYXBwZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZW1wRWxlbWVudHMgPSB3cmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy54cmF5LXJlYWN0LWVsZW1lbnQtdGVtcCcpO1xuICAgICAgICAgICAgICAgIHRlbXBFbGVtZW50cy5mb3JFYWNoKGVsID0+IGVsLnJlbW92ZSgpKTtcbiAgICAgICAgICAgICAgICB3cmFwcGVyLmFwcGVuZCguLi54cmF5UmVhY3RPYmplY3RzLm1hcChvYmogPT4gb2JqLnhyYXlSZWFjdEVsZW0pKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgXG4gICAgICAgICAgc2V0VGltZW91dChwcm9jZXNzUGF0aHMsIDEpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgXG4gICAgICBzZXRUaW1lb3V0KHByb2Nlc3NCYXRjaCwgMSk7XG4gICAgfTtcbiAgICBcbiAgICBwcm9jZXNzRWxlbWVudHNBc3luYygpO1xuICB9XG59O1xuXG4vKipcbiAqIEtleWRvd24gZXZlbnQgaGFuZGxlciBmb3IgeHJheS1yZWFjdCBzaG9ydGN1dHNcbiAqIE1hdGNoZXMgeHJheS1yYWlsczogQ21kK1NoaWZ0K1ggKE1hYykgLyBDdHJsK1NoaWZ0K1ggKFdpbmRvd3MvTGludXgpXG4gKi9cbmxldCBrZXlkb3duSGFuZGxlciA9IG51bGw7XG5sZXQgaXNIYW5kbGVyUmVnaXN0ZXJlZCA9IGZhbHNlO1xuXG5jb25zdCBjcmVhdGVLZXlkb3duSGFuZGxlciA9ICgpID0+IHtcbiAgcmV0dXJuIChldmVudCkgPT4ge1xuICAgIGlmIChldmVudC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICBjb25zdCBib2R5ID0gZG9jdW1lbnQuYm9keTtcbiAgICAgIGlmIChib2R5ICYmIGJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCd4cmF5LXJlYWN0LWVuYWJsZWQnKSkge1xuICAgICAgICB0b2dnbGVYcmF5UmVhY3QoKTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgaXNNYWMgPSBuYXZpZ2F0b3IucGxhdGZvcm0udG9VcHBlckNhc2UoKS5pbmRleE9mKCdNQUMnKSA+PSAwO1xuICAgIGNvbnN0IGlzTWV0YU9yQ3RybCA9IGlzTWFjID8gZXZlbnQubWV0YUtleSA6IGV2ZW50LmN0cmxLZXk7XG4gICAgY29uc3QgaXNTaGlmdCA9IGV2ZW50LnNoaWZ0S2V5O1xuICAgIGNvbnN0IGlzWCA9IGV2ZW50LmtleSA9PT0gJ3gnIHx8IGV2ZW50LmtleSA9PT0gJ1gnIHx8IGV2ZW50LmtleUNvZGUgPT09IDg4O1xuICAgIFxuICAgIGlmIChpc01ldGFPckN0cmwgJiYgaXNTaGlmdCAmJiBpc1gpIHtcbiAgICAgIHRvZ2dsZVhyYXlSZWFjdCgpO1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgfTtcbn07XG5cbi8qKlxuICogSGFuZGxlcyBrZXlib2FyZCBzaG9ydGN1dCB0byB0b2dnbGUgeHJheS1yZWFjdFxuICogRW5zdXJlcyB0aGUgbGlzdGVuZXIgaXMgb25seSByZWdpc3RlcmVkIG9uY2VcbiAqL1xuY29uc3QgaGFuZGxlWHJheVJlYWN0VG9nZ2xlID0gKCkgPT4ge1xuICBpZiAoaXNIYW5kbGVyUmVnaXN0ZXJlZCkge1xuICAgIHJldHVybjtcbiAgfVxuICBcbiAgaWYgKCFrZXlkb3duSGFuZGxlcikge1xuICAgIGtleWRvd25IYW5kbGVyID0gY3JlYXRlS2V5ZG93bkhhbmRsZXIoKTtcbiAgfVxuICBcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGtleWRvd25IYW5kbGVyLCB0cnVlKTtcbiAgaXNIYW5kbGVyUmVnaXN0ZXJlZCA9IHRydWU7XG59O1xuXG4vKipcbiAqIEVuYWJsZXMgeHJheS1yZWFjdCBmdW5jdGlvbmFsaXR5XG4gKi9cbmV4cG9ydCBjb25zdCBlbmFibGVYcmF5UmVhY3QgPSAoKSA9PiB7XG4gIGN1cnJlbnRNb2RlID0gZ2V0Q3VycmVudE1vZGUoKTtcblxuICBpZiAoIXByb2plY3RSb290KSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5fX1hSQVlfUkVBQ1RfUFJPSkVDVF9ST09UX18pIHtcbiAgICAgIHByb2plY3RSb290ID0gbm9ybWFsaXplUGF0aCh3aW5kb3cuX19YUkFZX1JFQUNUX1BST0pFQ1RfUk9PVF9fKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGRldGVjdFByb2plY3RSb290RnJvbURPTSgpO1xuICAgICAgfSwgMTAwMCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdsb2FkaW5nJykge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBoYW5kbGVYcmF5UmVhY3RUb2dnbGUpO1xuICB9IGVsc2Uge1xuICAgIGhhbmRsZVhyYXlSZWFjdFRvZ2dsZSgpO1xuICB9XG59O1xuIiwiaW1wb3J0IHsgZW5hYmxlWHJheVJlYWN0LCBzZXRQcm9qZWN0Um9vdCwgc2V0VXNhZ2VNYXAsIHNldEltcG9ydE1hcCwgc2V0UHJvamVjdEZpbGVzLCBzZXRNb2RlIH0gZnJvbSAnLi4vc3JjL3VpLXV0aWxzLmpzJztcblxuLy8gRXhwb3NlIGZ1bmN0aW9ucyBnbG9iYWxseSBmb3IgY2xpZW50IGJ1bmRsZSB0byB1c2VcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICB3aW5kb3cueHJheVJlYWN0U2V0UHJvamVjdFJvb3QgPSBzZXRQcm9qZWN0Um9vdDtcbiAgd2luZG93LnhyYXlSZWFjdFNldFVzYWdlTWFwID0gc2V0VXNhZ2VNYXA7XG4gIHdpbmRvdy54cmF5UmVhY3RTZXRJbXBvcnRNYXAgPSBzZXRJbXBvcnRNYXA7XG4gIHdpbmRvdy54cmF5UmVhY3RTZXRQcm9qZWN0RmlsZXMgPSBzZXRQcm9qZWN0RmlsZXM7XG4gIHdpbmRvdy54cmF5UmVhY3RTZXRNb2RlID0gc2V0TW9kZTtcbn1cblxuZW5hYmxlWHJheVJlYWN0KCk7XG4iXSwibmFtZXMiOlsiY29uc3RhbnRzLnhyYXlSZWFjdEVsZW1DTiIsImNvbnN0YW50cy56SW5kZXgiLCJjb25zdGFudHMuSFRNTF9FTEVNRU5UUyIsImNvbnN0YW50cy54cmF5UmVhY3RDb21wUGF0aEF0dHIiLCJjb25zdGFudHMueHJheVJlYWN0RmlsdGVyZWRDb21wUGF0aEF0dHIiLCJjb25zdGFudHMueHJheVJlYWN0V3JhcHBlckNOIl0sIm1hcHBpbmdzIjoiOzs7RUFBTyxNQUFNLGVBQWUsR0FBRyxvQkFBb0I7RUFDNUMsTUFBTSxrQkFBa0IsR0FBRyw2QkFBNkI7RUFDeEQsTUFBTSxxQkFBcUIsR0FBRyxpQ0FBaUM7RUFDL0QsTUFBTSw2QkFBNkIsR0FBRywwQ0FBMEM7RUFDaEYsTUFBTSxNQUFNLEdBQUcsS0FBSzs7RUFFcEIsTUFBTSxZQUFZLEdBQUcsTUFBTTtFQUMzQixNQUFNLGNBQWMsR0FBRyxRQUFRO0VBQy9CLE1BQU0sa0JBQWtCLEdBQUcsQ0FBQyxZQUFZLEVBQUUsY0FBYyxDQUFDOztFQUV6RCxNQUFNLGFBQWEsR0FBRyxJQUFJLEdBQUcsQ0FBQztFQUNyQyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJO0VBQy9GLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsT0FBTztFQUN4RSxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLE9BQU87RUFDbEUsRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUUsVUFBVSxFQUFFLFFBQVE7RUFDL0QsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxLQUFLO0VBQ2xFLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsTUFBTTtFQUN2RCxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxTQUFTO0VBQzFFLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsT0FBTztFQUNsRSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUU7RUFDakQsQ0FBQyxDQUFDOztBQ3BCRixZQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7RUMvS00sTUFBTSxTQUFTLEdBQUc7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7RUNMRCxNQUFNLGVBQWUsR0FBRyxFQUFFLENBQUM7O0VBRTNCLElBQUksV0FBVyxHQUFHLElBQUk7RUFDdEIsSUFBSSxR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
