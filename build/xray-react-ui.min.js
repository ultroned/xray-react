(function () {
  'use strict';

  const xrayReactElemCN = 'xray-react-element';
  const xrayReactWrapperCN = 'xray-react-elements-wrapper';
  const xrayReactCompPathAttr = 'data-xray-react-components-path';
  const xrayReactFilteredCompPathAttr = 'data-xray-react-filtered-components-path';
  const zIndex = 10000;

  const HTML_ELEMENTS = new Set([
    'div', 'span', 'form', 'button', 'input', 'a', 'img', 'p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6',
    'ul', 'li', 'ol', 'table', 'tr', 'td', 'th', 'thead', 'tbody', 'tfoot',
    'section', 'article', 'header', 'footer', 'nav', 'main', 'aside',
    'label', 'select', 'option', 'textarea', 'fieldset', 'legend',
    'br', 'hr', 'strong', 'em', 'b', 'i', 'u', 'small', 'sub', 'sup',
    'dl', 'dt', 'dd', 'pre', 'code', 'blockquote', 'cite',
    'canvas', 'svg', 'path', 'circle', 'rect', 'line', 'polyline', 'polygon',
    'iframe', 'embed', 'object', 'video', 'audio', 'source', 'track',
    'meta', 'link', 'style', 'script', 'noscript', 'template'
  ]);

  var css = `
  .xray-react-enabled {
    margin-bottom: 50px !important;
  }
  .xray-react-elements-wrapper {
    bottom: 0;
    font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    font-style: normal;
    left: 0;
    position: absolute;
    right: 0;
    top: 0;
  }
  .xray-react-element {
    background-color: rgba(0, 0, 255, 0.25);
    border: 2px solid blue;
    cursor: pointer;
    position: absolute;
  }
  .xray-react-element::before {
    align-self: center;
    color: white;
    content: attr(data-xray-react-element-name);
    display: table;
    font-size: 18px;
    font-weight: 400;
    left: 50%;
    position: absolute;
    right: 0;
    text-align: center;
    top: 50%;
    transform: translate(-50%, -50%);
  }
  .xray-react-element::after {
    background-color: darkblue;
    color: white;
    content: attr(data-xray-react-element-name);
    display: inline-block;
    font-size: 10px;
    left: 0;
    padding: 0 5px;
    position: absolute;
    top: 0;
  }
  .xray-react-element:hover,
  .xray-react-element.-highlighted {
    background-color: rgba(0, 0, 255, 0.75);
    border-color: cyan;
  }
  .xray-react-element:hover::before,
  .xray-react-element.-highlighted::before {
    color: cyan;
  }
  .xray-react-element:hover::after,
  .xray-react-element.-highlighted::after {
    background-color: cyan;
    color: darkblue;
  }
  .xray-react-element.-highlighted {
    z-index: 99999 !important;
  }
  .xray-react-action-bar {
    align-items: center;
    background-color: darkblue;
    bottom: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    max-height: 100px;
    min-height: 50px;
    overflow-y: auto;
    padding: 0 10px;
    position: fixed;
    width: 100vw;
    z-index: 999999;
  }
  .xray-react-action-bar::-webkit-scrollbar {
    width: 8px;
  }
  .xray-react-action-bar::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
  }
  .xray-react-action-bar::-webkit-scrollbar-thumb {
    background: cyan;
    border-radius: 4px;
  }
  .xray-react-action-bar::-webkit-scrollbar-thumb:hover {
    background: #00ffff;
  }
  .xray-react-actions-wrapper {
    align-items: center;
    display: flex;
    font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    font-style: normal;
    min-height: 50px;
    padding: 5px 0;
    position: sticky;
    top: 0;
    width: 100%;
  }
  #search-component {
    align-self: center;
    background-color: lightgray;
    border-radius: 3px;
    border: 0;
    flex-shrink: 0;
    font-size: 14px;
    height: 30px;
    line-height: 20px;
    margin-right: 15px;
    min-width: 200px;
    outline: 0;
    padding: 5px 10px;
    width: 25%;
  }
  .components-path {
    color: cyan;
    flex: 1;
    font-size: 11px;
    line-height: 1.4;
    min-width: 0;
    overflow-x: auto;
    overflow-y: visible;
    white-space: nowrap;
    word-break: keep-all;
  }
  .components-path::-webkit-scrollbar {
    height: 4px;
  }
  .components-path::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
  }
  .components-path::-webkit-scrollbar-thumb {
    background: cyan;
    border-radius: 2px;
  }
  .components-path::-webkit-scrollbar-thumb:hover {
    background: #00ffff;
  }
  .xray-react-element-temp {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
  }
  .xray-react-element-temp::before {
    display: none !important;
  }
  .xray-react-element-temp::after {
    display: none !important;
  }
  .xray-react-spinner {
    width: 50px;
    height: 50px;
    border: 4px solid rgba(0, 255, 255, 0.3);
    border-top-color: cyan;
    border-radius: 50%;
    animation: xray-react-spin 1s linear infinite;
    position: relative;
    z-index: 1;
  }
  @keyframes xray-react-spin {
    to { transform: rotate(360deg); }
  }
`;

  const actionBar = `
  <div class="xray-react-action-bar">
    <div class="xray-react-actions-wrapper">
      <input id="search-component" type="text" placeholder="Search component by name..."/>
      <div class="components-path"></div>
    </div>
  </div>
`;

  const MAX_FIBER_DEPTH = 50; // Prevent infinite loops

  let projectRoot = null;
  let usageMap = {};
  let importMap = {};
  let projectFilePaths = new Set();
  let normalizedProjectFilePaths = new Set();           // Pre-normalized paths for O(1) lookup
  let componentNameToFilesIndex = new Map();            // componentName -> Set<filePath> for O(1) lookup
  const normalizePathCache = new Map();                 // Memoization cache for normalizePath

  const EXTERNAL_PATTERNS = [
    /node_modules/i,
    /\.next[\/\\]/i,
    /dist[\/\\]/i,
    /build[\/\\]/i,
    /\.git[\/\\]/i,
    /\.cache[\/\\]/i,
    /coverage[\/\\]/i,
  ];

  /**
   * Normalizes a file path for comparison
   * Handles both Unix and Windows paths, relative and absolute
   * Uses memoization cache for repeated calls with same path
   * @param {string} filePath - File path to normalize
   * @returns {string} Normalized path
   */
  const normalizePath = (filePath) => {
    if (!filePath) return '';
    
    const cached = normalizePathCache.get(filePath);
    if (cached !== undefined) return cached;
    
    let normalized = String(filePath).replace(/\\/g, '/');
    normalized = normalized.replace(/^\/+|\/+$/g, '');
    normalized = normalized.toLowerCase();
    
    normalizePathCache.set(filePath, normalized);
    return normalized;
  };

  /**
   * Checks if a file path is external (node_modules, build artifacts, etc.)
   * @param {string} filePath - File path to check
   * @returns {boolean} True if path is external
   */
  const isExternalPath = (filePath) => {
    if (!filePath) return false;
    
    const normalized = normalizePath(filePath);
    
    return EXTERNAL_PATTERNS.some(pattern => pattern.test(normalized));
  };

  /**
   * Detects project root from a file path by finding common base path
   * @param {Array<string>} filePaths - Array of file paths from fibers
   * @returns {string|null} Detected project root or null
   */
  const detectProjectRootFromPaths = (filePaths) => {
    if (!filePaths || filePaths.length === 0) return null;
    
    const projectPaths = filePaths
      .filter(path => path && !isExternalPath(path))
      .map(normalizePath);
    
    if (projectPaths.length === 0) return null;
    
    const pathParts = projectPaths.map(path => path.split('/'));
    const minLength = Math.min(...pathParts.map(parts => parts.length));
    
    let commonParts = [];
    for (let i = 0; i < minLength; i++) {
      const part = pathParts[0][i];
      if (pathParts.every(parts => parts[i] === part)) {
        commonParts.push(part);
      } else {
        break;
      }
    }
    
    if (commonParts.length > 0) {
      return '/' + commonParts.join('/');
    }
    
    const firstPath = projectPaths[0];
    const lastSlash = firstPath.lastIndexOf('/');
    if (lastSlash > 0) {
      return '/' + firstPath.substring(0, lastSlash);
    }
    
    return null;
  };

  /**
   * Removes consecutive duplicate component names from an array
   * @param {Array<string>} path - Array of component names
   * @returns {Array<string>} Array with consecutive duplicates removed
   */
  const removeConsecutiveDuplicates = (path) => {
    if (path.length === 0) return path;
    
    const result = [path[0]];
    for (let i = 1; i < path.length; i++) {
      if (path[i].toLowerCase() !== path[i - 1].toLowerCase()) {
        result.push(path[i]);
      }
    }
    return result;
  };

  /**
   * Handles search input changes to highlight matching components
   * @param {Event} event - Input event
   */
  const handleSearchChange = (event) => {
    const value = event.target.value.toLowerCase();
    const regExp = new RegExp(`^${value}|${value}$`);
    const elements = document.querySelectorAll(`.${xrayReactElemCN}`);
    
    for (const elem of elements) {
      if (value.length >= 2) {
        const searchName = elem.getAttribute('data-xray-react-element-search-name');
        if (searchName && searchName.match(regExp)) {
      elem.classList.add('-highlighted');
        } else {
          elem.classList.remove('-highlighted');
        }
      } else {
        elem.classList.remove('-highlighted');
      }
    }
  };

  /**
   * Creates an overlay element for a React component
   * @param {HTMLElement} elem - The DOM element
   * @param {string} componentName - Name of the React component
   * @returns {Object} Object containing original element and overlay element
   */
  const createElemForComponent = (elem, componentName) => {
    const xrayReactElem = document.createElement('div');
    const boundingClientRect = elem.getBoundingClientRect();
    
    xrayReactElem.className = xrayReactElemCN;
    xrayReactElem.setAttribute('data-xray-react-element-name', componentName);
    xrayReactElem.setAttribute('data-xray-react-element-search-name', componentName.toLowerCase());
    xrayReactElem.style.height = `${boundingClientRect.height}px`;
    xrayReactElem.style.width = `${boundingClientRect.width}px`;
    xrayReactElem.style.top = `${boundingClientRect.top + window.scrollY}px`;
    xrayReactElem.style.left = `${boundingClientRect.left + window.scrollX}px`;
    xrayReactElem.style.zIndex = zIndex;
    
    return { elem, xrayReactElem };
  };

  /**
   * Checks if a name is an HTML element
   * @param {string} name - Component or element name
   * @returns {boolean} True if it's an HTML element
   */
  const isHTMLElement = (name) => {
    if (!name || typeof name !== 'string') return false;
    return HTML_ELEMENTS.has(name.toLowerCase());
  };

  /**
   * Resolves component name from element type and fiber
   * Handles function components, class components, forwardRef, memo, etc.
   * @param {*} elementType - React element type
   * @param {Object} fiber - React fiber node
   * @returns {string|null} Component name or null
   */
  const resolveComponentName = (elementType, fiber = null) => {
    if (!elementType) return null;

    if (typeof elementType === 'function') {
      if (elementType.displayName) {
        return elementType.displayName;
      }
      
      if (elementType.name && elementType.name !== 'Anonymous') {
        return elementType.name;
      }
      
      if (elementType.render) {
        return resolveComponentName(elementType.render, fiber);
      }
      
      if (elementType.$$typeof && elementType.type) {
        return resolveComponentName(elementType.type, fiber);
      }
    }
    
    if (typeof elementType === 'string') {
      return elementType;
    }
    
    if (elementType && elementType.$$typeof) {
      if (elementType.type) {
        return resolveComponentName(elementType.type, fiber);
      }
    }
    
    if (fiber && fiber._debugSource) {
      const fileName = fiber._debugSource.fileName;
      if (fileName) {
        const match = fileName.match(/([^/\\]+)\.(jsx?|tsx?)$/);
        if (match) {
          return match[1];
        }
      }
    }
    
    return null;
  };

  /**
   * Checks if a component belongs to the project based on its source file path
   * @param {Object} fiber - React fiber node
   * @param {string} projectRootPath - Project root path for comparison
   * @param {string} componentName - Optional component name to check against project files
   * @returns {boolean} True if component belongs to project
   */
  const isProjectComponent = (fiber, projectRootPath, componentName = null) => {
    if (!projectRootPath) {
      return true;
    }

    const filePath = fiber?._debugSource?.fileName;

    if (filePath) {
      if (isExternalPath(filePath)) {
        return false;
      }
      
      const normalizedFilePath = normalizePath(filePath);
      const normalizedProjectRoot = normalizePath(projectRootPath);
      
      if (normalizedFilePath.startsWith(normalizedProjectRoot)) {
        return true;
      }
      
      if (!normalizedFilePath.includes('node_modules') && 
          !normalizedFilePath.startsWith('/') &&
          !normalizedFilePath.match(/^[a-z]:/i)) {
        return true;
      }
      
      return false;
    }
    
    if (componentName) {
      const normalizedComponentName = componentName.toLowerCase();
      // O(1) lookup using pre-built index instead of O(m) loop through all files
      if (componentNameToFilesIndex.has(normalizedComponentName)) {
        return true;
      }
    }
    
    return false;
  };

  /**
   * Sets the project root path for filtering
   * @param {string} rootPath - Project root path
   */
  const setProjectRoot = (rootPath) => {
    projectRoot = rootPath ? normalizePath(rootPath) : null;
    
    if (typeof window !== 'undefined' && window.__XRAY_REACT_PROJECT_ROOT__ && !projectRoot) {
      projectRoot = normalizePath(window.__XRAY_REACT_PROJECT_ROOT__);
    }
  };

  /**
   * Sets the usage map for filtering external components
   * @param {Object} map - Usage map (file path -> Array of component names)
   */
  const setUsageMap = (map) => {
    usageMap = map || {};
    
    if (typeof window !== 'undefined' && window.__XRAY_REACT_USAGE_MAP__ && Object.keys(usageMap).length === 0) {
      usageMap = window.__XRAY_REACT_USAGE_MAP__;
    }
    
    if (projectFilePaths.size === 0) {
      projectFilePaths = new Set(Object.keys(usageMap || {}));
    } else {
      Object.keys(usageMap || {}).forEach(filePath => projectFilePaths.add(filePath));
    }
  };

  /**
   * Sets the import map for filtering external components (fallback)
   * @param {Object} map - Import map (file path -> Array of component names)
   */
  const setImportMap = (map) => {
    importMap = map || {};
    
    if (typeof window !== 'undefined' && window.__XRAY_REACT_IMPORT_MAP__ && Object.keys(importMap).length === 0) {
      importMap = window.__XRAY_REACT_IMPORT_MAP__;
    }
    
    Object.keys(importMap || {}).forEach(filePath => projectFilePaths.add(filePath));
  };

  /**
   * Sets the list of all project files found in sourcePath folders
   * @param {Array<string>} files - Array of all file paths found in sourcePath
   */
  const setProjectFiles = (files) => {
    let fileList = files || [];
    
    if (typeof window !== 'undefined' && window.__XRAY_REACT_PROJECT_FILES__ && fileList.length === 0) {
      const globalFiles = window.__XRAY_REACT_PROJECT_FILES__;
      if (Array.isArray(globalFiles)) {
        fileList = [...globalFiles];
      }
    }
    
    projectFilePaths = new Set(fileList);
    
    // Pre-compute normalized paths and component name index for O(1) lookups
    normalizedProjectFilePaths.clear();
    componentNameToFilesIndex.clear();
    
    for (const filePath of fileList) {
      const normalized = normalizePath(filePath);
      normalizedProjectFilePaths.add(normalized);
      
      const pathParts = normalized.split('/');
      const filename = pathParts[pathParts.length - 1] || '';
      const filenameWithoutExt = filename.replace(/\.(tsx?|jsx?)$/, '');
      
      if (filenameWithoutExt) {
        if (!componentNameToFilesIndex.has(filenameWithoutExt)) {
          componentNameToFilesIndex.set(filenameWithoutExt, new Set());
        }
        componentNameToFilesIndex.get(filenameWithoutExt).add(filePath);
      }
      
      for (const part of pathParts.slice(0, -1)) {
        if (part && part.length > 1) {
          if (!componentNameToFilesIndex.has(part)) {
            componentNameToFilesIndex.set(part, new Set());
          }
          componentNameToFilesIndex.get(part).add(filePath);
        }
      }
    }
  };

  /**
   * Attempts to detect project root from fiber tree when server is not available
   * Scans DOM for React fibers and extracts file paths to infer project root
   */
  const detectProjectRootFromDOM = () => {
    if (projectRoot) {
      return;
    }
    
    try {
      const filePaths = [];
      const maxSamples = 50; // Limit samples for performance
      let samples = 0;
      
      const walker = document.createTreeWalker(
        document.body,
        NodeFilter.SHOW_ELEMENT,
        null,
        false
      );
      
      let node;
      while ((node = walker.nextNode()) && samples < maxSamples) {
        const fiberKey = Object.keys(node).find(key =>
          key.startsWith('__reactFiber$') || key.startsWith('__reactInternalInstance$')
        );
        
        if (fiberKey) {
          const fiber = node[fiberKey];
          let currentFiber = fiber;
          let depth = 0;
          
          while (currentFiber && depth < 10) {
            if (currentFiber._debugSource && currentFiber._debugSource.fileName) {
              const filePath = currentFiber._debugSource.fileName;
              if (!isExternalPath(filePath)) {
                filePaths.push(filePath);
              }
            }
            currentFiber = currentFiber.return;
            depth++;
            samples++;
          }
        }
      }
      
      if (filePaths.length > 0) {
        const detectedRoot = detectProjectRootFromPaths(filePaths);
        if (detectedRoot) {
          projectRoot = detectedRoot;
        }
      }
    } catch (error) {
      // Silently fail - project root detection is optional
    }
  };

  /**
   * Checks if an external component is used by any internal component in the seen list
   * Checks usage map first (primary), then import map (fallback)
   * @param {string} componentName - External component name to check
   * @param {Array} seenInternalComponents - Array of internal components seen so far in path
   * @returns {boolean} True if component is used by any seen internal component
   */
  const isUsedByInternalComponents = (componentName, seenInternalComponents) => {
    if (!componentName || seenInternalComponents.length === 0) {
      return false;
    }
    
    if (Object.keys(usageMap).length === 0 && Object.keys(importMap).length === 0) {
      return true;
    }
    
    for (const internalComp of seenInternalComponents) {
      const filePath = internalComp.file;
      if (!filePath) continue;
      
      if (usageMap[filePath] && Array.isArray(usageMap[filePath])) {
        if (usageMap[filePath].includes(componentName)) {
          return true;
        }
      }
      
      if (importMap[filePath] && Array.isArray(importMap[filePath])) {
        if (importMap[filePath].includes(componentName)) {
          return true;
        }
      }
    }
    
    return false;
  };

  /**
   * Traverses the fiber tree to find React components, skipping HTML elements
   * Filters out external library components based on usage/import maps
   * @param {Object} fiber - Starting fiber node
   * @param {number} maxDepth - Maximum depth to traverse
   * @returns {Array} Array of component information objects
   */
  const traverseFiberTree = (fiber, maxDepth = MAX_FIBER_DEPTH) => {
    const allComponents = [];
    const internalComponents = [];
    let currentFiber = fiber;
    let depth = 0;
    // Performance improvements
    const visited = new Set();
    
    while (currentFiber && depth < maxDepth) {
      if (visited.has(currentFiber)) {
        break;
      }
      visited.add(currentFiber);
      
      const elementType = currentFiber.elementType || currentFiber.type;
      
      if (elementType) {
        const componentName = resolveComponentName(elementType, currentFiber);
        
        if (componentName) {
          if (!isHTMLElement(componentName)) {
            const isInternal = isProjectComponent(currentFiber, projectRoot, componentName);
            
            let filePath = null;
            if (currentFiber._debugSource && currentFiber._debugSource.fileName) {
              filePath = currentFiber._debugSource.fileName;
            }
            
            allComponents.push({
              name: componentName,
              fiber: currentFiber,
              elementType: elementType,
              depth: depth,
              isInternal: isInternal,
              file: filePath
            });
            
            if (isInternal) {
              internalComponents.push({
                name: componentName,
                file: filePath
              });
            }
          }
        }
      }
      
      currentFiber = currentFiber.return || currentFiber._owner;
      depth++;
    }
    
    const filteredComponents = [];
    for (const comp of allComponents) {
      if (comp.isInternal) {
        filteredComponents.push({
          name: comp.name,
          fiber: comp.fiber,
          elementType: comp.elementType,
          depth: comp.depth,
          file: comp.file,
          isInternal: comp.isInternal
        });
      } else {
        if (isUsedByInternalComponents(comp.name, internalComponents)) {
          filteredComponents.push({
            name: comp.name,
            fiber: comp.fiber,
            elementType: comp.elementType,
            depth: comp.depth,
            file: comp.file,
            isInternal: comp.isInternal
          });
        }
      }
    }
    
    return filteredComponents;
  };

  /**
   * Gets React component information from a DOM element using React DevTools protocol
   * Supports React 18+ and falls back to legacy detection for older versions
   * Enhanced to skip HTML elements and find actual React components
   * @param {HTMLElement} elem - The DOM element
   * @returns {Object} Object with component name and optional uid
   */
  const getComponentObj = (elem) => {
    if (window.__REACT_DEVTOOLS_GLOBAL_HOOK__) {
      try {
        const fiberKey = Object.keys(elem).find(key => 
          key.startsWith('__reactFiber$') || key.startsWith('__reactInternalInstance$')
        );
        
        if (fiberKey) {
          const fiber = elem[fiberKey];
          const components = traverseFiberTree(fiber);
          
          if (components.length > 0) {
            const firstComponent = components[0];
            const uid = firstComponent.fiber._debugID || 
                       `${firstComponent.fiber.index || ''}${firstComponent.fiber.key || ''}`;
            const reversedHierarchy = components.reverse().map(c => c.name);
            return { 
              name: firstComponent.name, 
              uid,
              hierarchy: reversedHierarchy
            };
          }
        }
      } catch (error) {
        // Silently fall back to legacy detection
      }
    }
    
    for (const key of Object.keys(elem)) {
      if (key.startsWith('__reactInternalInstance$')) {
        const fiberNode = elem[key];
        if (fiberNode) {
          try {
            const components = traverseFiberTree(fiberNode);
            if (components.length > 0) {
              const firstComponent = components[0];
              const reversedHierarchy = components.reverse().map(c => c.name);
              return { 
                name: firstComponent.name,
                uid: `${fiberNode._mountIndex || ''}${fiberNode._mountOrder || ''}`,
                hierarchy: reversedHierarchy
              };
            }
          } catch (error) {
            // Continue to old legacy detection
          }
        }
        
        if (fiberNode && fiberNode._currentElement) {
          const owner = fiberNode._currentElement._owner;
          const fiber = owner && owner._instance;
          if (fiber) {
            const componentName = fiber.constructor.name;
            if (!isHTMLElement(componentName)) {
              return { 
                name: componentName, 
                uid: `${owner._mountIndex || ''}${owner._mountOrder || ''}` 
              };
            }
          }
        } else if (fiberNode) {
          const fiber = fiberNode.return?.stateNode?._reactInternalFiber;
          if (fiber) {
            const componentName = fiber.type?.name || 'Unknown';
            if (componentName !== 'Unknown' && !isHTMLElement(componentName)) {
              return { name: componentName };
            }
          }
        }
      }
    }
    
    const tagName = elem.tagName?.toLowerCase();
    if (tagName && isHTMLElement(tagName)) {
      return { name: tagName };
    }
    
    return {};
  };

  /**
   * Creates a cached function for searching and creating component overlays
   * @returns {Function} Function that creates overlay elements for components
   */
  const searchAndCreateComponentCached = () => {
    // Performance improvements
    const uids = new Set();
    return (elem) => {
      const { name, uid } = getComponentObj(elem);
      
      if (name && name !== 'Unknown') {
        if (uid) {
          if (!uids.has(uid)) {
            uids.add(uid);
            return createElemForComponent(elem, name);
          }
        } else {
          return createElemForComponent(elem, name);
        }
      }
      return null;
    };
  };

  /**
   * Extracts component objects from React fiber tree
   * @param {HTMLElement} elem - DOM element to extract components from
   * @returns {Array} Array of component objects from fiber tree
   */
  const getComponentsFromElement = (elem) => {
    let components = [];
    
    if (window.__REACT_DEVTOOLS_GLOBAL_HOOK__) {
      try {
        const fiberKey = Object.keys(elem).find(key => 
          key.startsWith('__reactFiber$') || key.startsWith('__reactInternalInstance$')
        );
        
        if (fiberKey) {
          const fiber = elem[fiberKey];
          components = traverseFiberTree(fiber);
          // Reverse to get parent -> child order (traversal goes child -> parent)
          components = components.reverse();
        }
      } catch (error) {
        // Silently fall back to legacy detection
      }
    }
    
    if (components.length === 0) {
      for (const key of Object.keys(elem)) {
        if (key.startsWith('__reactInternalInstance$')) {
          const fiberNode = elem[key];
          if (fiberNode) {
            try {
              components = traverseFiberTree(fiberNode);
              // Reverse to get parent -> child order
              components = components.reverse();
              break;
            } catch (error) {
              // Silently continue to next detection method
            }
          }
        }
      }
    }
    
    return components;
  };

  /**
   * Gets component path from DOM traversal (fallback method)
   * @param {HTMLElement} elem - DOM element to start traversal from
   * @returns {Array} Array of component names from DOM traversal
   */
  const getDomPath = (elem) => {
    let currentElem = elem;
    const domPath = [];
    const seenComponentNames = new Set();
    
    while (currentElem && currentElem.parentNode && domPath.length < 20) {
      currentElem = currentElem.parentNode;
      const { name: component } = getComponentObj(currentElem);
      if (component && component !== 'Unknown' && !isHTMLElement(component)) {
        const normalizedName = component.toLowerCase();
        if (!seenComponentNames.has(normalizedName)) {
          seenComponentNames.add(normalizedName);
          domPath.unshift(component);
        }
      }
    }
    
    return domPath;
  };

  /**
   * Builds full component structure path (includes all components)
   * @param {Array} components - Component objects from fiber tree
   * @param {string} currentComponentName - Name of current component
   * @param {HTMLElement} elem - Original DOM element for fallback
   * @returns {string} Full component path structure
   */
  const buildFullStructure = (components, currentComponentName, elem) => {
    if (components.length > 0) {
      const filteredComponents = components.filter(comp => 
        comp.name !== currentComponentName && !isHTMLElement(comp.name)
      );
      
      if (filteredComponents.length > 0) {
        const fullPath = filteredComponents.map(comp => comp.name);
        return [...fullPath, currentComponentName].join(' -> ');
      }
      
      return currentComponentName;
    }
    
    const domPath = getDomPath(elem);
    
    if (domPath.length > 0) {
      return [...domPath, currentComponentName].join(' -> ');
    }
    
    return currentComponentName;
  };

  /**
   * Builds filtered component structure path (only project-owned components)
   * @param {Array} components - Component objects from fiber tree
   * @param {string} currentComponentName - Name of current component
   * @param {HTMLElement} elem - Original DOM element for fallback
   * @returns {string} Filtered component path structure
   */
  const buildFilteredStructure = (components, currentComponentName, elem) => {
    if (components.length > 0) {
      const filteredComponents = components.filter(comp => 
        comp.name !== currentComponentName && !isHTMLElement(comp.name)
      );
      
      const seenComponents = new Set();
      const projectOwnedComponents = [];
      
      for (const comp of filteredComponents) {
        if (!comp.isInternal) {
          continue;
        }

        const normalizedName = comp.name.toLowerCase();
        
        if (comp.file) {
          const normalizedFile = comp.file.toLowerCase();
          const pathParts = normalizedFile.split(/[\/\\]/);
          const filename = pathParts[pathParts.length - 1];
          const filenameWithoutExt = filename.replace(/\.(tsx?|jsx?)$/, '');

          const nameMatchesFile = normalizedFile.includes(`/${normalizedName}`) || 
                                  normalizedFile.includes(`\\${normalizedName}`) ||
                                  normalizedFile.endsWith(`/${normalizedName}.tsx`) ||
                                  normalizedFile.endsWith(`/${normalizedName}.ts`) ||
                                  normalizedFile.endsWith(`/${normalizedName}.jsx`) ||
                                  normalizedFile.endsWith(`/${normalizedName}.js`) ||
                                  normalizedFile.endsWith(`\\${normalizedName}.tsx`) ||
                                  normalizedFile.endsWith(`\\${normalizedName}.ts`) ||
                                  normalizedFile.endsWith(`\\${normalizedName}.jsx`) ||
                                  normalizedFile.endsWith(`\\${normalizedName}.js`) ||
                                  filenameWithoutExt === normalizedName;
          
          // O(1) lookup using pre-built index instead of O(m) spread + some + includes
          const inProjectFilePaths = componentNameToFilesIndex.has(normalizedName);

          if (!nameMatchesFile && !inProjectFilePaths) {
            continue;
          }
          
          // Deduplicate by component identity: use normalized name + normalized file path as unique key
          // This ensures that:
          // 1. The same component (same name, same file) appearing multiple times is only shown once
          //    (e.g., WebAppLayout -> WebAppLayout -> WebAppLayout)
          // 2. Different components with the same name but different files are both shown
          //    (e.g., components_left/Parent.jsx vs components_right/Parent.jsx)
          const normalizedFilePath = normalizePath(comp.file);
          const componentKey = `${normalizedName}:${normalizedFilePath}`;
          
          if (seenComponents.has(componentKey)) {
            continue;
          }
          
          seenComponents.add(componentKey);
          projectOwnedComponents.push(comp);
        } else {
          const componentKey = normalizedName;
          
          if (seenComponents.has(componentKey)) {
            continue;
          }

          seenComponents.add(componentKey);
          projectOwnedComponents.push(comp);
        }
      }

      if (projectOwnedComponents.length > 0) {
        const filteredPath = projectOwnedComponents.map(comp => comp.name);
        const currentNameLower = currentComponentName.toLowerCase();
        const pathContainsCurrent = filteredPath.some(name => name.toLowerCase() === currentNameLower);
        
        let finalPath;
        if (!pathContainsCurrent) {
          finalPath = [...filteredPath, currentComponentName];
        } else {
          finalPath = filteredPath;
        }
        
        // Remove consecutive duplicates of the same components before joining
        finalPath = removeConsecutiveDuplicates(finalPath);
        return finalPath.join(' -> ');
      }
      
      return currentComponentName;
    }
    
    const domPath = getDomPath(elem);
    
    if (domPath.length > 0) {
      const currentNameLower = currentComponentName.toLowerCase();
      const pathContainsCurrent = domPath.some(name => name.toLowerCase() === currentNameLower);
      
      let finalPath;
      if (!pathContainsCurrent) {
        finalPath = [...domPath, currentComponentName];
      } else {
        finalPath = domPath;
      }
      
      // Remove consecutive duplicates of the same components before joining
      finalPath = removeConsecutiveDuplicates(finalPath);
      return finalPath.join(' -> ');
    }
    
    return currentComponentName;
  };

  /**
   * Adds the absolute component path to an overlay element
   * Uses fiber-based hierarchy for accurate React component paths
   * @param {HTMLElement} elem - Original DOM element
   * @param {HTMLElement} xrayReactElem - Overlay element
   */
  const addAbsoluteComponentPath = (elem, xrayReactElem) => {
    const currentComponentName = xrayReactElem.getAttribute('data-xray-react-element-name') || '';
    
    const components = getComponentsFromElement(elem);
    
    const fullStructure = buildFullStructure(components, currentComponentName, elem);
    const filteredStructure = buildFilteredStructure(components, currentComponentName, elem);
    
    xrayReactElem.setAttribute(xrayReactCompPathAttr, fullStructure);
    xrayReactElem.setAttribute(xrayReactFilteredCompPathAttr, filteredStructure);
  };

  /**
   * Handles mouseover events on overlay elements
   * @param {Event} event - Mouseover event
   */
  const onXrayReactMouseover = (event) => {
    const { target } = event;
    if (target.classList.contains(xrayReactElemCN)) {
      const componentsPath = target.getAttribute(xrayReactFilteredCompPathAttr) || 
                             target.getAttribute(xrayReactCompPathAttr) || '';
      const pathElement = document.querySelector('.xray-react-actions-wrapper .components-path');
      if (pathElement) {
        pathElement.innerHTML = componentsPath;
      }
    }
  };

  /**
   * Toggles the xray-react overlay on/off
   */
  const toggleXrayReact = () => {
    const body = document.body;
    
    if (body.classList.contains('xray-react-enabled')) {
      body.classList.remove('xray-react-enabled');
      const xrayReactElementsWrapper = document.querySelector(`.${xrayReactWrapperCN}`);
      const xrayReactActionBar = document.querySelector('.xray-react-action-bar');
      const xrayReactStyleTag = document.querySelector('.xray-react-style-tag');
      const tempElements = document.querySelectorAll('.xray-react-element-temp');
      
      if (xrayReactElementsWrapper) xrayReactElementsWrapper.remove();
      if (xrayReactActionBar) xrayReactActionBar.remove();
      if (xrayReactStyleTag) xrayReactStyleTag.remove();
      tempElements.forEach(el => el.remove());
      
      body.removeEventListener('mouseover', onXrayReactMouseover);
    } else {
      body.classList.add('xray-react-enabled');
      
      let styleElement = document.querySelector('.xray-react-style-tag');
      if (!styleElement) {
        styleElement = document.createElement('style');
        styleElement.className = 'xray-react-style-tag';
        styleElement.textContent = css;
        document.head.appendChild(styleElement);
      }
      
      const existingActionBar = document.querySelector('.xray-react-action-bar');
      if (!existingActionBar) {
        body.insertAdjacentHTML('beforeend', actionBar);
      }
      
      const searchInput = document.getElementById('search-component');
      if (searchInput) {
        searchInput.addEventListener('input', handleSearchChange);
      }
      body.addEventListener('mouseover', onXrayReactMouseover);
      
      const existingWrapper = document.querySelector(`.${xrayReactWrapperCN}`);
      if (existingWrapper) {
        existingWrapper.remove();
      }
      
      const xrayReactElementsWrapper = document.createElement('div');
      xrayReactElementsWrapper.className = xrayReactWrapperCN;
      body.append(xrayReactElementsWrapper);
      
      const existingLoading = document.querySelectorAll('.xray-react-element-temp');
      existingLoading.forEach(el => el.remove());
      
      const loadingElement = document.createElement('div');
      loadingElement.className = 'xray-react-element xray-react-element-temp';
      loadingElement.style.height = `${window.innerHeight}px`;
      loadingElement.style.width = `${window.innerWidth}px`;
      loadingElement.style.top = `${window.scrollY}px`;
      loadingElement.style.left = `${window.scrollX}px`;
      loadingElement.style.zIndex = '10000';
      loadingElement.innerHTML = '<div class="xray-react-spinner xray-react-element-temp"></div>';
      xrayReactElementsWrapper.appendChild(loadingElement);
      
      // Performance improvements
      const processElementsAsync = () => {
        const xrayReactObjects = [];
        const searchAndCreateComponent = searchAndCreateComponentCached();
        const allElements = Array.from(body.getElementsByTagName('*')).filter(elem => {
          return !elem.classList.contains('xray-react-element-temp') &&
                 !elem.closest('.xray-react-action-bar') &&
                 !elem.closest(`.${xrayReactWrapperCN}`);
        });
        const batchSize = 20;
        let index = 0;
        
        const processBatch = () => {
          const endIndex = Math.min(index + batchSize, allElements.length);
          
          for (let i = index; i < endIndex; i++) {
            const elem = allElements[i];
            const xrayReactObj = searchAndCreateComponent(elem);
            if (xrayReactObj) {
              xrayReactObjects.push(xrayReactObj);
            }
          }
          
          index = endIndex;
          
          if (index < allElements.length) {
            setTimeout(processBatch, 1);
          } else {
            let pathIndex = 0;
            const pathBatchSize = 10;
            
            const processPaths = () => {
              const endIndex = Math.min(pathIndex + pathBatchSize, xrayReactObjects.length);
              
              for (let i = pathIndex; i < endIndex; i++) {
                const { elem, xrayReactElem } = xrayReactObjects[i];
                addAbsoluteComponentPath(elem, xrayReactElem);
              }
              
              pathIndex = endIndex;
              
              if (pathIndex < xrayReactObjects.length) {
                setTimeout(processPaths, 1);
              } else {
                const wrapper = document.querySelector(`.${xrayReactWrapperCN}`);
                if (wrapper) {
                  const tempElements = wrapper.querySelectorAll('.xray-react-element-temp');
                  tempElements.forEach(el => el.remove());
                  wrapper.append(...xrayReactObjects.map(obj => obj.xrayReactElem));
                }
              }
            };
            
            setTimeout(processPaths, 1);
          }
        };
        
        setTimeout(processBatch, 1);
      };
      
      processElementsAsync();
    }
  };

  /**
   * Keydown event handler for xray-react shortcuts
   * Matches xray-rails: Cmd+Shift+X (Mac) / Ctrl+Shift+X (Windows/Linux)
   */
  let keydownHandler = null;
  let isHandlerRegistered = false;

  const createKeydownHandler = () => {
    return (event) => {
      if (event.key === 'Escape') {
        const body = document.body;
        if (body && body.classList.contains('xray-react-enabled')) {
          toggleXrayReact();
          event.preventDefault();
        }
        return;
      }
      
      const isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;
      const isMetaOrCtrl = isMac ? event.metaKey : event.ctrlKey;
      const isShift = event.shiftKey;
      const isX = event.key === 'x' || event.key === 'X' || event.keyCode === 88;
      
      if (isMetaOrCtrl && isShift && isX) {
        toggleXrayReact();
        event.preventDefault();
        event.stopPropagation();
      }
    };
  };

  /**
   * Handles keyboard shortcut to toggle xray-react
   * Ensures the listener is only registered once
   */
  const handleXrayReactToggle = () => {
    if (isHandlerRegistered) {
      return;
    }
    
    if (!keydownHandler) {
      keydownHandler = createKeydownHandler();
    }
    
    document.addEventListener('keydown', keydownHandler, true);
    isHandlerRegistered = true;
  };

  /**
   * Enables xray-react functionality
   */
  const enableXrayReact = () => {
    if (!projectRoot) {
      if (typeof window !== 'undefined' && window.__XRAY_REACT_PROJECT_ROOT__) {
        projectRoot = normalizePath(window.__XRAY_REACT_PROJECT_ROOT__);
      } else {
        setTimeout(() => {
          detectProjectRootFromDOM();
        }, 1000);
      }
    }
    
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', handleXrayReactToggle);
    } else {
      handleXrayReactToggle();
    }
  };

  // Expose functions globally for client bundle to use
  if (typeof window !== 'undefined') {
    window.xrayReactSetProjectRoot = setProjectRoot;
    window.xrayReactSetUsageMap = setUsageMap;
    window.xrayReactSetImportMap = setImportMap;
    window.xrayReactSetProjectFiles = setProjectFiles;
  }

  enableXrayReact();

})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoieHJheS1yZWFjdC11aS5taW4uanMiLCJzb3VyY2VzIjpbIi4uL3NyYy9jb25zdGFudHMuanMiLCIuLi9zcmMvY3NzLmpzIiwiLi4vc3JjL3BhcnRpYWxzLmpzIiwiLi4vc3JjL3VpLXV0aWxzLmpzIiwiLi4vbGliL3hyYXktcmVhY3QtdWkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHhyYXlSZWFjdEVsZW1DTiA9ICd4cmF5LXJlYWN0LWVsZW1lbnQnO1xuZXhwb3J0IGNvbnN0IHhyYXlSZWFjdFdyYXBwZXJDTiA9ICd4cmF5LXJlYWN0LWVsZW1lbnRzLXdyYXBwZXInO1xuZXhwb3J0IGNvbnN0IHhyYXlSZWFjdENvbXBQYXRoQXR0ciA9ICdkYXRhLXhyYXktcmVhY3QtY29tcG9uZW50cy1wYXRoJztcbmV4cG9ydCBjb25zdCB4cmF5UmVhY3RGaWx0ZXJlZENvbXBQYXRoQXR0ciA9ICdkYXRhLXhyYXktcmVhY3QtZmlsdGVyZWQtY29tcG9uZW50cy1wYXRoJztcbmV4cG9ydCBjb25zdCB6SW5kZXggPSAxMDAwMDtcblxuZXhwb3J0IGNvbnN0IEhUTUxfRUxFTUVOVFMgPSBuZXcgU2V0KFtcbiAgJ2RpdicsICdzcGFuJywgJ2Zvcm0nLCAnYnV0dG9uJywgJ2lucHV0JywgJ2EnLCAnaW1nJywgJ3AnLCAnaDEnLCAnaDInLCAnaDMnLCAnaDQnLCAnaDUnLCAnaDYnLFxuICAndWwnLCAnbGknLCAnb2wnLCAndGFibGUnLCAndHInLCAndGQnLCAndGgnLCAndGhlYWQnLCAndGJvZHknLCAndGZvb3QnLFxuICAnc2VjdGlvbicsICdhcnRpY2xlJywgJ2hlYWRlcicsICdmb290ZXInLCAnbmF2JywgJ21haW4nLCAnYXNpZGUnLFxuICAnbGFiZWwnLCAnc2VsZWN0JywgJ29wdGlvbicsICd0ZXh0YXJlYScsICdmaWVsZHNldCcsICdsZWdlbmQnLFxuICAnYnInLCAnaHInLCAnc3Ryb25nJywgJ2VtJywgJ2InLCAnaScsICd1JywgJ3NtYWxsJywgJ3N1YicsICdzdXAnLFxuICAnZGwnLCAnZHQnLCAnZGQnLCAncHJlJywgJ2NvZGUnLCAnYmxvY2txdW90ZScsICdjaXRlJyxcbiAgJ2NhbnZhcycsICdzdmcnLCAncGF0aCcsICdjaXJjbGUnLCAncmVjdCcsICdsaW5lJywgJ3BvbHlsaW5lJywgJ3BvbHlnb24nLFxuICAnaWZyYW1lJywgJ2VtYmVkJywgJ29iamVjdCcsICd2aWRlbycsICdhdWRpbycsICdzb3VyY2UnLCAndHJhY2snLFxuICAnbWV0YScsICdsaW5rJywgJ3N0eWxlJywgJ3NjcmlwdCcsICdub3NjcmlwdCcsICd0ZW1wbGF0ZSdcbl0pO1xuIiwiZXhwb3J0IGRlZmF1bHQgYFxuICAueHJheS1yZWFjdC1lbmFibGVkIHtcbiAgICBtYXJnaW4tYm90dG9tOiA1MHB4ICFpbXBvcnRhbnQ7XG4gIH1cbiAgLnhyYXktcmVhY3QtZWxlbWVudHMtd3JhcHBlciB7XG4gICAgYm90dG9tOiAwO1xuICAgIGZvbnQtZmFtaWx5OiBcIlNlZ29lIFVJXCIsIFJvYm90bywgXCJIZWx2ZXRpY2EgTmV1ZVwiLCBBcmlhbCwgc2Fucy1zZXJpZjtcbiAgICBmb250LXN0eWxlOiBub3JtYWw7XG4gICAgbGVmdDogMDtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgcmlnaHQ6IDA7XG4gICAgdG9wOiAwO1xuICB9XG4gIC54cmF5LXJlYWN0LWVsZW1lbnQge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMjU1LCAwLjI1KTtcbiAgICBib3JkZXI6IDJweCBzb2xpZCBibHVlO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIH1cbiAgLnhyYXktcmVhY3QtZWxlbWVudDo6YmVmb3JlIHtcbiAgICBhbGlnbi1zZWxmOiBjZW50ZXI7XG4gICAgY29sb3I6IHdoaXRlO1xuICAgIGNvbnRlbnQ6IGF0dHIoZGF0YS14cmF5LXJlYWN0LWVsZW1lbnQtbmFtZSk7XG4gICAgZGlzcGxheTogdGFibGU7XG4gICAgZm9udC1zaXplOiAxOHB4O1xuICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG4gICAgbGVmdDogNTAlO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICByaWdodDogMDtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgdG9wOiA1MCU7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XG4gIH1cbiAgLnhyYXktcmVhY3QtZWxlbWVudDo6YWZ0ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6IGRhcmtibHVlO1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgICBjb250ZW50OiBhdHRyKGRhdGEteHJheS1yZWFjdC1lbGVtZW50LW5hbWUpO1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICBmb250LXNpemU6IDEwcHg7XG4gICAgbGVmdDogMDtcbiAgICBwYWRkaW5nOiAwIDVweDtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICB9XG4gIC54cmF5LXJlYWN0LWVsZW1lbnQ6aG92ZXIsXG4gIC54cmF5LXJlYWN0LWVsZW1lbnQuLWhpZ2hsaWdodGVkIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDI1NSwgMC43NSk7XG4gICAgYm9yZGVyLWNvbG9yOiBjeWFuO1xuICB9XG4gIC54cmF5LXJlYWN0LWVsZW1lbnQ6aG92ZXI6OmJlZm9yZSxcbiAgLnhyYXktcmVhY3QtZWxlbWVudC4taGlnaGxpZ2h0ZWQ6OmJlZm9yZSB7XG4gICAgY29sb3I6IGN5YW47XG4gIH1cbiAgLnhyYXktcmVhY3QtZWxlbWVudDpob3Zlcjo6YWZ0ZXIsXG4gIC54cmF5LXJlYWN0LWVsZW1lbnQuLWhpZ2hsaWdodGVkOjphZnRlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogY3lhbjtcbiAgICBjb2xvcjogZGFya2JsdWU7XG4gIH1cbiAgLnhyYXktcmVhY3QtZWxlbWVudC4taGlnaGxpZ2h0ZWQge1xuICAgIHotaW5kZXg6IDk5OTk5ICFpbXBvcnRhbnQ7XG4gIH1cbiAgLnhyYXktcmVhY3QtYWN0aW9uLWJhciB7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBkYXJrYmx1ZTtcbiAgICBib3R0b206IDA7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIG1heC1oZWlnaHQ6IDEwMHB4O1xuICAgIG1pbi1oZWlnaHQ6IDUwcHg7XG4gICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICBwYWRkaW5nOiAwIDEwcHg7XG4gICAgcG9zaXRpb246IGZpeGVkO1xuICAgIHdpZHRoOiAxMDB2dztcbiAgICB6LWluZGV4OiA5OTk5OTk7XG4gIH1cbiAgLnhyYXktcmVhY3QtYWN0aW9uLWJhcjo6LXdlYmtpdC1zY3JvbGxiYXIge1xuICAgIHdpZHRoOiA4cHg7XG4gIH1cbiAgLnhyYXktcmVhY3QtYWN0aW9uLWJhcjo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2sge1xuICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTtcbiAgfVxuICAueHJheS1yZWFjdC1hY3Rpb24tYmFyOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7XG4gICAgYmFja2dyb3VuZDogY3lhbjtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gIH1cbiAgLnhyYXktcmVhY3QtYWN0aW9uLWJhcjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWI6aG92ZXIge1xuICAgIGJhY2tncm91bmQ6ICMwMGZmZmY7XG4gIH1cbiAgLnhyYXktcmVhY3QtYWN0aW9ucy13cmFwcGVyIHtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZm9udC1mYW1pbHk6IFwiU2Vnb2UgVUlcIiwgUm9ib3RvLCBcIkhlbHZldGljYSBOZXVlXCIsIEFyaWFsLCBzYW5zLXNlcmlmO1xuICAgIGZvbnQtc3R5bGU6IG5vcm1hbDtcbiAgICBtaW4taGVpZ2h0OiA1MHB4O1xuICAgIHBhZGRpbmc6IDVweCAwO1xuICAgIHBvc2l0aW9uOiBzdGlja3k7XG4gICAgdG9wOiAwO1xuICAgIHdpZHRoOiAxMDAlO1xuICB9XG4gICNzZWFyY2gtY29tcG9uZW50IHtcbiAgICBhbGlnbi1zZWxmOiBjZW50ZXI7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogbGlnaHRncmF5O1xuICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICBib3JkZXI6IDA7XG4gICAgZmxleC1zaHJpbms6IDA7XG4gICAgZm9udC1zaXplOiAxNHB4O1xuICAgIGhlaWdodDogMzBweDtcbiAgICBsaW5lLWhlaWdodDogMjBweDtcbiAgICBtYXJnaW4tcmlnaHQ6IDE1cHg7XG4gICAgbWluLXdpZHRoOiAyMDBweDtcbiAgICBvdXRsaW5lOiAwO1xuICAgIHBhZGRpbmc6IDVweCAxMHB4O1xuICAgIHdpZHRoOiAyNSU7XG4gIH1cbiAgLmNvbXBvbmVudHMtcGF0aCB7XG4gICAgY29sb3I6IGN5YW47XG4gICAgZmxleDogMTtcbiAgICBmb250LXNpemU6IDExcHg7XG4gICAgbGluZS1oZWlnaHQ6IDEuNDtcbiAgICBtaW4td2lkdGg6IDA7XG4gICAgb3ZlcmZsb3cteDogYXV0bztcbiAgICBvdmVyZmxvdy15OiB2aXNpYmxlO1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgd29yZC1icmVhazoga2VlcC1hbGw7XG4gIH1cbiAgLmNvbXBvbmVudHMtcGF0aDo6LXdlYmtpdC1zY3JvbGxiYXIge1xuICAgIGhlaWdodDogNHB4O1xuICB9XG4gIC5jb21wb25lbnRzLXBhdGg6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHtcbiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7XG4gIH1cbiAgLmNvbXBvbmVudHMtcGF0aDo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIge1xuICAgIGJhY2tncm91bmQ6IGN5YW47XG4gICAgYm9yZGVyLXJhZGl1czogMnB4O1xuICB9XG4gIC5jb21wb25lbnRzLXBhdGg6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiAjMDBmZmZmO1xuICB9XG4gIC54cmF5LXJlYWN0LWVsZW1lbnQtdGVtcCB7XG4gICAgZGlzcGxheTogZmxleCAhaW1wb3J0YW50O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXIgIWltcG9ydGFudDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlciAhaW1wb3J0YW50O1xuICB9XG4gIC54cmF5LXJlYWN0LWVsZW1lbnQtdGVtcDo6YmVmb3JlIHtcbiAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG4gIH1cbiAgLnhyYXktcmVhY3QtZWxlbWVudC10ZW1wOjphZnRlciB7XG4gICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xuICB9XG4gIC54cmF5LXJlYWN0LXNwaW5uZXIge1xuICAgIHdpZHRoOiA1MHB4O1xuICAgIGhlaWdodDogNTBweDtcbiAgICBib3JkZXI6IDRweCBzb2xpZCByZ2JhKDAsIDI1NSwgMjU1LCAwLjMpO1xuICAgIGJvcmRlci10b3AtY29sb3I6IGN5YW47XG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgIGFuaW1hdGlvbjogeHJheS1yZWFjdC1zcGluIDFzIGxpbmVhciBpbmZpbml0ZTtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgei1pbmRleDogMTtcbiAgfVxuICBAa2V5ZnJhbWVzIHhyYXktcmVhY3Qtc3BpbiB7XG4gICAgdG8geyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB9XG4gIH1cbmA7XG4iLCJpbXBvcnQgY3NzIGZyb20gJy4vY3NzLmpzJztcblxuZXhwb3J0IGNvbnN0IHN0eWxlVGFnID0gYDxzdHlsZSBjbGFzcz1cInhyYXktcmVhY3Qtc3R5bGUtdGFnXCI+JHtjc3N9PC9zdHlsZT5gO1xuZXhwb3J0IGNvbnN0IGFjdGlvbkJhciA9IGBcbiAgPGRpdiBjbGFzcz1cInhyYXktcmVhY3QtYWN0aW9uLWJhclwiPlxuICAgIDxkaXYgY2xhc3M9XCJ4cmF5LXJlYWN0LWFjdGlvbnMtd3JhcHBlclwiPlxuICAgICAgPGlucHV0IGlkPVwic2VhcmNoLWNvbXBvbmVudFwiIHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJTZWFyY2ggY29tcG9uZW50IGJ5IG5hbWUuLi5cIi8+XG4gICAgICA8ZGl2IGNsYXNzPVwiY29tcG9uZW50cy1wYXRoXCI+PC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuYDtcbiIsImltcG9ydCAqIGFzIGNvbnN0YW50cyBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBzdHlsZVRhZywgYWN0aW9uQmFyIH0gZnJvbSAnLi9wYXJ0aWFscy5qcyc7XG5pbXBvcnQgY3NzIGZyb20gJy4vY3NzLmpzJztcblxuY29uc3QgTUFYX0ZJQkVSX0RFUFRIID0gNTA7IC8vIFByZXZlbnQgaW5maW5pdGUgbG9vcHNcblxubGV0IHByb2plY3RSb290ID0gbnVsbDtcbmxldCB1c2FnZU1hcCA9IHt9O1xubGV0IGltcG9ydE1hcCA9IHt9O1xubGV0IHByb2plY3RGaWxlUGF0aHMgPSBuZXcgU2V0KCk7XG5sZXQgbm9ybWFsaXplZFByb2plY3RGaWxlUGF0aHMgPSBuZXcgU2V0KCk7ICAgICAgICAgICAvLyBQcmUtbm9ybWFsaXplZCBwYXRocyBmb3IgTygxKSBsb29rdXBcbmxldCBjb21wb25lbnROYW1lVG9GaWxlc0luZGV4ID0gbmV3IE1hcCgpOyAgICAgICAgICAgIC8vIGNvbXBvbmVudE5hbWUgLT4gU2V0PGZpbGVQYXRoPiBmb3IgTygxKSBsb29rdXBcbmNvbnN0IG5vcm1hbGl6ZVBhdGhDYWNoZSA9IG5ldyBNYXAoKTsgICAgICAgICAgICAgICAgIC8vIE1lbW9pemF0aW9uIGNhY2hlIGZvciBub3JtYWxpemVQYXRoXG5cbmNvbnN0IEVYVEVSTkFMX1BBVFRFUk5TID0gW1xuICAvbm9kZV9tb2R1bGVzL2ksXG4gIC9cXC5uZXh0W1xcL1xcXFxdL2ksXG4gIC9kaXN0W1xcL1xcXFxdL2ksXG4gIC9idWlsZFtcXC9cXFxcXS9pLFxuICAvXFwuZ2l0W1xcL1xcXFxdL2ksXG4gIC9cXC5jYWNoZVtcXC9cXFxcXS9pLFxuICAvY292ZXJhZ2VbXFwvXFxcXF0vaSxcbl07XG5cbi8qKlxuICogTm9ybWFsaXplcyBhIGZpbGUgcGF0aCBmb3IgY29tcGFyaXNvblxuICogSGFuZGxlcyBib3RoIFVuaXggYW5kIFdpbmRvd3MgcGF0aHMsIHJlbGF0aXZlIGFuZCBhYnNvbHV0ZVxuICogVXNlcyBtZW1vaXphdGlvbiBjYWNoZSBmb3IgcmVwZWF0ZWQgY2FsbHMgd2l0aCBzYW1lIHBhdGhcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlUGF0aCAtIEZpbGUgcGF0aCB0byBub3JtYWxpemVcbiAqIEByZXR1cm5zIHtzdHJpbmd9IE5vcm1hbGl6ZWQgcGF0aFxuICovXG5jb25zdCBub3JtYWxpemVQYXRoID0gKGZpbGVQYXRoKSA9PiB7XG4gIGlmICghZmlsZVBhdGgpIHJldHVybiAnJztcbiAgXG4gIGNvbnN0IGNhY2hlZCA9IG5vcm1hbGl6ZVBhdGhDYWNoZS5nZXQoZmlsZVBhdGgpO1xuICBpZiAoY2FjaGVkICE9PSB1bmRlZmluZWQpIHJldHVybiBjYWNoZWQ7XG4gIFxuICBsZXQgbm9ybWFsaXplZCA9IFN0cmluZyhmaWxlUGF0aCkucmVwbGFjZSgvXFxcXC9nLCAnLycpO1xuICBub3JtYWxpemVkID0gbm9ybWFsaXplZC5yZXBsYWNlKC9eXFwvK3xcXC8rJC9nLCAnJyk7XG4gIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVkLnRvTG93ZXJDYXNlKCk7XG4gIFxuICBub3JtYWxpemVQYXRoQ2FjaGUuc2V0KGZpbGVQYXRoLCBub3JtYWxpemVkKTtcbiAgcmV0dXJuIG5vcm1hbGl6ZWQ7XG59O1xuXG4vKipcbiAqIENoZWNrcyBpZiBhIGZpbGUgcGF0aCBpcyBleHRlcm5hbCAobm9kZV9tb2R1bGVzLCBidWlsZCBhcnRpZmFjdHMsIGV0Yy4pXG4gKiBAcGFyYW0ge3N0cmluZ30gZmlsZVBhdGggLSBGaWxlIHBhdGggdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHBhdGggaXMgZXh0ZXJuYWxcbiAqL1xuY29uc3QgaXNFeHRlcm5hbFBhdGggPSAoZmlsZVBhdGgpID0+IHtcbiAgaWYgKCFmaWxlUGF0aCkgcmV0dXJuIGZhbHNlO1xuICBcbiAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVBhdGgoZmlsZVBhdGgpO1xuICBcbiAgcmV0dXJuIEVYVEVSTkFMX1BBVFRFUk5TLnNvbWUocGF0dGVybiA9PiBwYXR0ZXJuLnRlc3Qobm9ybWFsaXplZCkpO1xufTtcblxuLyoqXG4gKiBEZXRlY3RzIHByb2plY3Qgcm9vdCBmcm9tIGEgZmlsZSBwYXRoIGJ5IGZpbmRpbmcgY29tbW9uIGJhc2UgcGF0aFxuICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBmaWxlUGF0aHMgLSBBcnJheSBvZiBmaWxlIHBhdGhzIGZyb20gZmliZXJzXG4gKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IERldGVjdGVkIHByb2plY3Qgcm9vdCBvciBudWxsXG4gKi9cbmNvbnN0IGRldGVjdFByb2plY3RSb290RnJvbVBhdGhzID0gKGZpbGVQYXRocykgPT4ge1xuICBpZiAoIWZpbGVQYXRocyB8fCBmaWxlUGF0aHMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcbiAgXG4gIGNvbnN0IHByb2plY3RQYXRocyA9IGZpbGVQYXRoc1xuICAgIC5maWx0ZXIocGF0aCA9PiBwYXRoICYmICFpc0V4dGVybmFsUGF0aChwYXRoKSlcbiAgICAubWFwKG5vcm1hbGl6ZVBhdGgpO1xuICBcbiAgaWYgKHByb2plY3RQYXRocy5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuICBcbiAgY29uc3QgcGF0aFBhcnRzID0gcHJvamVjdFBhdGhzLm1hcChwYXRoID0+IHBhdGguc3BsaXQoJy8nKSk7XG4gIGNvbnN0IG1pbkxlbmd0aCA9IE1hdGgubWluKC4uLnBhdGhQYXJ0cy5tYXAocGFydHMgPT4gcGFydHMubGVuZ3RoKSk7XG4gIFxuICBsZXQgY29tbW9uUGFydHMgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBtaW5MZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHBhcnQgPSBwYXRoUGFydHNbMF1baV07XG4gICAgaWYgKHBhdGhQYXJ0cy5ldmVyeShwYXJ0cyA9PiBwYXJ0c1tpXSA9PT0gcGFydCkpIHtcbiAgICAgIGNvbW1vblBhcnRzLnB1c2gocGFydCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBcbiAgaWYgKGNvbW1vblBhcnRzLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gJy8nICsgY29tbW9uUGFydHMuam9pbignLycpO1xuICB9XG4gIFxuICBjb25zdCBmaXJzdFBhdGggPSBwcm9qZWN0UGF0aHNbMF07XG4gIGNvbnN0IGxhc3RTbGFzaCA9IGZpcnN0UGF0aC5sYXN0SW5kZXhPZignLycpO1xuICBpZiAobGFzdFNsYXNoID4gMCkge1xuICAgIHJldHVybiAnLycgKyBmaXJzdFBhdGguc3Vic3RyaW5nKDAsIGxhc3RTbGFzaCk7XG4gIH1cbiAgXG4gIHJldHVybiBudWxsO1xufTtcblxuLyoqXG4gKiBSZW1vdmVzIGNvbnNlY3V0aXZlIGR1cGxpY2F0ZSBjb21wb25lbnQgbmFtZXMgZnJvbSBhbiBhcnJheVxuICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBwYXRoIC0gQXJyYXkgb2YgY29tcG9uZW50IG5hbWVzXG4gKiBAcmV0dXJucyB7QXJyYXk8c3RyaW5nPn0gQXJyYXkgd2l0aCBjb25zZWN1dGl2ZSBkdXBsaWNhdGVzIHJlbW92ZWRcbiAqL1xuY29uc3QgcmVtb3ZlQ29uc2VjdXRpdmVEdXBsaWNhdGVzID0gKHBhdGgpID0+IHtcbiAgaWYgKHBhdGgubGVuZ3RoID09PSAwKSByZXR1cm4gcGF0aDtcbiAgXG4gIGNvbnN0IHJlc3VsdCA9IFtwYXRoWzBdXTtcbiAgZm9yIChsZXQgaSA9IDE7IGkgPCBwYXRoLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHBhdGhbaV0udG9Mb3dlckNhc2UoKSAhPT0gcGF0aFtpIC0gMV0udG9Mb3dlckNhc2UoKSkge1xuICAgICAgcmVzdWx0LnB1c2gocGF0aFtpXSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG4vKipcbiAqIEhhbmRsZXMgc2VhcmNoIGlucHV0IGNoYW5nZXMgdG8gaGlnaGxpZ2h0IG1hdGNoaW5nIGNvbXBvbmVudHNcbiAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IC0gSW5wdXQgZXZlbnRcbiAqL1xuY29uc3QgaGFuZGxlU2VhcmNoQ2hhbmdlID0gKGV2ZW50KSA9PiB7XG4gIGNvbnN0IHZhbHVlID0gZXZlbnQudGFyZ2V0LnZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gIGNvbnN0IHJlZ0V4cCA9IG5ldyBSZWdFeHAoYF4ke3ZhbHVlfXwke3ZhbHVlfSRgKTtcbiAgY29uc3QgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuJHtjb25zdGFudHMueHJheVJlYWN0RWxlbUNOfWApO1xuICBcbiAgZm9yIChjb25zdCBlbGVtIG9mIGVsZW1lbnRzKSB7XG4gICAgaWYgKHZhbHVlLmxlbmd0aCA+PSAyKSB7XG4gICAgICBjb25zdCBzZWFyY2hOYW1lID0gZWxlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEteHJheS1yZWFjdC1lbGVtZW50LXNlYXJjaC1uYW1lJyk7XG4gICAgICBpZiAoc2VhcmNoTmFtZSAmJiBzZWFyY2hOYW1lLm1hdGNoKHJlZ0V4cCkpIHtcbiAgICBlbGVtLmNsYXNzTGlzdC5hZGQoJy1oaWdobGlnaHRlZCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKCctaGlnaGxpZ2h0ZWQnKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKCctaGlnaGxpZ2h0ZWQnKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBvdmVybGF5IGVsZW1lbnQgZm9yIGEgUmVhY3QgY29tcG9uZW50XG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtIC0gVGhlIERPTSBlbGVtZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gY29tcG9uZW50TmFtZSAtIE5hbWUgb2YgdGhlIFJlYWN0IGNvbXBvbmVudFxuICogQHJldHVybnMge09iamVjdH0gT2JqZWN0IGNvbnRhaW5pbmcgb3JpZ2luYWwgZWxlbWVudCBhbmQgb3ZlcmxheSBlbGVtZW50XG4gKi9cbmNvbnN0IGNyZWF0ZUVsZW1Gb3JDb21wb25lbnQgPSAoZWxlbSwgY29tcG9uZW50TmFtZSkgPT4ge1xuICBjb25zdCB4cmF5UmVhY3RFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGNvbnN0IGJvdW5kaW5nQ2xpZW50UmVjdCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIFxuICB4cmF5UmVhY3RFbGVtLmNsYXNzTmFtZSA9IGNvbnN0YW50cy54cmF5UmVhY3RFbGVtQ047XG4gIHhyYXlSZWFjdEVsZW0uc2V0QXR0cmlidXRlKCdkYXRhLXhyYXktcmVhY3QtZWxlbWVudC1uYW1lJywgY29tcG9uZW50TmFtZSk7XG4gIHhyYXlSZWFjdEVsZW0uc2V0QXR0cmlidXRlKCdkYXRhLXhyYXktcmVhY3QtZWxlbWVudC1zZWFyY2gtbmFtZScsIGNvbXBvbmVudE5hbWUudG9Mb3dlckNhc2UoKSk7XG4gIHhyYXlSZWFjdEVsZW0uc3R5bGUuaGVpZ2h0ID0gYCR7Ym91bmRpbmdDbGllbnRSZWN0LmhlaWdodH1weGA7XG4gIHhyYXlSZWFjdEVsZW0uc3R5bGUud2lkdGggPSBgJHtib3VuZGluZ0NsaWVudFJlY3Qud2lkdGh9cHhgO1xuICB4cmF5UmVhY3RFbGVtLnN0eWxlLnRvcCA9IGAke2JvdW5kaW5nQ2xpZW50UmVjdC50b3AgKyB3aW5kb3cuc2Nyb2xsWX1weGA7XG4gIHhyYXlSZWFjdEVsZW0uc3R5bGUubGVmdCA9IGAke2JvdW5kaW5nQ2xpZW50UmVjdC5sZWZ0ICsgd2luZG93LnNjcm9sbFh9cHhgO1xuICB4cmF5UmVhY3RFbGVtLnN0eWxlLnpJbmRleCA9IGNvbnN0YW50cy56SW5kZXg7XG4gIFxuICByZXR1cm4geyBlbGVtLCB4cmF5UmVhY3RFbGVtIH07XG59O1xuXG4vKipcbiAqIENoZWNrcyBpZiBhIG5hbWUgaXMgYW4gSFRNTCBlbGVtZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIENvbXBvbmVudCBvciBlbGVtZW50IG5hbWVcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGl0J3MgYW4gSFRNTCBlbGVtZW50XG4gKi9cbmNvbnN0IGlzSFRNTEVsZW1lbnQgPSAobmFtZSkgPT4ge1xuICBpZiAoIW5hbWUgfHwgdHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiBjb25zdGFudHMuSFRNTF9FTEVNRU5UUy5oYXMobmFtZS50b0xvd2VyQ2FzZSgpKTtcbn07XG5cbi8qKlxuICogUmVzb2x2ZXMgY29tcG9uZW50IG5hbWUgZnJvbSBlbGVtZW50IHR5cGUgYW5kIGZpYmVyXG4gKiBIYW5kbGVzIGZ1bmN0aW9uIGNvbXBvbmVudHMsIGNsYXNzIGNvbXBvbmVudHMsIGZvcndhcmRSZWYsIG1lbW8sIGV0Yy5cbiAqIEBwYXJhbSB7Kn0gZWxlbWVudFR5cGUgLSBSZWFjdCBlbGVtZW50IHR5cGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBmaWJlciAtIFJlYWN0IGZpYmVyIG5vZGVcbiAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gQ29tcG9uZW50IG5hbWUgb3IgbnVsbFxuICovXG5jb25zdCByZXNvbHZlQ29tcG9uZW50TmFtZSA9IChlbGVtZW50VHlwZSwgZmliZXIgPSBudWxsKSA9PiB7XG4gIGlmICghZWxlbWVudFR5cGUpIHJldHVybiBudWxsO1xuXG4gIGlmICh0eXBlb2YgZWxlbWVudFR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICBpZiAoZWxlbWVudFR5cGUuZGlzcGxheU5hbWUpIHtcbiAgICAgIHJldHVybiBlbGVtZW50VHlwZS5kaXNwbGF5TmFtZTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGVsZW1lbnRUeXBlLm5hbWUgJiYgZWxlbWVudFR5cGUubmFtZSAhPT0gJ0Fub255bW91cycpIHtcbiAgICAgIHJldHVybiBlbGVtZW50VHlwZS5uYW1lO1xuICAgIH1cbiAgICBcbiAgICBpZiAoZWxlbWVudFR5cGUucmVuZGVyKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZUNvbXBvbmVudE5hbWUoZWxlbWVudFR5cGUucmVuZGVyLCBmaWJlcik7XG4gICAgfVxuICAgIFxuICAgIGlmIChlbGVtZW50VHlwZS4kJHR5cGVvZiAmJiBlbGVtZW50VHlwZS50eXBlKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZUNvbXBvbmVudE5hbWUoZWxlbWVudFR5cGUudHlwZSwgZmliZXIpO1xuICAgIH1cbiAgfVxuICBcbiAgaWYgKHR5cGVvZiBlbGVtZW50VHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZWxlbWVudFR5cGU7XG4gIH1cbiAgXG4gIGlmIChlbGVtZW50VHlwZSAmJiBlbGVtZW50VHlwZS4kJHR5cGVvZikge1xuICAgIGlmIChlbGVtZW50VHlwZS50eXBlKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZUNvbXBvbmVudE5hbWUoZWxlbWVudFR5cGUudHlwZSwgZmliZXIpO1xuICAgIH1cbiAgfVxuICBcbiAgaWYgKGZpYmVyICYmIGZpYmVyLl9kZWJ1Z1NvdXJjZSkge1xuICAgIGNvbnN0IGZpbGVOYW1lID0gZmliZXIuX2RlYnVnU291cmNlLmZpbGVOYW1lO1xuICAgIGlmIChmaWxlTmFtZSkge1xuICAgICAgY29uc3QgbWF0Y2ggPSBmaWxlTmFtZS5tYXRjaCgvKFteL1xcXFxdKylcXC4oanN4P3x0c3g/KSQvKTtcbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICByZXR1cm4gbWF0Y2hbMV07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gbnVsbDtcbn07XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgY29tcG9uZW50IGJlbG9uZ3MgdG8gdGhlIHByb2plY3QgYmFzZWQgb24gaXRzIHNvdXJjZSBmaWxlIHBhdGhcbiAqIEBwYXJhbSB7T2JqZWN0fSBmaWJlciAtIFJlYWN0IGZpYmVyIG5vZGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9qZWN0Um9vdFBhdGggLSBQcm9qZWN0IHJvb3QgcGF0aCBmb3IgY29tcGFyaXNvblxuICogQHBhcmFtIHtzdHJpbmd9IGNvbXBvbmVudE5hbWUgLSBPcHRpb25hbCBjb21wb25lbnQgbmFtZSB0byBjaGVjayBhZ2FpbnN0IHByb2plY3QgZmlsZXNcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGNvbXBvbmVudCBiZWxvbmdzIHRvIHByb2plY3RcbiAqL1xuY29uc3QgaXNQcm9qZWN0Q29tcG9uZW50ID0gKGZpYmVyLCBwcm9qZWN0Um9vdFBhdGgsIGNvbXBvbmVudE5hbWUgPSBudWxsKSA9PiB7XG4gIGlmICghcHJvamVjdFJvb3RQYXRoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBjb25zdCBmaWxlUGF0aCA9IGZpYmVyPy5fZGVidWdTb3VyY2U/LmZpbGVOYW1lO1xuXG4gIGlmIChmaWxlUGF0aCkge1xuICAgIGlmIChpc0V4dGVybmFsUGF0aChmaWxlUGF0aCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgY29uc3Qgbm9ybWFsaXplZEZpbGVQYXRoID0gbm9ybWFsaXplUGF0aChmaWxlUGF0aCk7XG4gICAgY29uc3Qgbm9ybWFsaXplZFByb2plY3RSb290ID0gbm9ybWFsaXplUGF0aChwcm9qZWN0Um9vdFBhdGgpO1xuICAgIFxuICAgIGlmIChub3JtYWxpemVkRmlsZVBhdGguc3RhcnRzV2l0aChub3JtYWxpemVkUHJvamVjdFJvb3QpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgaWYgKCFub3JtYWxpemVkRmlsZVBhdGguaW5jbHVkZXMoJ25vZGVfbW9kdWxlcycpICYmIFxuICAgICAgICAhbm9ybWFsaXplZEZpbGVQYXRoLnN0YXJ0c1dpdGgoJy8nKSAmJlxuICAgICAgICAhbm9ybWFsaXplZEZpbGVQYXRoLm1hdGNoKC9eW2Etel06L2kpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIFxuICBpZiAoY29tcG9uZW50TmFtZSkge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRDb21wb25lbnROYW1lID0gY29tcG9uZW50TmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIC8vIE8oMSkgbG9va3VwIHVzaW5nIHByZS1idWlsdCBpbmRleCBpbnN0ZWFkIG9mIE8obSkgbG9vcCB0aHJvdWdoIGFsbCBmaWxlc1xuICAgIGlmIChjb21wb25lbnROYW1lVG9GaWxlc0luZGV4Lmhhcyhub3JtYWxpemVkQ29tcG9uZW50TmFtZSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLyoqXG4gKiBTZXRzIHRoZSBwcm9qZWN0IHJvb3QgcGF0aCBmb3IgZmlsdGVyaW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gcm9vdFBhdGggLSBQcm9qZWN0IHJvb3QgcGF0aFxuICovXG5leHBvcnQgY29uc3Qgc2V0UHJvamVjdFJvb3QgPSAocm9vdFBhdGgpID0+IHtcbiAgcHJvamVjdFJvb3QgPSByb290UGF0aCA/IG5vcm1hbGl6ZVBhdGgocm9vdFBhdGgpIDogbnVsbDtcbiAgXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuX19YUkFZX1JFQUNUX1BST0pFQ1RfUk9PVF9fICYmICFwcm9qZWN0Um9vdCkge1xuICAgIHByb2plY3RSb290ID0gbm9ybWFsaXplUGF0aCh3aW5kb3cuX19YUkFZX1JFQUNUX1BST0pFQ1RfUk9PVF9fKTtcbiAgfVxufTtcblxuLyoqXG4gKiBHZXRzIHRoZSBjdXJyZW50IHByb2plY3Qgcm9vdCBwYXRoXG4gKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IFByb2plY3Qgcm9vdCBwYXRoIG9yIG51bGxcbiAqL1xuZXhwb3J0IGNvbnN0IGdldFByb2plY3RSb290ID0gKCkgPT4ge1xuICByZXR1cm4gcHJvamVjdFJvb3Q7XG59O1xuXG4vKipcbiAqIFNldHMgdGhlIHVzYWdlIG1hcCBmb3IgZmlsdGVyaW5nIGV4dGVybmFsIGNvbXBvbmVudHNcbiAqIEBwYXJhbSB7T2JqZWN0fSBtYXAgLSBVc2FnZSBtYXAgKGZpbGUgcGF0aCAtPiBBcnJheSBvZiBjb21wb25lbnQgbmFtZXMpXG4gKi9cbmV4cG9ydCBjb25zdCBzZXRVc2FnZU1hcCA9IChtYXApID0+IHtcbiAgdXNhZ2VNYXAgPSBtYXAgfHwge307XG4gIFxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Ll9fWFJBWV9SRUFDVF9VU0FHRV9NQVBfXyAmJiBPYmplY3Qua2V5cyh1c2FnZU1hcCkubGVuZ3RoID09PSAwKSB7XG4gICAgdXNhZ2VNYXAgPSB3aW5kb3cuX19YUkFZX1JFQUNUX1VTQUdFX01BUF9fO1xuICB9XG4gIFxuICBpZiAocHJvamVjdEZpbGVQYXRocy5zaXplID09PSAwKSB7XG4gICAgcHJvamVjdEZpbGVQYXRocyA9IG5ldyBTZXQoT2JqZWN0LmtleXModXNhZ2VNYXAgfHwge30pKTtcbiAgfSBlbHNlIHtcbiAgICBPYmplY3Qua2V5cyh1c2FnZU1hcCB8fCB7fSkuZm9yRWFjaChmaWxlUGF0aCA9PiBwcm9qZWN0RmlsZVBhdGhzLmFkZChmaWxlUGF0aCkpO1xuICB9XG59O1xuXG4vKipcbiAqIFNldHMgdGhlIGltcG9ydCBtYXAgZm9yIGZpbHRlcmluZyBleHRlcm5hbCBjb21wb25lbnRzIChmYWxsYmFjaylcbiAqIEBwYXJhbSB7T2JqZWN0fSBtYXAgLSBJbXBvcnQgbWFwIChmaWxlIHBhdGggLT4gQXJyYXkgb2YgY29tcG9uZW50IG5hbWVzKVxuICovXG5leHBvcnQgY29uc3Qgc2V0SW1wb3J0TWFwID0gKG1hcCkgPT4ge1xuICBpbXBvcnRNYXAgPSBtYXAgfHwge307XG4gIFxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Ll9fWFJBWV9SRUFDVF9JTVBPUlRfTUFQX18gJiYgT2JqZWN0LmtleXMoaW1wb3J0TWFwKS5sZW5ndGggPT09IDApIHtcbiAgICBpbXBvcnRNYXAgPSB3aW5kb3cuX19YUkFZX1JFQUNUX0lNUE9SVF9NQVBfXztcbiAgfVxuICBcbiAgT2JqZWN0LmtleXMoaW1wb3J0TWFwIHx8IHt9KS5mb3JFYWNoKGZpbGVQYXRoID0+IHByb2plY3RGaWxlUGF0aHMuYWRkKGZpbGVQYXRoKSk7XG59O1xuXG4vKipcbiAqIFNldHMgdGhlIGxpc3Qgb2YgYWxsIHByb2plY3QgZmlsZXMgZm91bmQgaW4gc291cmNlUGF0aCBmb2xkZXJzXG4gKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IGZpbGVzIC0gQXJyYXkgb2YgYWxsIGZpbGUgcGF0aHMgZm91bmQgaW4gc291cmNlUGF0aFxuICovXG5leHBvcnQgY29uc3Qgc2V0UHJvamVjdEZpbGVzID0gKGZpbGVzKSA9PiB7XG4gIGxldCBmaWxlTGlzdCA9IGZpbGVzIHx8IFtdO1xuICBcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5fX1hSQVlfUkVBQ1RfUFJPSkVDVF9GSUxFU19fICYmIGZpbGVMaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgIGNvbnN0IGdsb2JhbEZpbGVzID0gd2luZG93Ll9fWFJBWV9SRUFDVF9QUk9KRUNUX0ZJTEVTX187XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZ2xvYmFsRmlsZXMpKSB7XG4gICAgICBmaWxlTGlzdCA9IFsuLi5nbG9iYWxGaWxlc107XG4gICAgfVxuICB9XG4gIFxuICBwcm9qZWN0RmlsZVBhdGhzID0gbmV3IFNldChmaWxlTGlzdCk7XG4gIFxuICAvLyBQcmUtY29tcHV0ZSBub3JtYWxpemVkIHBhdGhzIGFuZCBjb21wb25lbnQgbmFtZSBpbmRleCBmb3IgTygxKSBsb29rdXBzXG4gIG5vcm1hbGl6ZWRQcm9qZWN0RmlsZVBhdGhzLmNsZWFyKCk7XG4gIGNvbXBvbmVudE5hbWVUb0ZpbGVzSW5kZXguY2xlYXIoKTtcbiAgXG4gIGZvciAoY29uc3QgZmlsZVBhdGggb2YgZmlsZUxpc3QpIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplUGF0aChmaWxlUGF0aCk7XG4gICAgbm9ybWFsaXplZFByb2plY3RGaWxlUGF0aHMuYWRkKG5vcm1hbGl6ZWQpO1xuICAgIFxuICAgIGNvbnN0IHBhdGhQYXJ0cyA9IG5vcm1hbGl6ZWQuc3BsaXQoJy8nKTtcbiAgICBjb25zdCBmaWxlbmFtZSA9IHBhdGhQYXJ0c1twYXRoUGFydHMubGVuZ3RoIC0gMV0gfHwgJyc7XG4gICAgY29uc3QgZmlsZW5hbWVXaXRob3V0RXh0ID0gZmlsZW5hbWUucmVwbGFjZSgvXFwuKHRzeD98anN4PykkLywgJycpO1xuICAgIFxuICAgIGlmIChmaWxlbmFtZVdpdGhvdXRFeHQpIHtcbiAgICAgIGlmICghY29tcG9uZW50TmFtZVRvRmlsZXNJbmRleC5oYXMoZmlsZW5hbWVXaXRob3V0RXh0KSkge1xuICAgICAgICBjb21wb25lbnROYW1lVG9GaWxlc0luZGV4LnNldChmaWxlbmFtZVdpdGhvdXRFeHQsIG5ldyBTZXQoKSk7XG4gICAgICB9XG4gICAgICBjb21wb25lbnROYW1lVG9GaWxlc0luZGV4LmdldChmaWxlbmFtZVdpdGhvdXRFeHQpLmFkZChmaWxlUGF0aCk7XG4gICAgfVxuICAgIFxuICAgIGZvciAoY29uc3QgcGFydCBvZiBwYXRoUGFydHMuc2xpY2UoMCwgLTEpKSB7XG4gICAgICBpZiAocGFydCAmJiBwYXJ0Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgaWYgKCFjb21wb25lbnROYW1lVG9GaWxlc0luZGV4LmhhcyhwYXJ0KSkge1xuICAgICAgICAgIGNvbXBvbmVudE5hbWVUb0ZpbGVzSW5kZXguc2V0KHBhcnQsIG5ldyBTZXQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29tcG9uZW50TmFtZVRvRmlsZXNJbmRleC5nZXQocGFydCkuYWRkKGZpbGVQYXRoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogQXR0ZW1wdHMgdG8gZGV0ZWN0IHByb2plY3Qgcm9vdCBmcm9tIGZpYmVyIHRyZWUgd2hlbiBzZXJ2ZXIgaXMgbm90IGF2YWlsYWJsZVxuICogU2NhbnMgRE9NIGZvciBSZWFjdCBmaWJlcnMgYW5kIGV4dHJhY3RzIGZpbGUgcGF0aHMgdG8gaW5mZXIgcHJvamVjdCByb290XG4gKi9cbmNvbnN0IGRldGVjdFByb2plY3RSb290RnJvbURPTSA9ICgpID0+IHtcbiAgaWYgKHByb2plY3RSb290KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIFxuICB0cnkge1xuICAgIGNvbnN0IGZpbGVQYXRocyA9IFtdO1xuICAgIGNvbnN0IG1heFNhbXBsZXMgPSA1MDsgLy8gTGltaXQgc2FtcGxlcyBmb3IgcGVyZm9ybWFuY2VcbiAgICBsZXQgc2FtcGxlcyA9IDA7XG4gICAgXG4gICAgY29uc3Qgd2Fsa2VyID0gZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcihcbiAgICAgIGRvY3VtZW50LmJvZHksXG4gICAgICBOb2RlRmlsdGVyLlNIT1dfRUxFTUVOVCxcbiAgICAgIG51bGwsXG4gICAgICBmYWxzZVxuICAgICk7XG4gICAgXG4gICAgbGV0IG5vZGU7XG4gICAgd2hpbGUgKChub2RlID0gd2Fsa2VyLm5leHROb2RlKCkpICYmIHNhbXBsZXMgPCBtYXhTYW1wbGVzKSB7XG4gICAgICBjb25zdCBmaWJlcktleSA9IE9iamVjdC5rZXlzKG5vZGUpLmZpbmQoa2V5ID0+XG4gICAgICAgIGtleS5zdGFydHNXaXRoKCdfX3JlYWN0RmliZXIkJykgfHwga2V5LnN0YXJ0c1dpdGgoJ19fcmVhY3RJbnRlcm5hbEluc3RhbmNlJCcpXG4gICAgICApO1xuICAgICAgXG4gICAgICBpZiAoZmliZXJLZXkpIHtcbiAgICAgICAgY29uc3QgZmliZXIgPSBub2RlW2ZpYmVyS2V5XTtcbiAgICAgICAgbGV0IGN1cnJlbnRGaWJlciA9IGZpYmVyO1xuICAgICAgICBsZXQgZGVwdGggPSAwO1xuICAgICAgICBcbiAgICAgICAgd2hpbGUgKGN1cnJlbnRGaWJlciAmJiBkZXB0aCA8IDEwKSB7XG4gICAgICAgICAgaWYgKGN1cnJlbnRGaWJlci5fZGVidWdTb3VyY2UgJiYgY3VycmVudEZpYmVyLl9kZWJ1Z1NvdXJjZS5maWxlTmFtZSkge1xuICAgICAgICAgICAgY29uc3QgZmlsZVBhdGggPSBjdXJyZW50RmliZXIuX2RlYnVnU291cmNlLmZpbGVOYW1lO1xuICAgICAgICAgICAgaWYgKCFpc0V4dGVybmFsUGF0aChmaWxlUGF0aCkpIHtcbiAgICAgICAgICAgICAgZmlsZVBhdGhzLnB1c2goZmlsZVBhdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjdXJyZW50RmliZXIgPSBjdXJyZW50RmliZXIucmV0dXJuO1xuICAgICAgICAgIGRlcHRoKys7XG4gICAgICAgICAgc2FtcGxlcysrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmIChmaWxlUGF0aHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgZGV0ZWN0ZWRSb290ID0gZGV0ZWN0UHJvamVjdFJvb3RGcm9tUGF0aHMoZmlsZVBhdGhzKTtcbiAgICAgIGlmIChkZXRlY3RlZFJvb3QpIHtcbiAgICAgICAgcHJvamVjdFJvb3QgPSBkZXRlY3RlZFJvb3Q7XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIC8vIFNpbGVudGx5IGZhaWwgLSBwcm9qZWN0IHJvb3QgZGV0ZWN0aW9uIGlzIG9wdGlvbmFsXG4gIH1cbn07XG5cbi8qKlxuICogQ2hlY2tzIGlmIGFuIGV4dGVybmFsIGNvbXBvbmVudCBpcyB1c2VkIGJ5IGFueSBpbnRlcm5hbCBjb21wb25lbnQgaW4gdGhlIHNlZW4gbGlzdFxuICogQ2hlY2tzIHVzYWdlIG1hcCBmaXJzdCAocHJpbWFyeSksIHRoZW4gaW1wb3J0IG1hcCAoZmFsbGJhY2spXG4gKiBAcGFyYW0ge3N0cmluZ30gY29tcG9uZW50TmFtZSAtIEV4dGVybmFsIGNvbXBvbmVudCBuYW1lIHRvIGNoZWNrXG4gKiBAcGFyYW0ge0FycmF5fSBzZWVuSW50ZXJuYWxDb21wb25lbnRzIC0gQXJyYXkgb2YgaW50ZXJuYWwgY29tcG9uZW50cyBzZWVuIHNvIGZhciBpbiBwYXRoXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBjb21wb25lbnQgaXMgdXNlZCBieSBhbnkgc2VlbiBpbnRlcm5hbCBjb21wb25lbnRcbiAqL1xuY29uc3QgaXNVc2VkQnlJbnRlcm5hbENvbXBvbmVudHMgPSAoY29tcG9uZW50TmFtZSwgc2VlbkludGVybmFsQ29tcG9uZW50cykgPT4ge1xuICBpZiAoIWNvbXBvbmVudE5hbWUgfHwgc2VlbkludGVybmFsQ29tcG9uZW50cy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgXG4gIGlmIChPYmplY3Qua2V5cyh1c2FnZU1hcCkubGVuZ3RoID09PSAwICYmIE9iamVjdC5rZXlzKGltcG9ydE1hcCkubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgXG4gIGZvciAoY29uc3QgaW50ZXJuYWxDb21wIG9mIHNlZW5JbnRlcm5hbENvbXBvbmVudHMpIHtcbiAgICBjb25zdCBmaWxlUGF0aCA9IGludGVybmFsQ29tcC5maWxlO1xuICAgIGlmICghZmlsZVBhdGgpIGNvbnRpbnVlO1xuICAgIFxuICAgIGlmICh1c2FnZU1hcFtmaWxlUGF0aF0gJiYgQXJyYXkuaXNBcnJheSh1c2FnZU1hcFtmaWxlUGF0aF0pKSB7XG4gICAgICBpZiAodXNhZ2VNYXBbZmlsZVBhdGhdLmluY2x1ZGVzKGNvbXBvbmVudE5hbWUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBpZiAoaW1wb3J0TWFwW2ZpbGVQYXRoXSAmJiBBcnJheS5pc0FycmF5KGltcG9ydE1hcFtmaWxlUGF0aF0pKSB7XG4gICAgICBpZiAoaW1wb3J0TWFwW2ZpbGVQYXRoXS5pbmNsdWRlcyhjb21wb25lbnROYW1lKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiBmYWxzZTtcbn07XG5cbi8qKlxuICogVHJhdmVyc2VzIHRoZSBmaWJlciB0cmVlIHRvIGZpbmQgUmVhY3QgY29tcG9uZW50cywgc2tpcHBpbmcgSFRNTCBlbGVtZW50c1xuICogRmlsdGVycyBvdXQgZXh0ZXJuYWwgbGlicmFyeSBjb21wb25lbnRzIGJhc2VkIG9uIHVzYWdlL2ltcG9ydCBtYXBzXG4gKiBAcGFyYW0ge09iamVjdH0gZmliZXIgLSBTdGFydGluZyBmaWJlciBub2RlXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4RGVwdGggLSBNYXhpbXVtIGRlcHRoIHRvIHRyYXZlcnNlXG4gKiBAcmV0dXJucyB7QXJyYXl9IEFycmF5IG9mIGNvbXBvbmVudCBpbmZvcm1hdGlvbiBvYmplY3RzXG4gKi9cbmNvbnN0IHRyYXZlcnNlRmliZXJUcmVlID0gKGZpYmVyLCBtYXhEZXB0aCA9IE1BWF9GSUJFUl9ERVBUSCkgPT4ge1xuICBjb25zdCBhbGxDb21wb25lbnRzID0gW107XG4gIGNvbnN0IGludGVybmFsQ29tcG9uZW50cyA9IFtdO1xuICBsZXQgY3VycmVudEZpYmVyID0gZmliZXI7XG4gIGxldCBkZXB0aCA9IDA7XG4gIC8vIFBlcmZvcm1hbmNlIGltcHJvdmVtZW50c1xuICBjb25zdCB2aXNpdGVkID0gbmV3IFNldCgpO1xuICBcbiAgd2hpbGUgKGN1cnJlbnRGaWJlciAmJiBkZXB0aCA8IG1heERlcHRoKSB7XG4gICAgaWYgKHZpc2l0ZWQuaGFzKGN1cnJlbnRGaWJlcikpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICB2aXNpdGVkLmFkZChjdXJyZW50RmliZXIpO1xuICAgIFxuICAgIGNvbnN0IGVsZW1lbnRUeXBlID0gY3VycmVudEZpYmVyLmVsZW1lbnRUeXBlIHx8IGN1cnJlbnRGaWJlci50eXBlO1xuICAgIFxuICAgIGlmIChlbGVtZW50VHlwZSkge1xuICAgICAgY29uc3QgY29tcG9uZW50TmFtZSA9IHJlc29sdmVDb21wb25lbnROYW1lKGVsZW1lbnRUeXBlLCBjdXJyZW50RmliZXIpO1xuICAgICAgXG4gICAgICBpZiAoY29tcG9uZW50TmFtZSkge1xuICAgICAgICBpZiAoIWlzSFRNTEVsZW1lbnQoY29tcG9uZW50TmFtZSkpIHtcbiAgICAgICAgICBjb25zdCBpc0ludGVybmFsID0gaXNQcm9qZWN0Q29tcG9uZW50KGN1cnJlbnRGaWJlciwgcHJvamVjdFJvb3QsIGNvbXBvbmVudE5hbWUpO1xuICAgICAgICAgIFxuICAgICAgICAgIGxldCBmaWxlUGF0aCA9IG51bGw7XG4gICAgICAgICAgaWYgKGN1cnJlbnRGaWJlci5fZGVidWdTb3VyY2UgJiYgY3VycmVudEZpYmVyLl9kZWJ1Z1NvdXJjZS5maWxlTmFtZSkge1xuICAgICAgICAgICAgZmlsZVBhdGggPSBjdXJyZW50RmliZXIuX2RlYnVnU291cmNlLmZpbGVOYW1lO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBhbGxDb21wb25lbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogY29tcG9uZW50TmFtZSxcbiAgICAgICAgICAgIGZpYmVyOiBjdXJyZW50RmliZXIsXG4gICAgICAgICAgICBlbGVtZW50VHlwZTogZWxlbWVudFR5cGUsXG4gICAgICAgICAgICBkZXB0aDogZGVwdGgsXG4gICAgICAgICAgICBpc0ludGVybmFsOiBpc0ludGVybmFsLFxuICAgICAgICAgICAgZmlsZTogZmlsZVBhdGhcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoaXNJbnRlcm5hbCkge1xuICAgICAgICAgICAgaW50ZXJuYWxDb21wb25lbnRzLnB1c2goe1xuICAgICAgICAgICAgICBuYW1lOiBjb21wb25lbnROYW1lLFxuICAgICAgICAgICAgICBmaWxlOiBmaWxlUGF0aFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGN1cnJlbnRGaWJlciA9IGN1cnJlbnRGaWJlci5yZXR1cm4gfHwgY3VycmVudEZpYmVyLl9vd25lcjtcbiAgICBkZXB0aCsrO1xuICB9XG4gIFxuICBjb25zdCBmaWx0ZXJlZENvbXBvbmVudHMgPSBbXTtcbiAgZm9yIChjb25zdCBjb21wIG9mIGFsbENvbXBvbmVudHMpIHtcbiAgICBpZiAoY29tcC5pc0ludGVybmFsKSB7XG4gICAgICBmaWx0ZXJlZENvbXBvbmVudHMucHVzaCh7XG4gICAgICAgIG5hbWU6IGNvbXAubmFtZSxcbiAgICAgICAgZmliZXI6IGNvbXAuZmliZXIsXG4gICAgICAgIGVsZW1lbnRUeXBlOiBjb21wLmVsZW1lbnRUeXBlLFxuICAgICAgICBkZXB0aDogY29tcC5kZXB0aCxcbiAgICAgICAgZmlsZTogY29tcC5maWxlLFxuICAgICAgICBpc0ludGVybmFsOiBjb21wLmlzSW50ZXJuYWxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoaXNVc2VkQnlJbnRlcm5hbENvbXBvbmVudHMoY29tcC5uYW1lLCBpbnRlcm5hbENvbXBvbmVudHMpKSB7XG4gICAgICAgIGZpbHRlcmVkQ29tcG9uZW50cy5wdXNoKHtcbiAgICAgICAgICBuYW1lOiBjb21wLm5hbWUsXG4gICAgICAgICAgZmliZXI6IGNvbXAuZmliZXIsXG4gICAgICAgICAgZWxlbWVudFR5cGU6IGNvbXAuZWxlbWVudFR5cGUsXG4gICAgICAgICAgZGVwdGg6IGNvbXAuZGVwdGgsXG4gICAgICAgICAgZmlsZTogY29tcC5maWxlLFxuICAgICAgICAgIGlzSW50ZXJuYWw6IGNvbXAuaXNJbnRlcm5hbFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiBmaWx0ZXJlZENvbXBvbmVudHM7XG59O1xuXG4vKipcbiAqIEdldHMgUmVhY3QgY29tcG9uZW50IGluZm9ybWF0aW9uIGZyb20gYSBET00gZWxlbWVudCB1c2luZyBSZWFjdCBEZXZUb29scyBwcm90b2NvbFxuICogU3VwcG9ydHMgUmVhY3QgMTgrIGFuZCBmYWxscyBiYWNrIHRvIGxlZ2FjeSBkZXRlY3Rpb24gZm9yIG9sZGVyIHZlcnNpb25zXG4gKiBFbmhhbmNlZCB0byBza2lwIEhUTUwgZWxlbWVudHMgYW5kIGZpbmQgYWN0dWFsIFJlYWN0IGNvbXBvbmVudHNcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW0gLSBUaGUgRE9NIGVsZW1lbnRcbiAqIEByZXR1cm5zIHtPYmplY3R9IE9iamVjdCB3aXRoIGNvbXBvbmVudCBuYW1lIGFuZCBvcHRpb25hbCB1aWRcbiAqL1xuY29uc3QgZ2V0Q29tcG9uZW50T2JqID0gKGVsZW0pID0+IHtcbiAgaWYgKHdpbmRvdy5fX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18pIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZmliZXJLZXkgPSBPYmplY3Qua2V5cyhlbGVtKS5maW5kKGtleSA9PiBcbiAgICAgICAga2V5LnN0YXJ0c1dpdGgoJ19fcmVhY3RGaWJlciQnKSB8fCBrZXkuc3RhcnRzV2l0aCgnX19yZWFjdEludGVybmFsSW5zdGFuY2UkJylcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGlmIChmaWJlcktleSkge1xuICAgICAgICBjb25zdCBmaWJlciA9IGVsZW1bZmliZXJLZXldO1xuICAgICAgICBjb25zdCBjb21wb25lbnRzID0gdHJhdmVyc2VGaWJlclRyZWUoZmliZXIpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGNvbXBvbmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IGZpcnN0Q29tcG9uZW50ID0gY29tcG9uZW50c1swXTtcbiAgICAgICAgICBjb25zdCB1aWQgPSBmaXJzdENvbXBvbmVudC5maWJlci5fZGVidWdJRCB8fCBcbiAgICAgICAgICAgICAgICAgICAgIGAke2ZpcnN0Q29tcG9uZW50LmZpYmVyLmluZGV4IHx8ICcnfSR7Zmlyc3RDb21wb25lbnQuZmliZXIua2V5IHx8ICcnfWA7XG4gICAgICAgICAgY29uc3QgcmV2ZXJzZWRIaWVyYXJjaHkgPSBjb21wb25lbnRzLnJldmVyc2UoKS5tYXAoYyA9PiBjLm5hbWUpO1xuICAgICAgICAgIHJldHVybiB7IFxuICAgICAgICAgICAgbmFtZTogZmlyc3RDb21wb25lbnQubmFtZSwgXG4gICAgICAgICAgICB1aWQsXG4gICAgICAgICAgICBoaWVyYXJjaHk6IHJldmVyc2VkSGllcmFyY2h5XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBTaWxlbnRseSBmYWxsIGJhY2sgdG8gbGVnYWN5IGRldGVjdGlvblxuICAgIH1cbiAgfVxuICBcbiAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoZWxlbSkpIHtcbiAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ19fcmVhY3RJbnRlcm5hbEluc3RhbmNlJCcpKSB7XG4gICAgICBjb25zdCBmaWJlck5vZGUgPSBlbGVtW2tleV07XG4gICAgICBpZiAoZmliZXJOb2RlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgY29tcG9uZW50cyA9IHRyYXZlcnNlRmliZXJUcmVlKGZpYmVyTm9kZSk7XG4gICAgICAgICAgaWYgKGNvbXBvbmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgZmlyc3RDb21wb25lbnQgPSBjb21wb25lbnRzWzBdO1xuICAgICAgICAgICAgY29uc3QgcmV2ZXJzZWRIaWVyYXJjaHkgPSBjb21wb25lbnRzLnJldmVyc2UoKS5tYXAoYyA9PiBjLm5hbWUpO1xuICAgICAgICAgICAgcmV0dXJuIHsgXG4gICAgICAgICAgICAgIG5hbWU6IGZpcnN0Q29tcG9uZW50Lm5hbWUsXG4gICAgICAgICAgICAgIHVpZDogYCR7ZmliZXJOb2RlLl9tb3VudEluZGV4IHx8ICcnfSR7ZmliZXJOb2RlLl9tb3VudE9yZGVyIHx8ICcnfWAsXG4gICAgICAgICAgICAgIGhpZXJhcmNoeTogcmV2ZXJzZWRIaWVyYXJjaHlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIC8vIENvbnRpbnVlIHRvIG9sZCBsZWdhY3kgZGV0ZWN0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGZpYmVyTm9kZSAmJiBmaWJlck5vZGUuX2N1cnJlbnRFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IG93bmVyID0gZmliZXJOb2RlLl9jdXJyZW50RWxlbWVudC5fb3duZXI7XG4gICAgICAgIGNvbnN0IGZpYmVyID0gb3duZXIgJiYgb3duZXIuX2luc3RhbmNlO1xuICAgICAgICBpZiAoZmliZXIpIHtcbiAgICAgICAgICBjb25zdCBjb21wb25lbnROYW1lID0gZmliZXIuY29uc3RydWN0b3IubmFtZTtcbiAgICAgICAgICBpZiAoIWlzSFRNTEVsZW1lbnQoY29tcG9uZW50TmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB7IFxuICAgICAgICAgICAgICBuYW1lOiBjb21wb25lbnROYW1lLCBcbiAgICAgICAgICAgICAgdWlkOiBgJHtvd25lci5fbW91bnRJbmRleCB8fCAnJ30ke293bmVyLl9tb3VudE9yZGVyIHx8ICcnfWAgXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChmaWJlck5vZGUpIHtcbiAgICAgICAgY29uc3QgZmliZXIgPSBmaWJlck5vZGUucmV0dXJuPy5zdGF0ZU5vZGU/Ll9yZWFjdEludGVybmFsRmliZXI7XG4gICAgICAgIGlmIChmaWJlcikge1xuICAgICAgICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSBmaWJlci50eXBlPy5uYW1lIHx8ICdVbmtub3duJztcbiAgICAgICAgICBpZiAoY29tcG9uZW50TmFtZSAhPT0gJ1Vua25vd24nICYmICFpc0hUTUxFbGVtZW50KGNvbXBvbmVudE5hbWUpKSB7XG4gICAgICAgICAgICByZXR1cm4geyBuYW1lOiBjb21wb25lbnROYW1lIH07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuICBjb25zdCB0YWdOYW1lID0gZWxlbS50YWdOYW1lPy50b0xvd2VyQ2FzZSgpO1xuICBpZiAodGFnTmFtZSAmJiBpc0hUTUxFbGVtZW50KHRhZ05hbWUpKSB7XG4gICAgcmV0dXJuIHsgbmFtZTogdGFnTmFtZSB9O1xuICB9XG4gIFxuICByZXR1cm4ge307XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBjYWNoZWQgZnVuY3Rpb24gZm9yIHNlYXJjaGluZyBhbmQgY3JlYXRpbmcgY29tcG9uZW50IG92ZXJsYXlzXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IEZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBvdmVybGF5IGVsZW1lbnRzIGZvciBjb21wb25lbnRzXG4gKi9cbmNvbnN0IHNlYXJjaEFuZENyZWF0ZUNvbXBvbmVudENhY2hlZCA9ICgpID0+IHtcbiAgLy8gUGVyZm9ybWFuY2UgaW1wcm92ZW1lbnRzXG4gIGNvbnN0IHVpZHMgPSBuZXcgU2V0KCk7XG4gIHJldHVybiAoZWxlbSkgPT4ge1xuICAgIGNvbnN0IHsgbmFtZSwgdWlkIH0gPSBnZXRDb21wb25lbnRPYmooZWxlbSk7XG4gICAgXG4gICAgaWYgKG5hbWUgJiYgbmFtZSAhPT0gJ1Vua25vd24nKSB7XG4gICAgICBpZiAodWlkKSB7XG4gICAgICAgIGlmICghdWlkcy5oYXModWlkKSkge1xuICAgICAgICAgIHVpZHMuYWRkKHVpZCk7XG4gICAgICAgICAgcmV0dXJuIGNyZWF0ZUVsZW1Gb3JDb21wb25lbnQoZWxlbSwgbmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVFbGVtRm9yQ29tcG9uZW50KGVsZW0sIG5hbWUpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcbn07XG5cbi8qKlxuICogRXh0cmFjdHMgY29tcG9uZW50IG9iamVjdHMgZnJvbSBSZWFjdCBmaWJlciB0cmVlXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtIC0gRE9NIGVsZW1lbnQgdG8gZXh0cmFjdCBjb21wb25lbnRzIGZyb21cbiAqIEByZXR1cm5zIHtBcnJheX0gQXJyYXkgb2YgY29tcG9uZW50IG9iamVjdHMgZnJvbSBmaWJlciB0cmVlXG4gKi9cbmNvbnN0IGdldENvbXBvbmVudHNGcm9tRWxlbWVudCA9IChlbGVtKSA9PiB7XG4gIGxldCBjb21wb25lbnRzID0gW107XG4gIFxuICBpZiAod2luZG93Ll9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBmaWJlcktleSA9IE9iamVjdC5rZXlzKGVsZW0pLmZpbmQoa2V5ID0+IFxuICAgICAgICBrZXkuc3RhcnRzV2l0aCgnX19yZWFjdEZpYmVyJCcpIHx8IGtleS5zdGFydHNXaXRoKCdfX3JlYWN0SW50ZXJuYWxJbnN0YW5jZSQnKVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgaWYgKGZpYmVyS2V5KSB7XG4gICAgICAgIGNvbnN0IGZpYmVyID0gZWxlbVtmaWJlcktleV07XG4gICAgICAgIGNvbXBvbmVudHMgPSB0cmF2ZXJzZUZpYmVyVHJlZShmaWJlcik7XG4gICAgICAgIC8vIFJldmVyc2UgdG8gZ2V0IHBhcmVudCAtPiBjaGlsZCBvcmRlciAodHJhdmVyc2FsIGdvZXMgY2hpbGQgLT4gcGFyZW50KVxuICAgICAgICBjb21wb25lbnRzID0gY29tcG9uZW50cy5yZXZlcnNlKCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIFNpbGVudGx5IGZhbGwgYmFjayB0byBsZWdhY3kgZGV0ZWN0aW9uXG4gICAgfVxuICB9XG4gIFxuICBpZiAoY29tcG9uZW50cy5sZW5ndGggPT09IDApIHtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhlbGVtKSkge1xuICAgICAgaWYgKGtleS5zdGFydHNXaXRoKCdfX3JlYWN0SW50ZXJuYWxJbnN0YW5jZSQnKSkge1xuICAgICAgICBjb25zdCBmaWJlck5vZGUgPSBlbGVtW2tleV07XG4gICAgICAgIGlmIChmaWJlck5vZGUpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29tcG9uZW50cyA9IHRyYXZlcnNlRmliZXJUcmVlKGZpYmVyTm9kZSk7XG4gICAgICAgICAgICAvLyBSZXZlcnNlIHRvIGdldCBwYXJlbnQgLT4gY2hpbGQgb3JkZXJcbiAgICAgICAgICAgIGNvbXBvbmVudHMgPSBjb21wb25lbnRzLnJldmVyc2UoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBTaWxlbnRseSBjb250aW51ZSB0byBuZXh0IGRldGVjdGlvbiBtZXRob2RcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiBjb21wb25lbnRzO1xufTtcblxuLyoqXG4gKiBHZXRzIGNvbXBvbmVudCBwYXRoIGZyb20gRE9NIHRyYXZlcnNhbCAoZmFsbGJhY2sgbWV0aG9kKVxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbSAtIERPTSBlbGVtZW50IHRvIHN0YXJ0IHRyYXZlcnNhbCBmcm9tXG4gKiBAcmV0dXJucyB7QXJyYXl9IEFycmF5IG9mIGNvbXBvbmVudCBuYW1lcyBmcm9tIERPTSB0cmF2ZXJzYWxcbiAqL1xuY29uc3QgZ2V0RG9tUGF0aCA9IChlbGVtKSA9PiB7XG4gIGxldCBjdXJyZW50RWxlbSA9IGVsZW07XG4gIGNvbnN0IGRvbVBhdGggPSBbXTtcbiAgY29uc3Qgc2VlbkNvbXBvbmVudE5hbWVzID0gbmV3IFNldCgpO1xuICBcbiAgd2hpbGUgKGN1cnJlbnRFbGVtICYmIGN1cnJlbnRFbGVtLnBhcmVudE5vZGUgJiYgZG9tUGF0aC5sZW5ndGggPCAyMCkge1xuICAgIGN1cnJlbnRFbGVtID0gY3VycmVudEVsZW0ucGFyZW50Tm9kZTtcbiAgICBjb25zdCB7IG5hbWU6IGNvbXBvbmVudCB9ID0gZ2V0Q29tcG9uZW50T2JqKGN1cnJlbnRFbGVtKTtcbiAgICBpZiAoY29tcG9uZW50ICYmIGNvbXBvbmVudCAhPT0gJ1Vua25vd24nICYmICFpc0hUTUxFbGVtZW50KGNvbXBvbmVudCkpIHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWROYW1lID0gY29tcG9uZW50LnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoIXNlZW5Db21wb25lbnROYW1lcy5oYXMobm9ybWFsaXplZE5hbWUpKSB7XG4gICAgICAgIHNlZW5Db21wb25lbnROYW1lcy5hZGQobm9ybWFsaXplZE5hbWUpO1xuICAgICAgICBkb21QYXRoLnVuc2hpZnQoY29tcG9uZW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiBkb21QYXRoO1xufTtcblxuLyoqXG4gKiBCdWlsZHMgZnVsbCBjb21wb25lbnQgc3RydWN0dXJlIHBhdGggKGluY2x1ZGVzIGFsbCBjb21wb25lbnRzKVxuICogQHBhcmFtIHtBcnJheX0gY29tcG9uZW50cyAtIENvbXBvbmVudCBvYmplY3RzIGZyb20gZmliZXIgdHJlZVxuICogQHBhcmFtIHtzdHJpbmd9IGN1cnJlbnRDb21wb25lbnROYW1lIC0gTmFtZSBvZiBjdXJyZW50IGNvbXBvbmVudFxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbSAtIE9yaWdpbmFsIERPTSBlbGVtZW50IGZvciBmYWxsYmFja1xuICogQHJldHVybnMge3N0cmluZ30gRnVsbCBjb21wb25lbnQgcGF0aCBzdHJ1Y3R1cmVcbiAqL1xuY29uc3QgYnVpbGRGdWxsU3RydWN0dXJlID0gKGNvbXBvbmVudHMsIGN1cnJlbnRDb21wb25lbnROYW1lLCBlbGVtKSA9PiB7XG4gIGlmIChjb21wb25lbnRzLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBmaWx0ZXJlZENvbXBvbmVudHMgPSBjb21wb25lbnRzLmZpbHRlcihjb21wID0+IFxuICAgICAgY29tcC5uYW1lICE9PSBjdXJyZW50Q29tcG9uZW50TmFtZSAmJiAhaXNIVE1MRWxlbWVudChjb21wLm5hbWUpXG4gICAgKTtcbiAgICBcbiAgICBpZiAoZmlsdGVyZWRDb21wb25lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGZ1bGxQYXRoID0gZmlsdGVyZWRDb21wb25lbnRzLm1hcChjb21wID0+IGNvbXAubmFtZSk7XG4gICAgICByZXR1cm4gWy4uLmZ1bGxQYXRoLCBjdXJyZW50Q29tcG9uZW50TmFtZV0uam9pbignIC0+ICcpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gY3VycmVudENvbXBvbmVudE5hbWU7XG4gIH1cbiAgXG4gIGNvbnN0IGRvbVBhdGggPSBnZXREb21QYXRoKGVsZW0pO1xuICBcbiAgaWYgKGRvbVBhdGgubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBbLi4uZG9tUGF0aCwgY3VycmVudENvbXBvbmVudE5hbWVdLmpvaW4oJyAtPiAnKTtcbiAgfVxuICBcbiAgcmV0dXJuIGN1cnJlbnRDb21wb25lbnROYW1lO1xufTtcblxuLyoqXG4gKiBCdWlsZHMgZmlsdGVyZWQgY29tcG9uZW50IHN0cnVjdHVyZSBwYXRoIChvbmx5IHByb2plY3Qtb3duZWQgY29tcG9uZW50cylcbiAqIEBwYXJhbSB7QXJyYXl9IGNvbXBvbmVudHMgLSBDb21wb25lbnQgb2JqZWN0cyBmcm9tIGZpYmVyIHRyZWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBjdXJyZW50Q29tcG9uZW50TmFtZSAtIE5hbWUgb2YgY3VycmVudCBjb21wb25lbnRcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW0gLSBPcmlnaW5hbCBET00gZWxlbWVudCBmb3IgZmFsbGJhY2tcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEZpbHRlcmVkIGNvbXBvbmVudCBwYXRoIHN0cnVjdHVyZVxuICovXG5jb25zdCBidWlsZEZpbHRlcmVkU3RydWN0dXJlID0gKGNvbXBvbmVudHMsIGN1cnJlbnRDb21wb25lbnROYW1lLCBlbGVtKSA9PiB7XG4gIGlmIChjb21wb25lbnRzLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBmaWx0ZXJlZENvbXBvbmVudHMgPSBjb21wb25lbnRzLmZpbHRlcihjb21wID0+IFxuICAgICAgY29tcC5uYW1lICE9PSBjdXJyZW50Q29tcG9uZW50TmFtZSAmJiAhaXNIVE1MRWxlbWVudChjb21wLm5hbWUpXG4gICAgKTtcbiAgICBcbiAgICBjb25zdCBzZWVuQ29tcG9uZW50cyA9IG5ldyBTZXQoKTtcbiAgICBjb25zdCBwcm9qZWN0T3duZWRDb21wb25lbnRzID0gW107XG4gICAgXG4gICAgZm9yIChjb25zdCBjb21wIG9mIGZpbHRlcmVkQ29tcG9uZW50cykge1xuICAgICAgaWYgKCFjb21wLmlzSW50ZXJuYWwpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWROYW1lID0gY29tcC5uYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICBcbiAgICAgIGlmIChjb21wLmZpbGUpIHtcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZEZpbGUgPSBjb21wLmZpbGUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgcGF0aFBhcnRzID0gbm9ybWFsaXplZEZpbGUuc3BsaXQoL1tcXC9cXFxcXS8pO1xuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IHBhdGhQYXJ0c1twYXRoUGFydHMubGVuZ3RoIC0gMV07XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lV2l0aG91dEV4dCA9IGZpbGVuYW1lLnJlcGxhY2UoL1xcLih0c3g/fGpzeD8pJC8sICcnKTtcblxuICAgICAgICBjb25zdCBuYW1lTWF0Y2hlc0ZpbGUgPSBub3JtYWxpemVkRmlsZS5pbmNsdWRlcyhgLyR7bm9ybWFsaXplZE5hbWV9YCkgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRGaWxlLmluY2x1ZGVzKGBcXFxcJHtub3JtYWxpemVkTmFtZX1gKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkRmlsZS5lbmRzV2l0aChgLyR7bm9ybWFsaXplZE5hbWV9LnRzeGApIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRGaWxlLmVuZHNXaXRoKGAvJHtub3JtYWxpemVkTmFtZX0udHNgKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkRmlsZS5lbmRzV2l0aChgLyR7bm9ybWFsaXplZE5hbWV9LmpzeGApIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRGaWxlLmVuZHNXaXRoKGAvJHtub3JtYWxpemVkTmFtZX0uanNgKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkRmlsZS5lbmRzV2l0aChgXFxcXCR7bm9ybWFsaXplZE5hbWV9LnRzeGApIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRGaWxlLmVuZHNXaXRoKGBcXFxcJHtub3JtYWxpemVkTmFtZX0udHNgKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkRmlsZS5lbmRzV2l0aChgXFxcXCR7bm9ybWFsaXplZE5hbWV9LmpzeGApIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRGaWxlLmVuZHNXaXRoKGBcXFxcJHtub3JtYWxpemVkTmFtZX0uanNgKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZVdpdGhvdXRFeHQgPT09IG5vcm1hbGl6ZWROYW1lO1xuICAgICAgICBcbiAgICAgICAgLy8gTygxKSBsb29rdXAgdXNpbmcgcHJlLWJ1aWx0IGluZGV4IGluc3RlYWQgb2YgTyhtKSBzcHJlYWQgKyBzb21lICsgaW5jbHVkZXNcbiAgICAgICAgY29uc3QgaW5Qcm9qZWN0RmlsZVBhdGhzID0gY29tcG9uZW50TmFtZVRvRmlsZXNJbmRleC5oYXMobm9ybWFsaXplZE5hbWUpO1xuXG4gICAgICAgIGlmICghbmFtZU1hdGNoZXNGaWxlICYmICFpblByb2plY3RGaWxlUGF0aHMpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gRGVkdXBsaWNhdGUgYnkgY29tcG9uZW50IGlkZW50aXR5OiB1c2Ugbm9ybWFsaXplZCBuYW1lICsgbm9ybWFsaXplZCBmaWxlIHBhdGggYXMgdW5pcXVlIGtleVxuICAgICAgICAvLyBUaGlzIGVuc3VyZXMgdGhhdDpcbiAgICAgICAgLy8gMS4gVGhlIHNhbWUgY29tcG9uZW50IChzYW1lIG5hbWUsIHNhbWUgZmlsZSkgYXBwZWFyaW5nIG11bHRpcGxlIHRpbWVzIGlzIG9ubHkgc2hvd24gb25jZVxuICAgICAgICAvLyAgICAoZS5nLiwgV2ViQXBwTGF5b3V0IC0+IFdlYkFwcExheW91dCAtPiBXZWJBcHBMYXlvdXQpXG4gICAgICAgIC8vIDIuIERpZmZlcmVudCBjb21wb25lbnRzIHdpdGggdGhlIHNhbWUgbmFtZSBidXQgZGlmZmVyZW50IGZpbGVzIGFyZSBib3RoIHNob3duXG4gICAgICAgIC8vICAgIChlLmcuLCBjb21wb25lbnRzX2xlZnQvUGFyZW50LmpzeCB2cyBjb21wb25lbnRzX3JpZ2h0L1BhcmVudC5qc3gpXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRGaWxlUGF0aCA9IG5vcm1hbGl6ZVBhdGgoY29tcC5maWxlKTtcbiAgICAgICAgY29uc3QgY29tcG9uZW50S2V5ID0gYCR7bm9ybWFsaXplZE5hbWV9OiR7bm9ybWFsaXplZEZpbGVQYXRofWA7XG4gICAgICAgIFxuICAgICAgICBpZiAoc2VlbkNvbXBvbmVudHMuaGFzKGNvbXBvbmVudEtleSkpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgc2VlbkNvbXBvbmVudHMuYWRkKGNvbXBvbmVudEtleSk7XG4gICAgICAgIHByb2plY3RPd25lZENvbXBvbmVudHMucHVzaChjb21wKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudEtleSA9IG5vcm1hbGl6ZWROYW1lO1xuICAgICAgICBcbiAgICAgICAgaWYgKHNlZW5Db21wb25lbnRzLmhhcyhjb21wb25lbnRLZXkpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBzZWVuQ29tcG9uZW50cy5hZGQoY29tcG9uZW50S2V5KTtcbiAgICAgICAgcHJvamVjdE93bmVkQ29tcG9uZW50cy5wdXNoKGNvbXApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwcm9qZWN0T3duZWRDb21wb25lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGZpbHRlcmVkUGF0aCA9IHByb2plY3RPd25lZENvbXBvbmVudHMubWFwKGNvbXAgPT4gY29tcC5uYW1lKTtcbiAgICAgIGNvbnN0IGN1cnJlbnROYW1lTG93ZXIgPSBjdXJyZW50Q29tcG9uZW50TmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgY29uc3QgcGF0aENvbnRhaW5zQ3VycmVudCA9IGZpbHRlcmVkUGF0aC5zb21lKG5hbWUgPT4gbmFtZS50b0xvd2VyQ2FzZSgpID09PSBjdXJyZW50TmFtZUxvd2VyKTtcbiAgICAgIFxuICAgICAgbGV0IGZpbmFsUGF0aDtcbiAgICAgIGlmICghcGF0aENvbnRhaW5zQ3VycmVudCkge1xuICAgICAgICBmaW5hbFBhdGggPSBbLi4uZmlsdGVyZWRQYXRoLCBjdXJyZW50Q29tcG9uZW50TmFtZV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmaW5hbFBhdGggPSBmaWx0ZXJlZFBhdGg7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFJlbW92ZSBjb25zZWN1dGl2ZSBkdXBsaWNhdGVzIG9mIHRoZSBzYW1lIGNvbXBvbmVudHMgYmVmb3JlIGpvaW5pbmdcbiAgICAgIGZpbmFsUGF0aCA9IHJlbW92ZUNvbnNlY3V0aXZlRHVwbGljYXRlcyhmaW5hbFBhdGgpO1xuICAgICAgcmV0dXJuIGZpbmFsUGF0aC5qb2luKCcgLT4gJyk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBjdXJyZW50Q29tcG9uZW50TmFtZTtcbiAgfVxuICBcbiAgY29uc3QgZG9tUGF0aCA9IGdldERvbVBhdGgoZWxlbSk7XG4gIFxuICBpZiAoZG9tUGF0aC5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgY3VycmVudE5hbWVMb3dlciA9IGN1cnJlbnRDb21wb25lbnROYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgcGF0aENvbnRhaW5zQ3VycmVudCA9IGRvbVBhdGguc29tZShuYW1lID0+IG5hbWUudG9Mb3dlckNhc2UoKSA9PT0gY3VycmVudE5hbWVMb3dlcik7XG4gICAgXG4gICAgbGV0IGZpbmFsUGF0aDtcbiAgICBpZiAoIXBhdGhDb250YWluc0N1cnJlbnQpIHtcbiAgICAgIGZpbmFsUGF0aCA9IFsuLi5kb21QYXRoLCBjdXJyZW50Q29tcG9uZW50TmFtZV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpbmFsUGF0aCA9IGRvbVBhdGg7XG4gICAgfVxuICAgIFxuICAgIC8vIFJlbW92ZSBjb25zZWN1dGl2ZSBkdXBsaWNhdGVzIG9mIHRoZSBzYW1lIGNvbXBvbmVudHMgYmVmb3JlIGpvaW5pbmdcbiAgICBmaW5hbFBhdGggPSByZW1vdmVDb25zZWN1dGl2ZUR1cGxpY2F0ZXMoZmluYWxQYXRoKTtcbiAgICByZXR1cm4gZmluYWxQYXRoLmpvaW4oJyAtPiAnKTtcbiAgfVxuICBcbiAgcmV0dXJuIGN1cnJlbnRDb21wb25lbnROYW1lO1xufTtcblxuLyoqXG4gKiBBZGRzIHRoZSBhYnNvbHV0ZSBjb21wb25lbnQgcGF0aCB0byBhbiBvdmVybGF5IGVsZW1lbnRcbiAqIFVzZXMgZmliZXItYmFzZWQgaGllcmFyY2h5IGZvciBhY2N1cmF0ZSBSZWFjdCBjb21wb25lbnQgcGF0aHNcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW0gLSBPcmlnaW5hbCBET00gZWxlbWVudFxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0geHJheVJlYWN0RWxlbSAtIE92ZXJsYXkgZWxlbWVudFxuICovXG5jb25zdCBhZGRBYnNvbHV0ZUNvbXBvbmVudFBhdGggPSAoZWxlbSwgeHJheVJlYWN0RWxlbSkgPT4ge1xuICBjb25zdCBjdXJyZW50Q29tcG9uZW50TmFtZSA9IHhyYXlSZWFjdEVsZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXhyYXktcmVhY3QtZWxlbWVudC1uYW1lJykgfHwgJyc7XG4gIFxuICBjb25zdCBjb21wb25lbnRzID0gZ2V0Q29tcG9uZW50c0Zyb21FbGVtZW50KGVsZW0pO1xuICBcbiAgY29uc3QgZnVsbFN0cnVjdHVyZSA9IGJ1aWxkRnVsbFN0cnVjdHVyZShjb21wb25lbnRzLCBjdXJyZW50Q29tcG9uZW50TmFtZSwgZWxlbSk7XG4gIGNvbnN0IGZpbHRlcmVkU3RydWN0dXJlID0gYnVpbGRGaWx0ZXJlZFN0cnVjdHVyZShjb21wb25lbnRzLCBjdXJyZW50Q29tcG9uZW50TmFtZSwgZWxlbSk7XG4gIFxuICB4cmF5UmVhY3RFbGVtLnNldEF0dHJpYnV0ZShjb25zdGFudHMueHJheVJlYWN0Q29tcFBhdGhBdHRyLCBmdWxsU3RydWN0dXJlKTtcbiAgeHJheVJlYWN0RWxlbS5zZXRBdHRyaWJ1dGUoY29uc3RhbnRzLnhyYXlSZWFjdEZpbHRlcmVkQ29tcFBhdGhBdHRyLCBmaWx0ZXJlZFN0cnVjdHVyZSk7XG59O1xuXG4vKipcbiAqIEhhbmRsZXMgbW91c2VvdmVyIGV2ZW50cyBvbiBvdmVybGF5IGVsZW1lbnRzXG4gKiBAcGFyYW0ge0V2ZW50fSBldmVudCAtIE1vdXNlb3ZlciBldmVudFxuICovXG5jb25zdCBvblhyYXlSZWFjdE1vdXNlb3ZlciA9IChldmVudCkgPT4ge1xuICBjb25zdCB7IHRhcmdldCB9ID0gZXZlbnQ7XG4gIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKGNvbnN0YW50cy54cmF5UmVhY3RFbGVtQ04pKSB7XG4gICAgY29uc3QgY29tcG9uZW50c1BhdGggPSB0YXJnZXQuZ2V0QXR0cmlidXRlKGNvbnN0YW50cy54cmF5UmVhY3RGaWx0ZXJlZENvbXBQYXRoQXR0cikgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuZ2V0QXR0cmlidXRlKGNvbnN0YW50cy54cmF5UmVhY3RDb21wUGF0aEF0dHIpIHx8ICcnO1xuICAgIGNvbnN0IHBhdGhFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnhyYXktcmVhY3QtYWN0aW9ucy13cmFwcGVyIC5jb21wb25lbnRzLXBhdGgnKTtcbiAgICBpZiAocGF0aEVsZW1lbnQpIHtcbiAgICAgIHBhdGhFbGVtZW50LmlubmVySFRNTCA9IGNvbXBvbmVudHNQYXRoO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBUb2dnbGVzIHRoZSB4cmF5LXJlYWN0IG92ZXJsYXkgb24vb2ZmXG4gKi9cbmNvbnN0IHRvZ2dsZVhyYXlSZWFjdCA9ICgpID0+IHtcbiAgY29uc3QgYm9keSA9IGRvY3VtZW50LmJvZHk7XG4gIFxuICBpZiAoYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3hyYXktcmVhY3QtZW5hYmxlZCcpKSB7XG4gICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKCd4cmF5LXJlYWN0LWVuYWJsZWQnKTtcbiAgICBjb25zdCB4cmF5UmVhY3RFbGVtZW50c1dyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtjb25zdGFudHMueHJheVJlYWN0V3JhcHBlckNOfWApO1xuICAgIGNvbnN0IHhyYXlSZWFjdEFjdGlvbkJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy54cmF5LXJlYWN0LWFjdGlvbi1iYXInKTtcbiAgICBjb25zdCB4cmF5UmVhY3RTdHlsZVRhZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy54cmF5LXJlYWN0LXN0eWxlLXRhZycpO1xuICAgIGNvbnN0IHRlbXBFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy54cmF5LXJlYWN0LWVsZW1lbnQtdGVtcCcpO1xuICAgIFxuICAgIGlmICh4cmF5UmVhY3RFbGVtZW50c1dyYXBwZXIpIHhyYXlSZWFjdEVsZW1lbnRzV3JhcHBlci5yZW1vdmUoKTtcbiAgICBpZiAoeHJheVJlYWN0QWN0aW9uQmFyKSB4cmF5UmVhY3RBY3Rpb25CYXIucmVtb3ZlKCk7XG4gICAgaWYgKHhyYXlSZWFjdFN0eWxlVGFnKSB4cmF5UmVhY3RTdHlsZVRhZy5yZW1vdmUoKTtcbiAgICB0ZW1wRWxlbWVudHMuZm9yRWFjaChlbCA9PiBlbC5yZW1vdmUoKSk7XG4gICAgXG4gICAgYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBvblhyYXlSZWFjdE1vdXNlb3Zlcik7XG4gIH0gZWxzZSB7XG4gICAgYm9keS5jbGFzc0xpc3QuYWRkKCd4cmF5LXJlYWN0LWVuYWJsZWQnKTtcbiAgICBcbiAgICBsZXQgc3R5bGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnhyYXktcmVhY3Qtc3R5bGUtdGFnJyk7XG4gICAgaWYgKCFzdHlsZUVsZW1lbnQpIHtcbiAgICAgIHN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICBzdHlsZUVsZW1lbnQuY2xhc3NOYW1lID0gJ3hyYXktcmVhY3Qtc3R5bGUtdGFnJztcbiAgICAgIHN0eWxlRWxlbWVudC50ZXh0Q29udGVudCA9IGNzcztcbiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgZXhpc3RpbmdBY3Rpb25CYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcueHJheS1yZWFjdC1hY3Rpb24tYmFyJyk7XG4gICAgaWYgKCFleGlzdGluZ0FjdGlvbkJhcikge1xuICAgICAgYm9keS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGFjdGlvbkJhcik7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHNlYXJjaElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaC1jb21wb25lbnQnKTtcbiAgICBpZiAoc2VhcmNoSW5wdXQpIHtcbiAgICAgIHNlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgaGFuZGxlU2VhcmNoQ2hhbmdlKTtcbiAgICB9XG4gICAgYm9keS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBvblhyYXlSZWFjdE1vdXNlb3Zlcik7XG4gICAgXG4gICAgY29uc3QgZXhpc3RpbmdXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7Y29uc3RhbnRzLnhyYXlSZWFjdFdyYXBwZXJDTn1gKTtcbiAgICBpZiAoZXhpc3RpbmdXcmFwcGVyKSB7XG4gICAgICBleGlzdGluZ1dyYXBwZXIucmVtb3ZlKCk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHhyYXlSZWFjdEVsZW1lbnRzV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHhyYXlSZWFjdEVsZW1lbnRzV3JhcHBlci5jbGFzc05hbWUgPSBjb25zdGFudHMueHJheVJlYWN0V3JhcHBlckNOO1xuICAgIGJvZHkuYXBwZW5kKHhyYXlSZWFjdEVsZW1lbnRzV3JhcHBlcik7XG4gICAgXG4gICAgY29uc3QgZXhpc3RpbmdMb2FkaW5nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnhyYXktcmVhY3QtZWxlbWVudC10ZW1wJyk7XG4gICAgZXhpc3RpbmdMb2FkaW5nLmZvckVhY2goZWwgPT4gZWwucmVtb3ZlKCkpO1xuICAgIFxuICAgIGNvbnN0IGxvYWRpbmdFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbG9hZGluZ0VsZW1lbnQuY2xhc3NOYW1lID0gJ3hyYXktcmVhY3QtZWxlbWVudCB4cmF5LXJlYWN0LWVsZW1lbnQtdGVtcCc7XG4gICAgbG9hZGluZ0VsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gYCR7d2luZG93LmlubmVySGVpZ2h0fXB4YDtcbiAgICBsb2FkaW5nRWxlbWVudC5zdHlsZS53aWR0aCA9IGAke3dpbmRvdy5pbm5lcldpZHRofXB4YDtcbiAgICBsb2FkaW5nRWxlbWVudC5zdHlsZS50b3AgPSBgJHt3aW5kb3cuc2Nyb2xsWX1weGA7XG4gICAgbG9hZGluZ0VsZW1lbnQuc3R5bGUubGVmdCA9IGAke3dpbmRvdy5zY3JvbGxYfXB4YDtcbiAgICBsb2FkaW5nRWxlbWVudC5zdHlsZS56SW5kZXggPSAnMTAwMDAnO1xuICAgIGxvYWRpbmdFbGVtZW50LmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPVwieHJheS1yZWFjdC1zcGlubmVyIHhyYXktcmVhY3QtZWxlbWVudC10ZW1wXCI+PC9kaXY+JztcbiAgICB4cmF5UmVhY3RFbGVtZW50c1dyYXBwZXIuYXBwZW5kQ2hpbGQobG9hZGluZ0VsZW1lbnQpO1xuICAgIFxuICAgIC8vIFBlcmZvcm1hbmNlIGltcHJvdmVtZW50c1xuICAgIGNvbnN0IHByb2Nlc3NFbGVtZW50c0FzeW5jID0gKCkgPT4ge1xuICAgICAgY29uc3QgeHJheVJlYWN0T2JqZWN0cyA9IFtdO1xuICAgICAgY29uc3Qgc2VhcmNoQW5kQ3JlYXRlQ29tcG9uZW50ID0gc2VhcmNoQW5kQ3JlYXRlQ29tcG9uZW50Q2FjaGVkKCk7XG4gICAgICBjb25zdCBhbGxFbGVtZW50cyA9IEFycmF5LmZyb20oYm9keS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnKicpKS5maWx0ZXIoZWxlbSA9PiB7XG4gICAgICAgIHJldHVybiAhZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoJ3hyYXktcmVhY3QtZWxlbWVudC10ZW1wJykgJiZcbiAgICAgICAgICAgICAgICFlbGVtLmNsb3Nlc3QoJy54cmF5LXJlYWN0LWFjdGlvbi1iYXInKSAmJlxuICAgICAgICAgICAgICAgIWVsZW0uY2xvc2VzdChgLiR7Y29uc3RhbnRzLnhyYXlSZWFjdFdyYXBwZXJDTn1gKTtcbiAgICAgIH0pO1xuICAgICAgY29uc3QgYmF0Y2hTaXplID0gMjA7XG4gICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgXG4gICAgICBjb25zdCBwcm9jZXNzQmF0Y2ggPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGVuZEluZGV4ID0gTWF0aC5taW4oaW5kZXggKyBiYXRjaFNpemUsIGFsbEVsZW1lbnRzLmxlbmd0aCk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGxldCBpID0gaW5kZXg7IGkgPCBlbmRJbmRleDsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgZWxlbSA9IGFsbEVsZW1lbnRzW2ldO1xuICAgICAgICAgIGNvbnN0IHhyYXlSZWFjdE9iaiA9IHNlYXJjaEFuZENyZWF0ZUNvbXBvbmVudChlbGVtKTtcbiAgICAgICAgICBpZiAoeHJheVJlYWN0T2JqKSB7XG4gICAgICAgICAgICB4cmF5UmVhY3RPYmplY3RzLnB1c2goeHJheVJlYWN0T2JqKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGluZGV4ID0gZW5kSW5kZXg7XG4gICAgICAgIFxuICAgICAgICBpZiAoaW5kZXggPCBhbGxFbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KHByb2Nlc3NCYXRjaCwgMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGV0IHBhdGhJbmRleCA9IDA7XG4gICAgICAgICAgY29uc3QgcGF0aEJhdGNoU2l6ZSA9IDEwO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IHByb2Nlc3NQYXRocyA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVuZEluZGV4ID0gTWF0aC5taW4ocGF0aEluZGV4ICsgcGF0aEJhdGNoU2l6ZSwgeHJheVJlYWN0T2JqZWN0cy5sZW5ndGgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gcGF0aEluZGV4OyBpIDwgZW5kSW5kZXg7IGkrKykge1xuICAgICAgICAgICAgICBjb25zdCB7IGVsZW0sIHhyYXlSZWFjdEVsZW0gfSA9IHhyYXlSZWFjdE9iamVjdHNbaV07XG4gICAgICAgICAgICAgIGFkZEFic29sdXRlQ29tcG9uZW50UGF0aChlbGVtLCB4cmF5UmVhY3RFbGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcGF0aEluZGV4ID0gZW5kSW5kZXg7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChwYXRoSW5kZXggPCB4cmF5UmVhY3RPYmplY3RzLmxlbmd0aCkge1xuICAgICAgICAgICAgICBzZXRUaW1lb3V0KHByb2Nlc3NQYXRocywgMSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7Y29uc3RhbnRzLnhyYXlSZWFjdFdyYXBwZXJDTn1gKTtcbiAgICAgICAgICAgICAgaWYgKHdyYXBwZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZW1wRWxlbWVudHMgPSB3cmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy54cmF5LXJlYWN0LWVsZW1lbnQtdGVtcCcpO1xuICAgICAgICAgICAgICAgIHRlbXBFbGVtZW50cy5mb3JFYWNoKGVsID0+IGVsLnJlbW92ZSgpKTtcbiAgICAgICAgICAgICAgICB3cmFwcGVyLmFwcGVuZCguLi54cmF5UmVhY3RPYmplY3RzLm1hcChvYmogPT4gb2JqLnhyYXlSZWFjdEVsZW0pKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgXG4gICAgICAgICAgc2V0VGltZW91dChwcm9jZXNzUGF0aHMsIDEpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgXG4gICAgICBzZXRUaW1lb3V0KHByb2Nlc3NCYXRjaCwgMSk7XG4gICAgfTtcbiAgICBcbiAgICBwcm9jZXNzRWxlbWVudHNBc3luYygpO1xuICB9XG59O1xuXG4vKipcbiAqIEtleWRvd24gZXZlbnQgaGFuZGxlciBmb3IgeHJheS1yZWFjdCBzaG9ydGN1dHNcbiAqIE1hdGNoZXMgeHJheS1yYWlsczogQ21kK1NoaWZ0K1ggKE1hYykgLyBDdHJsK1NoaWZ0K1ggKFdpbmRvd3MvTGludXgpXG4gKi9cbmxldCBrZXlkb3duSGFuZGxlciA9IG51bGw7XG5sZXQgaXNIYW5kbGVyUmVnaXN0ZXJlZCA9IGZhbHNlO1xuXG5jb25zdCBjcmVhdGVLZXlkb3duSGFuZGxlciA9ICgpID0+IHtcbiAgcmV0dXJuIChldmVudCkgPT4ge1xuICAgIGlmIChldmVudC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICBjb25zdCBib2R5ID0gZG9jdW1lbnQuYm9keTtcbiAgICAgIGlmIChib2R5ICYmIGJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCd4cmF5LXJlYWN0LWVuYWJsZWQnKSkge1xuICAgICAgICB0b2dnbGVYcmF5UmVhY3QoKTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgaXNNYWMgPSBuYXZpZ2F0b3IucGxhdGZvcm0udG9VcHBlckNhc2UoKS5pbmRleE9mKCdNQUMnKSA+PSAwO1xuICAgIGNvbnN0IGlzTWV0YU9yQ3RybCA9IGlzTWFjID8gZXZlbnQubWV0YUtleSA6IGV2ZW50LmN0cmxLZXk7XG4gICAgY29uc3QgaXNTaGlmdCA9IGV2ZW50LnNoaWZ0S2V5O1xuICAgIGNvbnN0IGlzWCA9IGV2ZW50LmtleSA9PT0gJ3gnIHx8IGV2ZW50LmtleSA9PT0gJ1gnIHx8IGV2ZW50LmtleUNvZGUgPT09IDg4O1xuICAgIFxuICAgIGlmIChpc01ldGFPckN0cmwgJiYgaXNTaGlmdCAmJiBpc1gpIHtcbiAgICAgIHRvZ2dsZVhyYXlSZWFjdCgpO1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgfTtcbn07XG5cbi8qKlxuICogSGFuZGxlcyBrZXlib2FyZCBzaG9ydGN1dCB0byB0b2dnbGUgeHJheS1yZWFjdFxuICogRW5zdXJlcyB0aGUgbGlzdGVuZXIgaXMgb25seSByZWdpc3RlcmVkIG9uY2VcbiAqL1xuY29uc3QgaGFuZGxlWHJheVJlYWN0VG9nZ2xlID0gKCkgPT4ge1xuICBpZiAoaXNIYW5kbGVyUmVnaXN0ZXJlZCkge1xuICAgIHJldHVybjtcbiAgfVxuICBcbiAgaWYgKCFrZXlkb3duSGFuZGxlcikge1xuICAgIGtleWRvd25IYW5kbGVyID0gY3JlYXRlS2V5ZG93bkhhbmRsZXIoKTtcbiAgfVxuICBcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGtleWRvd25IYW5kbGVyLCB0cnVlKTtcbiAgaXNIYW5kbGVyUmVnaXN0ZXJlZCA9IHRydWU7XG59O1xuXG4vKipcbiAqIEVuYWJsZXMgeHJheS1yZWFjdCBmdW5jdGlvbmFsaXR5XG4gKi9cbmV4cG9ydCBjb25zdCBlbmFibGVYcmF5UmVhY3QgPSAoKSA9PiB7XG4gIGlmICghcHJvamVjdFJvb3QpIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Ll9fWFJBWV9SRUFDVF9QUk9KRUNUX1JPT1RfXykge1xuICAgICAgcHJvamVjdFJvb3QgPSBub3JtYWxpemVQYXRoKHdpbmRvdy5fX1hSQVlfUkVBQ1RfUFJPSkVDVF9ST09UX18pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgZGV0ZWN0UHJvamVjdFJvb3RGcm9tRE9NKCk7XG4gICAgICB9LCAxMDAwKTtcbiAgICB9XG4gIH1cbiAgXG4gIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnbG9hZGluZycpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgaGFuZGxlWHJheVJlYWN0VG9nZ2xlKTtcbiAgfSBlbHNlIHtcbiAgICBoYW5kbGVYcmF5UmVhY3RUb2dnbGUoKTtcbiAgfVxufTtcbiIsImltcG9ydCB7IGVuYWJsZVhyYXlSZWFjdCwgc2V0UHJvamVjdFJvb3QsIHNldFVzYWdlTWFwLCBzZXRJbXBvcnRNYXAsIHNldFByb2plY3RGaWxlcyB9IGZyb20gJy4uL3NyYy91aS11dGlscy5qcyc7XG5cbi8vIEV4cG9zZSBmdW5jdGlvbnMgZ2xvYmFsbHkgZm9yIGNsaWVudCBidW5kbGUgdG8gdXNlXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgd2luZG93LnhyYXlSZWFjdFNldFByb2plY3RSb290ID0gc2V0UHJvamVjdFJvb3Q7XG4gIHdpbmRvdy54cmF5UmVhY3RTZXRVc2FnZU1hcCA9IHNldFVzYWdlTWFwO1xuICB3aW5kb3cueHJheVJlYWN0U2V0SW1wb3J0TWFwID0gc2V0SW1wb3J0TWFwO1xuICB3aW5kb3cueHJheVJlYWN0U2V0UHJvamVjdEZpbGVzID0gc2V0UHJvamVjdEZpbGVzO1xufVxuXG5lbmFibGVYcmF5UmVhY3QoKTtcbiJdLCJuYW1lcyI6WyJjb25zdGFudHMueHJheVJlYWN0RWxlbUNOIiwiY29uc3RhbnRzLnpJbmRleCIsImNvbnN0YW50cy5IVE1MX0VMRU1FTlRTIiwiY29uc3RhbnRzLnhyYXlSZWFjdENvbXBQYXRoQXR0ciIsImNvbnN0YW50cy54cmF5UmVhY3RGaWx0ZXJlZENvbXBQYXRoQXR0ciIsImNvbnN0YW50cy54cmF5UmVhY3RXcmFwcGVyQ04iXSwibWFwcGluZ3MiOiI7OztFQUFPLE1BQU0sZUFBZSxHQUFHLG9CQUFvQjtFQUM1QyxNQUFNLGtCQUFrQixHQUFHLDZCQUE2QjtFQUN4RCxNQUFNLHFCQUFxQixHQUFHLGlDQUFpQztFQUMvRCxNQUFNLDZCQUE2QixHQUFHLDBDQUEwQztFQUNoRixNQUFNLE1BQU0sR0FBRyxLQUFLOztFQUVwQixNQUFNLGFBQWEsR0FBRyxJQUFJLEdBQUcsQ0FBQztFQUNyQyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJO0VBQy9GLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsT0FBTztFQUN4RSxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLE9BQU87RUFDbEUsRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUUsVUFBVSxFQUFFLFFBQVE7RUFDL0QsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxLQUFLO0VBQ2xFLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsTUFBTTtFQUN2RCxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxTQUFTO0VBQzFFLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsT0FBTztFQUNsRSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUU7RUFDakQsQ0FBQyxDQUFDOztBQ2hCRixZQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7RUNoS00sTUFBTSxTQUFTLEdBQUc7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7RUNORCxNQUFNLGVBQWUsR0FBRyxFQUFFLENBQUM7O0VBRTNCLElBQUksV0FBVyxHQUFHLElBQUk7RUFDdEIsSUFBSSxRQUFRLEdBQUcsRUFBRTtFQUNqQixJQUFJLFNBQVMsR0FBRyxFQUFFO0VBQ2xCLElBQUksZ0JBQWdCLEdBQUcsSUFBSSxHQUFHLEVBQUU7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
