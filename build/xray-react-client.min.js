(function () {
  'use strict';

  const xrayReactElemCN = 'xray-react-element';
  const xrayReactCompPathAttr = 'data-xray-react-components-path';

  const getIOConnectURL = () => {
    const port = (typeof window !== 'undefined' && window.__XRAY_REACT_PORT__) || 8124;
    return `http://127.0.0.1:${port}`;
  };

  /**
   * ClientIO class for handling Socket.IO connections
   */
  class ClientIO {
    constructor() {
      this.client = null;
    }

    /**
     * Dynamically loads Socket.IO client library
     * @returns {Promise<boolean>} True if loaded successfully
     */
    addScript() {
      return new Promise((resolve) => {
        if (typeof window.io !== 'undefined') {
          resolve(true);
          return;
        }

        const script = document.createElement('script');
        script.type = 'text/javascript';
        script.async = true;
        script.src = 'https://cdn.socket.io/4.8.1/socket.io.min.js';

        script.addEventListener('load', () => {
          resolve(true);
          script.remove();
        });

        script.addEventListener('error', () => {
          console.error('Failed to load Socket.IO client library');
          resolve(false);
          script.remove();
        });

        document.body.appendChild(script);
      });
    }

    /**
     * Initializes Socket.IO connection
     * @returns {Promise<boolean>} True if connected successfully
     */
    async init() {
      if (typeof window.io === 'undefined') {
        const isSuccess = await this.addScript();
        if (!isSuccess) {
          return false;
        }
      }

      try {
        // Socket.IO 4.x uses io() instead of io.connect()
        this.client = window.io(getIOConnectURL(), {
          transports: ['websocket', 'polling']
        });

        this.client.on('connect', () => {
          console.debug('Xray-react: Connected to server');
        });

        this.client.on('disconnect', () => {
          console.debug('Xray-react: Disconnected from server');
        });

        this.client.on('connect_error', (error) => {
          console.warn('Xray-react: Connection error', error);
        });

        this.client.on('project-config', (config) => {
          if (config) {
            if (config.port && typeof window !== 'undefined') {
              window.__XRAY_REACT_PORT__ = config.port;
              console.debug('Xray-react: Received port from server:', config.port);
            }
            
            if (config.projectRoot) {
              if (typeof window !== 'undefined' && window.xrayReactSetProjectRoot) {
                window.xrayReactSetProjectRoot(config.projectRoot);
                console.debug('Xray-react: Received project root from server:', config.projectRoot);
              } else {
                if (typeof window !== 'undefined') {
                  window.__XRAY_REACT_PROJECT_ROOT__ = config.projectRoot;
                  console.debug('Xray-react: Stored project root in global variable:', config.projectRoot);
                }
              }
            }
          }
        });

        this.client.on('usage-map', (data) => {
          if (data && data.usage) {
            if (typeof window !== 'undefined' && window.xrayReactSetUsageMap) {
              window.xrayReactSetUsageMap(data.usage);
              console.debug('Xray-react: Received usage map from server:', Object.keys(data.usage).length, 'files');
            } else {
              if (typeof window !== 'undefined') {
                window.__XRAY_REACT_USAGE_MAP__ = data.usage;
                console.debug('Xray-react: Stored usage map in global variable:', Object.keys(data.usage).length, 'files');
              }
            }
          }
        });

        this.client.on('import-map', (data) => {
          if (data && data.imports) {
            if (typeof window !== 'undefined' && window.xrayReactSetImportMap) {
              window.xrayReactSetImportMap(data.imports);
              console.debug('Xray-react: Received import map from server:', Object.keys(data.imports).length, 'files');
            } else {
              if (typeof window !== 'undefined') {
                window.__XRAY_REACT_IMPORT_MAP__ = data.imports;
                console.debug('Xray-react: Stored import map in global variable:', Object.keys(data.imports).length, 'files');
              }
            }
          }
        });

        this.client.on('project-files', (data) => {
          if (data && data.files) {
            if (typeof window !== 'undefined' && window.xrayReactSetProjectFiles) {
              window.xrayReactSetProjectFiles(data.files);
              console.debug('Xray-react: Received project files list from server:', data.files.length, 'files');
            } else {
              if (typeof window !== 'undefined') {
                window.__XRAY_REACT_PROJECT_FILES__ = data.files;
                console.debug('Xray-react: Stored project files list in global variable:', data.files.length, 'files');
              }
            }
          }
        });

        return true;
      } catch (error) {
        console.error('Xray-react: Failed to initialize Socket.IO', error);
        return false;
      }
    }
  }

  /**
   * Initializes Socket.IO and sets up click listeners
   */
  const initIOAndListeners = async () => {
    const clientIO = new ClientIO();
    const isSuccess = await clientIO.init();

    if (isSuccess) {
      document.body.addEventListener('click', (event) => {
        const target = event.target;
        if (target.classList.contains(xrayReactElemCN)) {
          const componentPath = target.getAttribute(xrayReactCompPathAttr);
          if (componentPath && clientIO.client) {
            clientIO.client.emit('xray-react-component', componentPath);
          }
        }
      });
    }
  };

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initIOAndListeners);
  } else {
    initIOAndListeners();
  }

})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoieHJheS1yZWFjdC1jbGllbnQubWluLmpzIiwic291cmNlcyI6WyIuLi9zcmMvY29uc3RhbnRzLmpzIiwiLi4vbGliL3hyYXktcmVhY3QtY2xpZW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCB4cmF5UmVhY3RFbGVtQ04gPSAneHJheS1yZWFjdC1lbGVtZW50JztcbmV4cG9ydCBjb25zdCB4cmF5UmVhY3RXcmFwcGVyQ04gPSAneHJheS1yZWFjdC1lbGVtZW50cy13cmFwcGVyJztcbmV4cG9ydCBjb25zdCB4cmF5UmVhY3RDb21wUGF0aEF0dHIgPSAnZGF0YS14cmF5LXJlYWN0LWNvbXBvbmVudHMtcGF0aCc7XG5leHBvcnQgY29uc3QgeHJheVJlYWN0RmlsdGVyZWRDb21wUGF0aEF0dHIgPSAnZGF0YS14cmF5LXJlYWN0LWZpbHRlcmVkLWNvbXBvbmVudHMtcGF0aCc7XG5leHBvcnQgY29uc3QgekluZGV4ID0gMTAwMDA7XG5cbmV4cG9ydCBjb25zdCBIVE1MX0VMRU1FTlRTID0gbmV3IFNldChbXG4gICdkaXYnLCAnc3BhbicsICdmb3JtJywgJ2J1dHRvbicsICdpbnB1dCcsICdhJywgJ2ltZycsICdwJywgJ2gxJywgJ2gyJywgJ2gzJywgJ2g0JywgJ2g1JywgJ2g2JyxcbiAgJ3VsJywgJ2xpJywgJ29sJywgJ3RhYmxlJywgJ3RyJywgJ3RkJywgJ3RoJywgJ3RoZWFkJywgJ3Rib2R5JywgJ3Rmb290JyxcbiAgJ3NlY3Rpb24nLCAnYXJ0aWNsZScsICdoZWFkZXInLCAnZm9vdGVyJywgJ25hdicsICdtYWluJywgJ2FzaWRlJyxcbiAgJ2xhYmVsJywgJ3NlbGVjdCcsICdvcHRpb24nLCAndGV4dGFyZWEnLCAnZmllbGRzZXQnLCAnbGVnZW5kJyxcbiAgJ2JyJywgJ2hyJywgJ3N0cm9uZycsICdlbScsICdiJywgJ2knLCAndScsICdzbWFsbCcsICdzdWInLCAnc3VwJyxcbiAgJ2RsJywgJ2R0JywgJ2RkJywgJ3ByZScsICdjb2RlJywgJ2Jsb2NrcXVvdGUnLCAnY2l0ZScsXG4gICdjYW52YXMnLCAnc3ZnJywgJ3BhdGgnLCAnY2lyY2xlJywgJ3JlY3QnLCAnbGluZScsICdwb2x5bGluZScsICdwb2x5Z29uJyxcbiAgJ2lmcmFtZScsICdlbWJlZCcsICdvYmplY3QnLCAndmlkZW8nLCAnYXVkaW8nLCAnc291cmNlJywgJ3RyYWNrJyxcbiAgJ21ldGEnLCAnbGluaycsICdzdHlsZScsICdzY3JpcHQnLCAnbm9zY3JpcHQnLCAndGVtcGxhdGUnXG5dKTtcbiIsImltcG9ydCAqIGFzIGNvbnN0YW50cyBmcm9tICcuLi9zcmMvY29uc3RhbnRzLmpzJztcblxuY29uc3QgZ2V0SU9Db25uZWN0VVJMID0gKCkgPT4ge1xuICBjb25zdCBwb3J0ID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5fX1hSQVlfUkVBQ1RfUE9SVF9fKSB8fCA4MTI0O1xuICByZXR1cm4gYGh0dHA6Ly8xMjcuMC4wLjE6JHtwb3J0fWA7XG59O1xuXG4vKipcbiAqIENsaWVudElPIGNsYXNzIGZvciBoYW5kbGluZyBTb2NrZXQuSU8gY29ubmVjdGlvbnNcbiAqL1xuY2xhc3MgQ2xpZW50SU8ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNsaWVudCA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogRHluYW1pY2FsbHkgbG9hZHMgU29ja2V0LklPIGNsaWVudCBsaWJyYXJ5XG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGJvb2xlYW4+fSBUcnVlIGlmIGxvYWRlZCBzdWNjZXNzZnVsbHlcbiAgICovXG4gIGFkZFNjcmlwdCgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93LmlvICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgc2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcbiAgICAgIHNjcmlwdC5hc3luYyA9IHRydWU7XG4gICAgICBzY3JpcHQuc3JjID0gJ2h0dHBzOi8vY2RuLnNvY2tldC5pby80LjguMS9zb2NrZXQuaW8ubWluLmpzJztcblxuICAgICAgc2NyaXB0LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG4gICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgIHNjcmlwdC5yZW1vdmUoKTtcbiAgICAgIH0pO1xuXG4gICAgICBzY3JpcHQuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIFNvY2tldC5JTyBjbGllbnQgbGlicmFyeScpO1xuICAgICAgICByZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgc2NyaXB0LnJlbW92ZSgpO1xuICAgICAgfSk7XG5cbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyBTb2NrZXQuSU8gY29ubmVjdGlvblxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn0gVHJ1ZSBpZiBjb25uZWN0ZWQgc3VjY2Vzc2Z1bGx5XG4gICAqL1xuICBhc3luYyBpbml0KCkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93LmlvID09PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3QgaXNTdWNjZXNzID0gYXdhaXQgdGhpcy5hZGRTY3JpcHQoKTtcbiAgICAgIGlmICghaXNTdWNjZXNzKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8gU29ja2V0LklPIDQueCB1c2VzIGlvKCkgaW5zdGVhZCBvZiBpby5jb25uZWN0KClcbiAgICAgIHRoaXMuY2xpZW50ID0gd2luZG93LmlvKGdldElPQ29ubmVjdFVSTCgpLCB7XG4gICAgICAgIHRyYW5zcG9ydHM6IFsnd2Vic29ja2V0JywgJ3BvbGxpbmcnXVxuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuY2xpZW50Lm9uKCdjb25uZWN0JywgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmRlYnVnKCdYcmF5LXJlYWN0OiBDb25uZWN0ZWQgdG8gc2VydmVyJyk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5jbGllbnQub24oJ2Rpc2Nvbm5lY3QnLCAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ1hyYXktcmVhY3Q6IERpc2Nvbm5lY3RlZCBmcm9tIHNlcnZlcicpO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuY2xpZW50Lm9uKCdjb25uZWN0X2Vycm9yJywgKGVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUud2FybignWHJheS1yZWFjdDogQ29ubmVjdGlvbiBlcnJvcicsIGVycm9yKTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmNsaWVudC5vbigncHJvamVjdC1jb25maWcnLCAoY29uZmlnKSA9PiB7XG4gICAgICAgIGlmIChjb25maWcpIHtcbiAgICAgICAgICBpZiAoY29uZmlnLnBvcnQgJiYgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHdpbmRvdy5fX1hSQVlfUkVBQ1RfUE9SVF9fID0gY29uZmlnLnBvcnQ7XG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdYcmF5LXJlYWN0OiBSZWNlaXZlZCBwb3J0IGZyb20gc2VydmVyOicsIGNvbmZpZy5wb3J0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGNvbmZpZy5wcm9qZWN0Um9vdCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy54cmF5UmVhY3RTZXRQcm9qZWN0Um9vdCkge1xuICAgICAgICAgICAgICB3aW5kb3cueHJheVJlYWN0U2V0UHJvamVjdFJvb3QoY29uZmlnLnByb2plY3RSb290KTtcbiAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnWHJheS1yZWFjdDogUmVjZWl2ZWQgcHJvamVjdCByb290IGZyb20gc2VydmVyOicsIGNvbmZpZy5wcm9qZWN0Um9vdCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuX19YUkFZX1JFQUNUX1BST0pFQ1RfUk9PVF9fID0gY29uZmlnLnByb2plY3RSb290O1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ1hyYXktcmVhY3Q6IFN0b3JlZCBwcm9qZWN0IHJvb3QgaW4gZ2xvYmFsIHZhcmlhYmxlOicsIGNvbmZpZy5wcm9qZWN0Um9vdCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmNsaWVudC5vbigndXNhZ2UtbWFwJywgKGRhdGEpID0+IHtcbiAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS51c2FnZSkge1xuICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cueHJheVJlYWN0U2V0VXNhZ2VNYXApIHtcbiAgICAgICAgICAgIHdpbmRvdy54cmF5UmVhY3RTZXRVc2FnZU1hcChkYXRhLnVzYWdlKTtcbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ1hyYXktcmVhY3Q6IFJlY2VpdmVkIHVzYWdlIG1hcCBmcm9tIHNlcnZlcjonLCBPYmplY3Qua2V5cyhkYXRhLnVzYWdlKS5sZW5ndGgsICdmaWxlcycpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgd2luZG93Ll9fWFJBWV9SRUFDVF9VU0FHRV9NQVBfXyA9IGRhdGEudXNhZ2U7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ1hyYXktcmVhY3Q6IFN0b3JlZCB1c2FnZSBtYXAgaW4gZ2xvYmFsIHZhcmlhYmxlOicsIE9iamVjdC5rZXlzKGRhdGEudXNhZ2UpLmxlbmd0aCwgJ2ZpbGVzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5jbGllbnQub24oJ2ltcG9ydC1tYXAnLCAoZGF0YSkgPT4ge1xuICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmltcG9ydHMpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LnhyYXlSZWFjdFNldEltcG9ydE1hcCkge1xuICAgICAgICAgICAgd2luZG93LnhyYXlSZWFjdFNldEltcG9ydE1hcChkYXRhLmltcG9ydHMpO1xuICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnWHJheS1yZWFjdDogUmVjZWl2ZWQgaW1wb3J0IG1hcCBmcm9tIHNlcnZlcjonLCBPYmplY3Qua2V5cyhkYXRhLmltcG9ydHMpLmxlbmd0aCwgJ2ZpbGVzJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICB3aW5kb3cuX19YUkFZX1JFQUNUX0lNUE9SVF9NQVBfXyA9IGRhdGEuaW1wb3J0cztcbiAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnWHJheS1yZWFjdDogU3RvcmVkIGltcG9ydCBtYXAgaW4gZ2xvYmFsIHZhcmlhYmxlOicsIE9iamVjdC5rZXlzKGRhdGEuaW1wb3J0cykubGVuZ3RoLCAnZmlsZXMnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmNsaWVudC5vbigncHJvamVjdC1maWxlcycsIChkYXRhKSA9PiB7XG4gICAgICAgIGlmIChkYXRhICYmIGRhdGEuZmlsZXMpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LnhyYXlSZWFjdFNldFByb2plY3RGaWxlcykge1xuICAgICAgICAgICAgd2luZG93LnhyYXlSZWFjdFNldFByb2plY3RGaWxlcyhkYXRhLmZpbGVzKTtcbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ1hyYXktcmVhY3Q6IFJlY2VpdmVkIHByb2plY3QgZmlsZXMgbGlzdCBmcm9tIHNlcnZlcjonLCBkYXRhLmZpbGVzLmxlbmd0aCwgJ2ZpbGVzJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICB3aW5kb3cuX19YUkFZX1JFQUNUX1BST0pFQ1RfRklMRVNfXyA9IGRhdGEuZmlsZXM7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ1hyYXktcmVhY3Q6IFN0b3JlZCBwcm9qZWN0IGZpbGVzIGxpc3QgaW4gZ2xvYmFsIHZhcmlhYmxlOicsIGRhdGEuZmlsZXMubGVuZ3RoLCAnZmlsZXMnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignWHJheS1yZWFjdDogRmFpbGVkIHRvIGluaXRpYWxpemUgU29ja2V0LklPJywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIFNvY2tldC5JTyBhbmQgc2V0cyB1cCBjbGljayBsaXN0ZW5lcnNcbiAqL1xuY29uc3QgaW5pdElPQW5kTGlzdGVuZXJzID0gYXN5bmMgKCkgPT4ge1xuICBjb25zdCBjbGllbnRJTyA9IG5ldyBDbGllbnRJTygpO1xuICBjb25zdCBpc1N1Y2Nlc3MgPSBhd2FpdCBjbGllbnRJTy5pbml0KCk7XG5cbiAgaWYgKGlzU3VjY2Vzcykge1xuICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKGNvbnN0YW50cy54cmF5UmVhY3RFbGVtQ04pKSB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudFBhdGggPSB0YXJnZXQuZ2V0QXR0cmlidXRlKGNvbnN0YW50cy54cmF5UmVhY3RDb21wUGF0aEF0dHIpO1xuICAgICAgICBpZiAoY29tcG9uZW50UGF0aCAmJiBjbGllbnRJTy5jbGllbnQpIHtcbiAgICAgICAgICBjbGllbnRJTy5jbGllbnQuZW1pdCgneHJheS1yZWFjdC1jb21wb25lbnQnLCBjb21wb25lbnRQYXRoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG59O1xuXG5pZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2xvYWRpbmcnKSB7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBpbml0SU9BbmRMaXN0ZW5lcnMpO1xufSBlbHNlIHtcbiAgaW5pdElPQW5kTGlzdGVuZXJzKCk7XG59XG4iXSwibmFtZXMiOlsiY29uc3RhbnRzLnhyYXlSZWFjdEVsZW1DTiIsImNvbnN0YW50cy54cmF5UmVhY3RDb21wUGF0aEF0dHIiXSwibWFwcGluZ3MiOiI7OztFQUFPLE1BQU0sZUFBZSxHQUFHLG9CQUFvQjtFQUU1QyxNQUFNLHFCQUFxQixHQUFHLGlDQUFpQzs7RUNBdEUsTUFBTSxlQUFlLEdBQUcsTUFBTTtFQUM5QixFQUFFLE1BQU0sSUFBSSxHQUFHLENBQUMsT0FBTyxNQUFNLEtBQUssV0FBVyxJQUFJLE1BQU0sQ0FBQyxtQkFBbUIsS0FBSyxJQUFJO0VBQ3BGLEVBQUUsT0FBTyxDQUFDLGlCQUFpQixF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
